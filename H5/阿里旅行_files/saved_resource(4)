/*! h5-mpibase 2016-03-01 14:09:37 */
!function(a,b){function c(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),e>d)return-1;if(d>e)return 1}return 0}var d=a.Promise,e=a.document,f=a.navigator.userAgent,g=/Windows\sPhone\s(?:OS\s)?[\d\.]+/i.test(f)||/Windows\sNT\s[\d\.]+/i.test(f),h=g&&a.WindVane_Win_Private&&a.WindVane_Win_Private.call,i=/iPhone|iPad|iPod/i.test(f),j=/Android/i.test(f),k=f.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),l=Object.prototype.hasOwnProperty,m=b.windvane=a.WindVane||(a.WindVane={}),n=(a.WindVane_Native,1),o=[],p=3,q="hybrid",r="wv_hybrid",s="iframe_",t="suc_",u="err_",v="defer_",w="param_",x="chunk_",y=6e5,z=6e5,A=6e4;k=k?(k[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var B={isAvailable:1===c(k,"0"),call:function(a,b,c,e,f,g){var h,i;return"number"==typeof arguments[arguments.length-1]&&(g=arguments[arguments.length-1]),"function"!=typeof e&&(e=null),"function"!=typeof f&&(f=null),d&&(i={},i.promise=new d(function(a,b){i.resolve=a,i.reject=b})),h=g>0?setTimeout(function(){B.onFailure(h,{ret:"HY_TIMEOUT"})},g):C.getSid(),C.registerCall(h,e,f,i),C.registerGC(h,g),C.callMethod(a,b,c,h),i?i.promise:void 0},fireEvent:function(a,b,c){var d=e.createEvent("HTMLEvents");d.initEvent(a,!1,!0),d.param=C.parseData(b||C.getData(c)),e.dispatchEvent(d)},getParam:function(a){return C.getParam(a)},setData:function(a,b){C.setData(a,b)},onSuccess:function(a,b){C.onComplete(a,b,"success")},onFailure:function(a,b){C.onComplete(a,b,"failure")}},C={params:{},chunks:{},calls:{},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+n++},buildParam:function(a){return a&&"object"==typeof a?JSON.stringify(a):a||""},getParam:function(a){return this.params[w+a]||""},setParam:function(a,b){this.params[w+a]=b},parseData:function(a){var b;if(a&&"string"==typeof a)try{b=JSON.parse(a)}catch(c){b={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else b=a||{};return b},setData:function(){this.chunks[x+sid]=this.chunks[x+sid]||[],this.chunks[x+sid].push(chunk)},getData:function(a){return this.chunks[x+a]?this.chunks[x+a].join(""):""},registerCall:function(a,b,c,d){b&&(this.calls[t+a]=b),c&&(this.calls[u+a]=c),d&&(this.calls[v+a]=d)},unregisterCall:function(a){var b=t+a,c=u+a,d=v+a,e={};return this.calls[b]&&(e.success=this.calls[b],delete this.calls[b]),this.calls[c]&&(e.failure=this.calls[c],delete this.calls[c]),this.calls[d]&&(e.deferred=this.calls[d],delete this.calls[d]),e},useIframe:function(a,b){var c=s+a,d=o.pop();d||(d=e.createElement("iframe"),d.setAttribute("frameborder","0"),d.style.cssText="width:0;height:0;border:0;display:none;"),d.setAttribute("id",c),d.setAttribute("src",b),d.parentNode||setTimeout(function(){e.body.appendChild(d)},5)},retrieveIframe:function(a){var b=s+a,c=e.querySelector("#"+b);o.length>=p?e.body.removeChild(c):o.push(c)},callMethod:function(b,c,d,e){if(d=C.buildParam(d),g)h?a.WindVane_Win_Private.call(b,c,e,d):this.onComplete(e,{ret:"HY_NO_HANDLER_ON_WP"},"failure");else{var f=q+"://"+b+":"+e+"/"+c+"?"+d;if(i)this.setParam(e,d),this.useIframe(e,f);else if(j){var k=r+":";window.prompt(f,k)}else this.onComplete(e,{ret:"HY_NOT_SUPPORT_DEVICE"},"failure")}},registerGC:function(a,b){var c=this,d=Math.max(b||0,y),e=Math.max(b||0,A),f=Math.max(b||0,z);setTimeout(function(){c.unregisterCall(a)},d),i?setTimeout(function(){c.params[w+a]&&delete c.params[w+a]},e):j&&setTimeout(function(){c.chunks[x+a]&&delete c.chunks[x+a]},f)},onComplete:function(a,b,c){clearTimeout(a);var d=this.unregisterCall(a),e=d.success,f=d.failure,g=d.deferred;b=b?b:this.getData(a),b=this.parseData(b);var h=b.ret;"string"==typeof h&&(b=b.value||b,b.ret||(b.ret=[h])),"success"===c?(e&&e(b),g&&g.resolve(b)):"failure"===c&&(f&&f(b),g&&g.reject(b)),i?(this.retrieveIframe(a),this.params[w+a]&&delete this.params[w+a]):j&&this.chunks[x+a]&&delete this.chunks[x+a]}};for(var D in B)l.call(m,D)||(m[D]=B[D])}(window,window.lib||(window.lib={})),function(a){function b(a){var b;return m.each(n.slice.call(arguments,1),function(c){if(c)for(var d in c)void 0!==(b=c[d])&&(a[d]=b)}),a}function c(){t||e()}function d(a,b){{var c;a.sheet}if(s)a.sheet&&(c=1);else if(a.sheet)try{var d=a.sheet.cssRules;d&&(c=1)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=1)}return c}function e(){for(var a in u){var b=u[a],c=b.node;d(c,a)&&(b.callback&&b.callback.call(c),delete u[a],v--)}t=v?setTimeout(e,30):0}function f(a,b){var d,e=a.href;d=u[e]={},d.node=a,d.callback=b,v++,c()}function g(a){var b=a.match(E);return a?b[0]:a+"/"}function h(a,b){if(b&&/^[\.\/]/.test(a)){for(a=g(b)+a,a=a.replace(F,"/");a.match(G);)a=a.replace(G,"/");a=a.replace(H,"$1/")}return a}function i(a,b){return"/"===a.charAt(a.length-1)?a+="index":/.js$/.test(a)&&(a=a.slice(0,-3)),h(a,b)}function j(a,b,c){var d=m.map(b||[],function(a){return m.require(a,c)});return D(a)?a.apply(m,[m].concat(d)):void 0}function l(a){return D(a)?a.apply(m,[m,m.require]):void 0}var m={version:"0.3.12",Env:{host:a}},n=Array.prototype,o={},p=document;m.map=function(a,b){var c,d,e=[];if(m.isObject(a))for(d in a)c=b(a[d],d),null!==c&&e.push(c);else n.forEach.call(a,function(a,d){c=b(a,d),null!==c&&e.push(c)});return e.length>0?n.concat.apply([],e):e},m.each=function(a,b,c){var d,e,f;if(!a)return a;if(a.forEach===n.forEach)a.forEach(b,c);else if(m.isArray(a)){for(e=0,f=a.length;f>e;e++)if(b.call(c,a[e],e,a)===!1)return}else for(d=Object.keys(a),e=0,f=d.length;f>e;e++)if(b.call(c,a[d[e]],d[e],a)===!1)return;return a},m.mix=b,m.makeArray=function(a){if(null==a)return[];if(m.isArray(a))return a;var b=typeof a.length,c=typeof a;if("number"!==b||a.alert||"string"===c||"function"===c&&!("item"in a&&"number"===b))return[a];for(var d=[],e=0,f=a.length;f>e;e++)d[e]=a[e];return d},m.augment=function(a,b,c){return b instanceof Function&&m.mix(a.prototype,b.prototype),b instanceof Object&&m.mix(a.prototype,b),c instanceof Object&&m.mix(a.prototype,c),a},m.filter=function(a,b,c){return Array.prototype.filter.call(a,b,c||this)},m.clone=function(a,b){var c=a;if(!a)return c;var d=a.constructor;if(m.inArray(d,[Boolean,String,Number,Date,RegExp])?c=a.valueOf():m.isArray(a)?c=b?m.filter(a,b):a.concat():m.isPlainObject(a)&&(c={}),m.isArray(a))for(var e=0;e<c.length;e++)c[e]=m.clone(c[e],b);else if(m.isPlainObject(a))for(k in a)b&&b.call(a,a[k],k,a)===!1||(c[k]=m.clone(a[k],b));return c},m.ucfirst=function(a){return a+="",a.charAt(0).toUpperCase()+a.substring(1)},m.trim=function(a){return null==a?"":String.prototype.trim.call(a)},m.now=Date.now,m.reduce=function(a,b,c){var d=a.length;if("function"!=typeof b)throw new TypeError("callback is not function!");if(0===d&&2==arguments.length)throw new TypeError("arguments invalid");var e,f=0;if(arguments.length>=3)e=arguments[2];else do{if(f in a){e=a[f++];break}if(f+=1,f>=d)throw new TypeError}while(TRUE);for(;d>f;)f in a&&(e=b.call(void 0,e,a[f],f,a)),f++;return e},m.substitute=function(a,b,c){return"string"==typeof a&&b?a.replace(c||/\\?\{([^{}]+)\}/g,function(a,c){return"\\"===a.charAt(0)?a.slice(1):void 0===b[c]?"":b[c]}):a},m.indexOf=function(a,b){return Array.prototype.indexOf.call(b,a)},m.inArray=function(a,b){return m.indexOf(a,b)>-1},m.merge=function(){var a=n.slice.call(arguments,0);return b.apply(null,[{}].concat(a))},m.extend=function(a,b,c,d){var e,f=b.prototype;return f.constructor=b,e=Object.create(f),e.constructor=a,a.prototype=m.mix(e,a.prototype),a.superclass=f,c&&m.mix(e,c),d&&m.mix(a,d),a},m.type=function(a){return null==a?String(a):o[{}.toString.call(a)]||"object"},m.unique=function(a){return n.filter.call(a,function(b,c){return a.indexOf(b)==c})},m.isWindow=function(a){return a&&a==a.window},m.isPlainObject=function(a){return m.isObject(a)&&!m.isWindow(a)&&Object.getPrototypeOf(a)==Object.prototype},["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"].forEach(function(a){var b=a.toLowerCase();o["[object "+a+"]"]=b,m["is"+a]=function(a){return m.type(a)===b}}),m.isUndefined=function(a){return void 0===a},m.isNull=function(a){return null===a},m.isArray=Array.isArray||m.isArray,m.startsWith=function(a,b){return 0===a.lastIndexOf(b,0)},m.endsWith=function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c};var q=0;m.guid=function(a){return(a||"")+q++},m.ready=function(a){return/complete|loaded|interactive/.test(p.readyState)&&p.body?a(m):p.addEventListener("DOMContentLoaded",function(){a(m)},!1),this},function(a,b){function c(a,b,c){function d(){}var e=[].slice,f=e.call(arguments,3),g=function(){var g=e.call(arguments);return b.apply(this instanceof d?this:c||this,a?g.concat(f):f.concat(g))};return d.prototype=b.prototype,g.prototype=new d,g}a.mix(a,{noop:function(){},bind:c(0,c,null,0),rbind:c(0,c,null,1)})}(m);var r=+navigator.userAgent.replace(/.*Web[kK]it[\/]{0,1}(\d+)\..*/,"$1"),s=!r||536>r,t=0,u={},v=0,w={},x=p.getElementsByTagName("head")[0]||p.documentElement,y=function(a,b,c){function d(){var a=n.readyState;a&&"loaded"!==a&&"complete"!==a||(n.onreadystatechange=n.onload=null,q(0))}var e,g,h,i,j,k=b,l=0;if(m.endsWith(a.toLowerCase(),".css")&&(l=1),m.isObject(k)&&(b=k.success,e=k.error,g=k.timeout,c=k.charset,h=k.attrs),i=w[a]=w[a]||[],i.push([b,e]),i.length>1)return i.node;var n=p.createElement(l?"link":"script"),o=function(){j&&(clearTimeout(j),j=void 0)};h&&m.each(h,function(a,b){n.setAttribute(b,a)}),c&&(n.charset=c),l?(n.href=a,n.rel="stylesheet"):(n.src=a,n.async=!0),i.node=n;var q=function(b){var c,d=b;o(),m.each(w[a],function(a){(c=a[d])&&c.call(n)}),delete w[a]},r="onload"in n,t=m.Config.forceCssPoll||s;return l&&t&&r&&(r=!1),r?(n.onload=d,n.onerror=function(){n.onerror=null,q(1)}):l?f(n,function(){q(0)}):n.onreadystatechange=d,g&&(j=setTimeout(function(){q(1)},1e3*g)),l?x.appendChild(n):x.insertBefore(n,x.firstChild),n};b(m,{getScript:y});var z={},A={debug:!1,fns:z};m.Config=A,m.config=function(a,b){var c,d,e,f=this,g=m.Config,h=g.fns;return m.isObject(a)?m.each(a,function(a,b){e=h[b],e?e.call(f,a):g[b]=a}):(c=h[a],void 0===b?d=c?c.call(f):g[a]:c?d=c.call(f,b):g[a]=b),d},m.config("mini",!0);var B={},C=m.isString,D=m.isFunction,E=/[^?#]*\//,F=/\/\.\//g,G=/\/[^\/]+\/\.\.\//,H=/([^:\/])\/\//g;m.add=function(a,b,c){return C(a)&&(a=i(a),B[a]={factory:b,requires:c&&c.requires}),m},m.require=function(a,b){var c;return C(a)&&(a=i(a,b),c=B[a])?(c.exports||(c.exports=D(c.factory)?c.requires?j(c.factory,c.requires,a):l(c.factory):c.factory),c.exports):void 0},m.use=function(a,b){return m.isObject(b)&&(b=b.success),C(a)&&(a=a.replace(/\s+/g,"").split(",")),j(b,a),m},m.log=function(a,b,c){var d=console;b=b&&d[b]?b:"log",d[b](c?c+": "+a:a)},m.error=function(a){if(m.config("debug"))throw a instanceof Error?a:new Error(a)},a.KISSY=m}(this),function(a){function b(a,b){for(var c,d=0,e=a.length-1,f=[];e>=0;e--)c=a[e],"."!==c&&(".."===c?d++:d?d--:f[f.length]=c);if(b)for(;d--;d)f[f.length]="..";return f=f.reverse()}function c(a){var b=a.match(sa);return b?b[0]:"."}function d(a){return a.replace(/\.[^\/]+$/,"")}function e(a){for(a=a.replace(ta,"/");a.match(ua);)a=a.replace(ua,"/");return a=a.replace(va,"$1/")}function f(a,c){var d,e,f,g="",h=arguments,i=0;for(e=h.length-1;e>=0&&!i;e--)f=h[e],X(f)&&f&&(g=f+"/"+g,i="/"===ga(f,0));return d=b(na(ha(g,"/"),function(a){return!!a}),!i).join("/"),(i?"/":"")+d||"."}function g(a,b){a=e(a),b=e(b);var c,d,f=na(ha(a,"/"),function(a){return!!a}),g=[],h=na(ha(b,"/"),function(a){return!!a}),i=Math.min(f.length,h.length);for(c=0;i>c&&f[c]===h[c];c++);for(d=c;c<f.length;)g.push(".."),c++;return g=g.concat(fa(h,d)),g=g.join("/")}function h(a,b){var d,f,g;return firstC=ga(a,0),f=b?c(b):ya,wa.test(a)?d=a:"."===firstC?d=e(f+a):"/"===firstC?(g=f.match(xa),d=g?g[0]+da(a,1):a):d=f+a,Z(d,"//")&&(d=ca+d),d}function i(a,b,c){return a+(ea(a,"?")>-1?"&":"?")+b+"="+c}function j(a){if(X(a))return k(a);for(var b=[],c=0,d=a.length;d>c;c++)b[c]=k(a[c]);return b}function k(a){return"/"===ga(a,a.length-1)&&(a+="index"),$(a,".js")&&(a=fa(a,0,-3)),a}function l(a,b){var c=ea(b,"!");if(-1!==c){var d=da(b,0,c);b=da(b,c+1),O.use(d,{sync:!0,success:function(c,e){e.alias&&(b=e.alias(a,b,d))}})}return b}function m(a,b){var d,g=0;if(!b)return b;if(X(b))return Z(b,"../")||Z(b,"./")?f(c(a),b):e(b);for(d=b.length;d>g;g++)b[g]=m(a,b[g]);return b}function n(a,b){U(b,function(b){o(a,b)})}function o(a,b,c){b=k(b);var d=a.Env.mods,e=d[b];return e?e:(d[b]=e=new G(S({name:b,runtime:a},c)),e)}function p(a,b){var c,d,e,f,g=[a],h=a.Env.mods;return U(b,function(b){c=h[b],c&&"css"===c.getType()?g.push(void 0):(d=x(a,b),e=ma(d,function(a,b){return f=h[b],a&&f&&f.status>=Fa},!0),g.push(e?h[d[0]].exports:null))}),g}function q(a,b){var c,d=a.length;for(c=0;d>c;c++)t(a[c],b)}function r(a,b,c,d,e){c=c||[],e=e||{};var f,g=1,h=a.length,i=c.length;for(f=0;h>f;f++)g=g&&s(a[f],b,c,d,e),c.length=i;return!!g}function s(a,b,c,d,e){var f,g=b.Env.mods,h=g[a];return a in e?e[a]:h?(f=h.status,f===Aa?(d.push(h),e[a]=ra,ra):f>=Ea?(e[a]=qa,qa):f!==Da?(e[a]=ra,ra):ea(c,a)>-1?(e[a]=qa,qa):(c.push(a),r(h.getNormalizedRequires(),b,c,d,e)?(h.status=Ea,e[a]=qa,qa):(e[a]=ra,ra))):(e[a]=ra,ra)}function t(a,b){var c,d=b.Env.mods,e=d[a];c=e.status,c>=Fa||(e.status=Fa,e.cjs?u(b,e):(q(e.getNormalizedRequires(),b),u(b,e)))}function u(a,b){var c,d=b.factory;if(Y(d)){var e;b.requires&&b.requires.length&&(e=function(){return b.require.apply(b,arguments)}),c=d.apply(b,b.cjs?[a,e,b.exports,b]:p(a,b.getRequiresWithAlias())),void 0!==c&&(b.exports=c)}else b.exports=d;b.status=Ga}function v(a){return X(a)&&(a=ha(ia(a,/\s+/g,""),",")),a}function w(a,b,c){return x(a,y(a,b,c))}function x(a,b){for(var c,d,e,f,g=[].concat(b),h=0;!h;)for(h=1,c=g.length-1;c>=0;c--)if((d=o(a,g[c]))&&void 0!==(e=d.getAlias())){for(h=0,"string"==typeof e&&(e=[e]),f=e.length-1;f>=0;f--)e[f]||e.splice(f,1);g.splice.apply(g,[c,1].concat(j(e)))}return g}function y(a,b,c){var d,e,f=[];if(b)for(d=0,e=b.length;e>d;d++)b[d]&&f.push(l(a,j(b[d])));return c&&(f=m(c,f)),f}function z(a,b,c,d){b=k(b);var e=a.Env.mods,f=e[b];f&&void 0!==f.factory||(o(a,b),f=e[b],S(f,{name:b,status:Da,factory:c}),S(f,d))}function A(a){var b,c=5381;for(b=a.length;--b>-1;)c=(c<<5)+c+a.charCodeAt(b);return c+""}function B(a){var b=[];return a.toString().replace(Ha,"").replace(Ia,function(a,c){b.push(C(c))}),b}function C(a){var b=a.match(/^\s*["']([^'"\s]+)["']\s*$/);return b?b[1]:""}function D(a,b){return b in a?a[b]:a.runtime.Config[b]}function E(a){S(this,a)}function F(a,b){var c,d=a.Config.packages||{},e=b+"/",f="";for(c in d)Z(e,c+"/")&&c.length>f.length&&(f=c);return d[f]||Ja}function G(a){this.exports={},this.status=Ba,this.name=void 0,this.factory=void 0,this.cjs=1,S(this,a),this.waitedCallbacks=[]}function H(a){return a=ia(a,/\\/g,"/"),"/"!==ga(a,a.length-1)&&(a+="/"),h(a)}function I(a,b,c,d,e){function f(){--g||c(i,h)}var g=b&&b.length,h=[],i=[];U(b,function(b){var c,g={timeout:e,success:function(){i.push(b),c&&La&&(z(a,c.name,La.factory,La.config),La=void 0),f()},error:function(){h.push(b),f()},charset:d};b.combine||(c=b.mods[0],"css"===c.getType()&&(c=void 0)),_(b.path,g)})}function J(a,b){this.runtime=a,this.waitingModules=b}function K(a,b){if(!a&&Y(b)&&b.length>1){var c=B(b);c.length&&(a=a||{},a.requires=c)}else a&&a.requires&&!a.cjs&&(a.cjs=0);return a}function L(a){this.fn=a,this.waitMods={},this.waitModsNum=0}function M(){if(M.miniSrc)return M.miniSrc;for(var a=aa.scripts,b=a.length,c=/(mini|mini-full|mini-all)(?:-min)?\.js/i,d=b?a[b-1].src:"";b-->0;)if(c.test(a[b].src)){d=a[b].src;break}return M.miniSrc=d}function N(){var a=M()||aa.URL;try{a=a.match(/.*(mini|mini-full|mini-all)(?:-min)?\.js/i)[0].replace(/(\?\?.*,|\?\?)/,"")}catch(b){}return a.match(/[^?#]*\//)[0]}var O=a.KISSY,P=O.Env,Q=O.Config,R=O.config,S=(O.log,O.mix),T=O.map,U=O.each,V=O.isObject,W=O.isArray,X=O.isString,Y=O.isFunction,Z=O.startsWith,$=O.endsWith,_=O.getScript,aa=a.document,ba=(a.navigator.userAgent,a.location),ca=(ba.href,ba.protocol),da=function(a,b,c){return a.substring(b,c)},ea=function(a,b,c){return a.indexOf(b,c)},fa=function(a,b,c){return a.slice(b,c)},ga=function(a,b){return a.charAt(b)},ha=function(a,b){return a.split(b)},ia=function(a,b,c){return a.replace(b,c)},ja=function(a){return a.toLowerCase()},ka=Date.now,la=Object.keys,ma=function(a,b,c){return a.reduce(b,c)},na=function(a,b){return a.filter(b)},ea=function(a,b){return a.indexOf(b)},oa=function(a){setTimeout(a,0)},pa=function(){},qa=!0,ra=!1,sa=/[^?#]*\//,ta=/\/\.\//g,ua=/\/[^\/]+\/\.\.\//,va=/([^:\/])\/\//g,wa=/^\/\/.|:\//,xa=/^.*?\/\/.*?\//,ya=c(aa.URL),za=(function(){var a=M();return a?c(a):ya}(),O.Loader={}),Aa=-1,Ba=0,Ca=1,Da=2,Ea=3,Fa=4,Ga=5;za.Status={ERROR:Aa,INIT:Ba,LOADING:Ca,LOADED:Da,READY_TO_ATTACH:Ea,ATTACHING:Fa,ATTACHED:Ga};var Ha=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,Ia=/[^.'"]\s*require\s*\(([^)]+)\)/g;E.prototype={constructor:E,reset:function(a){S(this,a)},getTag:function(){return D(this,"tag")},getName:function(){return this.name},getPath:function(){return this.path||(this.path=this.getUri())},getUri:function(){return this.uri},isDebug:function(){return D(this,"debug")},getCharset:function(){return D(this,"charset")},isCombine:function(){return D(this,"combine")},getGroup:function(){return D(this,"group")}},za.Package=E;var Ja=new E({name:"",runtime:O});Ja.getUri=function(){return this.runtime.Config.baseUri},G.prototype={kissy:1,constructor:G,use:function(a,b){return a=v(a),O.use(m(this.name,a),b)},resolve:function(a){return h(a,this.getUri())},resolveByName:function(a){return m(this.name,a)},require:function(a){return O.require(a,this.name)},wait:function(a){this.waitedCallbacks.push(a)},notifyAll:function(){for(var a,b=this.waitedCallbacks.length,c=0;b>c;c++){a=this.waitedCallbacks[c];try{a(this)}catch(d){setTimeout(function(){throw d},0)}}this.waitedCallbacks=[]},getType:function(){var a=this.type;return a||(a=$(ja(this.name),".css")?"css":"js",this.type=a),a},getAlias:function(){var a,b,c=this.name,d=this.alias;return"alias"in this||(b=this.getPackage(),b.alias&&(d=b.alias(c)),!d&&(a=this.runtime.Config.alias)&&(d=a(c))),d},getUri:function(){var a;if(!this.uri){if(this.path)a=this.path;else{var b,c=this.name,e=this.getPackage(),f=e.getUri(),j=e.getName(),k="."+this.getType(),l=this.getTag(),m="-min";e.isDebug()&&(m=""),b=d(c)+m+k,j&&(b=g(j,b)),a=h(b,f),l&&(a=i(a,"t",l+k))}this.uri=a}return this.uri},getPath:function(){return this.path||(this.path=this.getUri())},getName:function(){return this.name},getPackage:function(){return this.packageInfo||(this.packageInfo=F(this.runtime,this.name))},getTag:function(){return this.tag||this.getPackage().getTag()},getCharset:function(){return this.charset||this.getPackage().getCharset()},getRequiresWithAlias:function(){var a=this.requiresWithAlias,b=this.requires;return b&&b.length?(a||(this.requiresWithAlias=a=y(this.runtime,b,this.name)),a):b||[]},getRequiredMods:function(){var a=this.runtime;return T(this.getNormalizedRequires(),function(b){return o(a,b)})},getNormalizedRequires:function(){var a,b=this.normalizedRequiresStatus,c=this.status,d=this.requires;return d&&d.length?(a=this.normalizedRequires)&&b===c?a:(this.normalizedRequiresStatus=c,this.normalizedRequires=w(this.runtime,d,this.name),this.normalizedRequires):d||[]}},za.Module=G;var Ka=["alias","debug","tag","group","combine","charset"];S(Q.fns,{packages:function(a){var b,c=this.Config,d=c.packages=c.packages||{};return a?void U(a,function(a,c){b=a.name||c;var e=a.base||a.path,f={runtime:O,name:b};U(Ka,function(b){b in a&&(f[b]=a[b])}),e&&($(e,"/")||(e+="/"),a.ignorePackageNameInUri||(e+=b+"/"),f.uri=H(e)),d[b]?d[b].reset(f):d[b]=new E(f)}):a===!1?void(c.packages={}):d},modules:function(a){var b=this;a&&U(a,function(a,c){var d=o(b,c,a);d.status===Ba&&S(d,a)})},base:function(a){return a?void(Q.baseUri=H(a)):Q.baseUri}});var La,Ma=ka();J.groupTag=Ma,J.add=function(a,b,c,d,e){if(3===e&&W(b)){var f=b;b=c,c={requires:f,cjs:1}}Y(a)||1===e?(c=b,b=a,c=K(c,b),La={factory:b,config:c}):(La=void 0,c=K(c,b),z(d,a,b,c))},J.prototype={use:function(a){var b,c,d=this,e=Q.timeout,f=d.runtime;b=la(d.calculate(a)),n(f,b),c=d.getComboUrls(b),U(c.css,function(a){I(f,a,function(a,b){U(a,function(a){U(a.mods,function(a){z(f,a.name,pa),a.notifyAll()})}),U(b,function(a){U(a.mods,function(a){a.status=Aa,a.notifyAll()})})},a.charset,e)}),U(c.js,function(a){I(f,a,function(b){U(a,function(a){U(a.mods,function(a){a.factory||(a.status=Aa),a.notifyAll()})})},a.charset,e)})},calculate:function(a,b,c){var d,e,f,g,h=this,i=h.waitingModules,j=h.runtime;for(c=c||{},b=b||{},d=0;d<a.length;d++)e=a[d],b[e]||(b[e]=1,f=o(j,e),g=f.status,g>=Ea||(g!==Da&&(i.contains(e)||(g!==Ca&&(f.status=Ca,c[e]=1),f.wait(function(a){i.remove(a.name),i.notifyAll()}),i.add(e))),h.calculate(f.getNormalizedRequires(),b,c)));return c},getComboMods:function(a,b){var c,d,e,f,g,h,i,j,k,l,m={},n=this.runtime;return U(a,function(a){d=o(n,a),f=d.getType(),e=d.getPackage(),l=e.name,j=e.getCharset(),i=e.getTag(),c=e.getUri(),k=l,d.canBeCombined=e.isCombine(),b[l]=c,g=m[f]=m[f]||{},(h=g[k])?(1!==h.tags.length||h.tags[0]!==i)&&h.tags.push(i):(h=g[k]=[],h.charset=j,h.tags=[i]),h.push(d)}),m},getComboUrls:function(a){var b=this.runtime,c=b.Config,d=c.comboPrefix,e=c.comboSep,f=c.comboMaxFileNum,g=c.comboMaxUrlLength,h={},i=this.getComboMods(a,h),j={};for(var k in i){j[k]={};for(var l in i[k]){var m=[],n=[],o=i[k][l],p=o.tags,q=p.length>1?A(p.join("")):p[0],r=q?"?t="+encodeURIComponent(q)+"."+k:"",s=r.length,t=h[l].toString(),u=t.length,v=t+d,w=j[k][l]=[],x=v.length;w.charset=o.charset,w.mods=[];for(var y=function(){w.push({combine:1,path:v+m.join(e)+r,mods:n})},z=0;z<o.length;z++){var B=o[z];w.mods.push(B);var C=B.getPath();if(B.canBeCombined){var D=C.slice(u).replace(/\?.*$/,"");m.push(D),n.push(B),(m.length>f||x+m.join(e).length+s>g)&&(m.pop(),n.pop(),y(),m=[],n=[],z--)}else w.push({combine:0,path:C,mods:[B]})}m.length&&y()}}return j}},za.ComboLoader=J,L.prototype={constructor:L,notifyAll:function(){var a=this.fn;a&&!this.waitModsNum&&(this.fn=null,a())},add:function(a){this.waitMods[a]=1,this.waitModsNum++},remove:function(a){delete this.waitMods[a],this.waitModsNum--},contains:function(a){return this.waitMods[a]}},za.WaitingModules=L,S(O,{add:function(a,b,c){J.add(a,b,c,O,arguments.length)},use:function(a,b){function c(){++i;{var a,k=[];ka()}a=r(d,O,void 0,k),a?(q(d,O),b&&(g?h():oa(h))):k.length?f&&(g?f.apply(O,k):oa(function(){f.apply(O,k)})):(j.fn=c,e.use(d))}var d,e,f,g,h,i=0,j=new L(c);return V(b)&&(g=b.sync,f=b.error,b=b.success),h=function(){b.apply(O,p(O,a))},a=v(a),a=y(O,a),d=x(O,a),e=new J(O,j),g?j.notifyAll():oa(function(){j.notifyAll()}),O},require:function(a,b){if(a){var c=x(O,y(O,[a],b));return q(c,O),p(O,c)[1]}}}),P.mods={},R({debug:!1,base:N(),comboPrefix:"??",comboSep:",",charset:"utf-8",lang:"zh-cn",comboMaxUrlLength:2e3,comboMaxFileNum:40}),function(){var a=KISSY,b=/http(s)?/.test(location.protocol)?"":"http:";a.config({base:b+"//g.alicdn.com/kissy/k/1.4.5",packages:[{name:"gallery",path:b+"//g.alicdn.com/kg/",charset:"utf-8",ignorePackageNameInUri:!0},{name:"m",path:N(),charset:"utf-8",ignorePackageNameInUri:!0}],modules:{core:{alias:["m/anim","m/touch","m/lang","m/base","m/ua","m/uri","m/juicer","m/form"]},anim:{alias:["m/anim"]},touch:{alias:["m/touch"]},lang:{alias:["m/lang"]},base:{alias:["m/base"]},ua:{alias:["m/ua"]},uri:{alias:["m/uri"]},form:{alias:["m/form"]},juicer:{alias:["m/juicer"]}}})}()}(this),function(a,b){function c(a,b){for(var c in b)a[c]=b[c]}function d(a,b){var c,d=[];return a&&O.call(a,function(a,e){c=b(a,e),null!==c&&d.push(c)}),d.length?M.apply([],d):d}function e(a,b){return a&&O.call(a,b),a}function f(a){return a&&a==a.window}function g(a){return a&&9===a.nodeType}function h(a){return a&&1===a.nodeType}function i(a){return a&&"number"==typeof a.length}function j(a){return L.call(a,function(b,c){return a.indexOf(b)==c})}function k(a){var b=F.createElement("script"),c=F.getElementsByTagName("head")[0]||G;b.src=a,c.insertBefore(b,c.firstChild)}function l(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function m(a,b){return 1===b.length?n(a,b[0]):j(d(b,function(b){return n(a,b)}))}function n(a,b){var c,d=a.charAt(0),e="#"===d,f="."===d,i=e||f?a.slice(1):a,j=/^[\w-]*$/.test(i);return b=void 0===b?document:b,W(g(b)||h(b)?g(b)&&e&&j?(c=b.getElementById(i))?[c]:[]:K.call(!e&&j?f?b.getElementsByClassName(i):b.getElementsByTagName(a):b.querySelectorAll(a)):[])}function o(a,b){if(!a||!b||!h(a))return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!!e;return f||(e=X,e.appendChild(a)),d=~n(b,e).indexOf(a),!f&&e.removeChild(a),d}function p(a){return a in Y?Y[a]:Y[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function q(a,b){return void 0===b?a.className:void(a.className=b)}function r(a){return a.split(/[\.\s]\s*\.?/)}function s(a,b){return d(a,function(a){return a[b]})}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function u(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function v(a){return a.replace(/-+(.)?/g,function(){return arguments[1].toUpperCase()})}function w(a,b){return P(b)&&!aa[u(a)]?b+"px":b}function x(a,b){return E.getComputedStyle(a,null).getPropertyValue(b)}function y(a){if(!ba[a]){var b,c=F.createElement(a);F.body.appendChild(c),b=x(c,"display"),c.parentNode.removeChild(c),"none"==b&&(b="block"),ba[a]=b}return ba[a]}function z(a,b){var c=W(a);return void 0!==b?c.filter(S(b)?function(a){return I.call(b,function(b){return o(a,b)})}:b):c}function A(a){return"children"in a?K.call(a.children):d(a.childNodes,function(a){return h(a)?a:void 0})}function B(a,b,c,d){var e=[],f=S(b);for(a=d?a:a[c];a;)a&&!g(a)&&h(a)&&e.indexOf(a)<0&&e.push(a),a=a[c];return f&&!b.length&&(b=void 0),e=z(e,b),f?e:e.item(0)}function C(a,b){var c=[];return e(a,function(a){var d=a.nodeName,f=a.type,g=[];!d||"SCRIPT"!==d||f&&"text/javascript"!==f?(h(a)&&(e(a.getElementsByTagName("script"),function(a){g.push(a)}),C(g,b)),c.push(a)):(a.parentNode&&a.parentNode.removeChild(a),b&&b.push(a))}),c}function D(a){var b=null;return a&&i(a)&&(b=F.createDocumentFragment(),e(a,function(a){b.appendChild(a)})),b}var E=window,F=document,G=F.documentElement,H=[],I=H.some,J=H.every,K=H.slice,L=H.filter,M=H.concat,N=H.indexOf,O=H.forEach,P=l("Number"),Q=l("String"),R=l("Object"),S=Array.isArray||l("Array"),T=l("Function"),U=function(a){return R(a)&&!f(a)&&Object.getPrototypeOf(a)==Object.prototype},V={};c(V,{indexOf:function(a){return i(a)?N.call(this,a[0]):N.apply(this,arguments)},each:function(a){return J.call(this,function(b,c){return b=W(b),a.call(b,b,c)!==!1}),this},slice:function(){return W(K.apply(this,arguments))},end:function(){return this.__parent||this},getDOMNode:function(){return this[0]}});var W=function(a,b){var c=[];if(a)if(Q(a))a=a.trim(),c="<"==a[0]&&/<([\w:]+)/.test(a)?V.create(a):void 0!==b?m(a,W(b)):n(a,F);else{if(W.isNode(a))return a;a.nodeType||a.setTimeout?c=[a]:S(a)?(c=[],e(a,function(a){c.push(W.isNode(a)?a[0]:a)})):a.nodeType||a.setTimeout||!a.item||(c=K.call(a))}return W.node(c)};W.all=function(a,b){return W(a,b)},W.one=function(a,b){return W(a,b).item(0)},W.node=function(a){return a=a||[],a.__proto__=V,a},W.node.prototype=V,W.isNode=function(a){return a instanceof W.node};var X=document.createElement("div");c(b,{query:n}),c(V,{all:function(a){var b,c=this;return b=W(m(a,c)),b.__parent=c,b},one:function(a){var b,c=this;return b=c.all(a),b=b.length?b.slice(0,1):null,b&&(b.__parent=c),b},filter:function(a){return W(T(a)?L.call(this,function(b){return a.call(b,b)}):L.call(this,function(b){return o(b,a)}))}});var Y={};c(V,{addClass:function(a){return a?e(this,function(b){var c=W(b),d=q(b),f=[];e(r(a),function(a){!c.hasClass(a)&&f.push(a)}),f.length&&q(b,d+(d?" ":"")+f.join(" "))}):this},removeClass:function(a){return e(this,function(b){if(void 0===a)return q(b,"");var c=q(b);e(r(a),function(a){c=c.replace(p(a)," ")}),q(b,c.trim())})},toggleClass:function(a,b){return a?e(this,function(c){var d=W(c);e(r(a),function(a){(void 0===b?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},hasClass:function(a){return a?I.call(this,function(a){return J.call(this,function(b){return b?p(b).test(q(a)):!0})},r(a)):!1}});var Z=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,$=["val","css","html","text","data","width","height","offset"],_={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};c(V,{attr:function(a,b){var c,d;if(U(a)){for(c in a)V.attr.call(this,c,a[c]);return this}if(~$.indexOf(a))return W(this)[a](b);if(void 0==b){var f=this[0];f&&h(f)&&(Z.test(a)?d=W(f).prop(a)?a.toLowerCase():void 0:"value"==a&&"INPUT"==f.nodeName?d=this.val():(d=f.getAttribute(a),d=!d&&a in f?f[a]:d))}else d=e(this,function(c){h(c)&&t(c,a,b)});return null===d?void 0:d},removeAttr:function(a){return e(this,function(b){h(b)&&t(b,a)})},hasAttr:function(a){return a?I.call(this,function(b){return h(b)&&b.getAttribute(a)}):!1},prop:function(a,b){return a=_[a]||a,void 0==b?this[0]&&this[0][a]:e(this,function(c){c[a]=b})},hasProp:function(a){return a?(a=_[a]||a,I.call(this,function(b){return h(b)&&b[a]})):!1},val:function(a){var b=this[0];if(!b)return this;if(b.multiple){var c=W("option",b);return void 0==a?K.call(s(c.filter(function(a){return a.selected}),"value")):e(c,function(b){b.selected=~a.indexOf(b.value)})}return void 0==a?b.value:e(this,function(b){b.value=a})},text:function(a){return void 0===a?this.length?this[0].textContent:null:e(this,function(b){b.textContent=void 0===a?"":""+a})}});var aa={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},ba={};c(V,{css:function(a,b){var c,d,f="";if(void 0==b){if(Q(a)){var g=this[0];return g?g.style[v(a)]||x(g,a):""}if(R(a))for(c in a)d=u(c),a[c]||0===a[c]?f+=d+":"+w(c,a[c])+";":e(this,function(a){a.style.removeProperty(d)})}else d=u(a),b||0===b?f=d+":"+w(a,b)+";":e(this,function(a){a.style.removeProperty(d)});return e(this,function(a){a.style.cssText+=";"+f})},show:function(){return e(this,function(a){"none"==a.style.display&&(a.style.display=""),"none"==x(a,"display")&&(a.style.display=y(a.nodeName))})},hide:function(){return this.css("display","none")},toggle:function(){return e(this,function(a){var b=W(a);"none"==b.css("display")?b.show():b.hide()})}}),e(["width","height"],function(a){V[a]=function(b){var c=this[0];return b?W(this).css(a,b):f(c)?c[v("inner-"+a)]:g(c)?G[v("scroll-"+a)]:this.offset()[a]}}),c(V,{item:function(a){var b=this;return P(a)?a>=b.length?null:W(b[a]):W(a)},first:function(a){return B(this[0]&&this[0].firstChild,a,"nextElementSibling",!0)},last:function(a){return B(this[0]&&this[0].lastChild,a,"previousElementSibling",!0)},next:function(a){return B(this[0],a,"nextElementSibling")},prev:function(a){return B(this[0],a,"previousElementSibling")},parent:function(a){return B(this[0],a,"parentNode")},children:function(a){var b=this[0];return b?z(A(b),a):this},siblings:function(a){var b=this[0];return b?z(L.call(A(b.parentNode),function(a){return a!==b}),a):this},contents:function(){var a=this[0];return a?W(K.call(a.childNodes)):this},contains:function(a){var b=this[0],a=i(a)?a[0]:a;return b&&a?b!==a&&b.contains(a):!1}}),c(V,{wrapAll:function(a){var b=this[0];if(b){var c,d=W(a);for(d.insertBefore(b);(c=d.children()).length;)d=d.first();d.append(this)}return this},wrap:function(a){var b=W(a),c=b[0].parentNode||this.length;return e(this,function(a){W(a).wrapAll(c?b[0].cloneNode(!0):b[0])})},unwrap:function(){return e(this,function(a){var b=W(a),c=b.parent();c.replaceWith(c.children())})},wrapInner:function(a){return e(this,function(b){var c=W(b),d=c.children();d.length?d.wrapAll(a):c.append(a)})},replaceWith:function(a){
return this.before(a).remove()}}),e(["after","prepend","before","append"],function(a,b){var c=b%2;V[a]=function(a){var d,f,g=W.isNode(a)?a:S(a)?W.all(a):V.create(a+""),h=this.length>1,i=[];return g.length?(g=D(C(g,i)),e(this,function(a){switch(d=c?a:a.parentNode,b){case 0:f=a.nextSibling;break;case 1:f=a.firstChild;break;case 2:f=a;break;default:f=null}d.insertBefore(h?g.cloneNode(!0):g,f),e(i,function(a){a.src?k(a.src):E.eval.call(E,a.innerHTML)})})):this},V[c?a+"To":"insert"+(b?"Before":"After")]=function(b){return W(b)[a](this),this}}),c(V,{offset:function(a){var b;if(this.length){if(void 0!==a)return e(this,function(b){var c,d,e={},f=W(b),g=f.offset();"static"===f.css("position")&&f.css("position","relative");for(c in a)d=parseFloat(f.css(c))||0,e[c]=d+a[c]-g[c];f.css(e)}),this;var c=this[0].getBoundingClientRect();b={left:c.left+E.pageXOffset,top:c.top+E.pageYOffset,width:Math.round(c.width),height:Math.round(c.height)}}return b}}),e(["scrollTop","scrollLeft"],function(a,b){V[a]=function(c){var d=this[0],f=a in d;return void 0===c?f?d[a]:d["page"+(b?"X":"Y")+"Offset"]:f?e(this,function(b){b[a]=c}):e(this,function(a){b?a.scrollTo(c,a.scrollY):a.scrollTo(a.scrollX,c)})}});var ca=/<([\w:]+)/,da=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,fa=F.createElement("div"),ga=F.createElement("table"),ha=F.createElement("tbody"),ia=F.createElement("tr"),ja={"*":fa,thead:ga,tbody:ga,tfoot:ga,tr:ha,th:ia,td:ia};c(V,{create:function(a,b){var c,d,f,g=[];if(!a||!Q(a))return g;if(ea.test(a)?g=W(F.createElement(RegExp.$1)):(a=a.replace(da,"<$1></$2>"),d=ca.test(a)&&RegExp.$1,f=ja[d]||ja["*"],f.innerHTML=a,g=e(K.call(f.childNodes),function(a){f.removeChild(a)})),U(b))for(c in b)g.attr(c,b[c]);return g},html:function(a,b){return void 0===a?this.length?this[0].innerHTML:null:e(this,function(c){W(c).empty().append(a,b)})},remove:function(){var a=this;return a.detach&&a.detach(),e(a,function(a){a.parentNode&&a.parentNode.removeChild(a)})},empty:function(){return e(this,function(a){a.innerHTML=""})},clone:function(a){return W(d(this,function(b){return b.cloneNode(!!a)}))}}),"__proto__"in{}||c(W,{node:function(a){return a=a||[],c(a,V),a.__node=!0,a},isNode:function(a){return S(a)&&"__node"in a}}),c(b,{node:V,Node:W,NodeList:W,one:W.one,all:W.all}),b.add&&b.add("node",function(a){return W})}(this,KISSY),function(a){function b(a){return function(){return a}}function c(a){return a._eid||(a._eid=r++)}function d(a){var b=a.split(".");return{e:b[0],ns:b.slice(1).join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |S)")}function f(a,b,f,g,h){var i=d(b);if(i.ns)var j=e(i.ns);return(w[c(a)]||[]).filter(function(a){return!(!a||i.e&&a.e!=i.e||i.ns&&!j.test(a.ns)||f&&a.fn!==f||g&&a.sel!=g||h&&a.scope!==h)})}function g(a,b){return a.del&&!x&&a.e in y||!!b}function h(a){return x&&focusEvnet[a]||a}function i(a){var b,c={originalEvent:a};for(b in a)void 0!==a[b]&&(c[b]=a[b]);return j(c,a)}function j(a,c){return(c||!a.isDefaultPrevented)&&(c||(c=a),u(A,function(d,e){var f=c[e];a[e]=function(){return this[d]=b(!0),f&&f.apply(c,arguments)},a[d]=b(!1)}),a.halt=function(){this.preventDefault(),this.stopPropagation()},(void 0!==c.defaultPrevented?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(a.isDefaultPrevented=b(!0))),a}function k(a,b){var c=document.createEvent(z[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}function l(b,e,f,i,k,l){var m=c(b),n=w[m]||(w[m]=[]);return"ready"==e?a.ready(f):void e.split(/\s/).map(function(c){var e=d(c);e.fn=f,e.sel=i,e.del=k,e.scope=l;var m=k||f;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped||!a.isImmediatePropagationStopped()){var c=m.apply(l||b,void 0==a._args?[a]:[a].concat(a._args));return c===!1&&(a.preventDefault(),a.stopPropagation()),c}},e.i=n.length,n.push(e),b.addEventListener(h(e.e),e.proxy,g(e)),"undefined"!=typeof c&&c in a.Event.Special&&a.Event.Special[c].setup.apply(a.one(b,[e.scope]))})}function m(b,d,e,i,j){var k=c(b),l=function(c){c.map(function(c){delete w[k][c.i],b.removeEventListener(h(c.e),c.proxy,g(c)),"undefined"!=typeof event&&event in a.Event.Special&&a.Event.Special[event].teardown.apply(a.one(b))})};d?d.split(/\s/).map(function(a){l(f(b,a,e,i,j))}):l(w[k]||[])}function n(a){var b={};return t(b,a),b.__proto__=a.__proto__,b}function o(a){return a.split(" ")}a.Event||(a.Event={});var p=a.all,q=a.node,r=1,s=function(a){return"function"==typeof a},t=function(a,b){for(var c in b)a[c]=b[c]},u=function(a,b,c){Object.keys(a).map(function(d){b.call(c,a[d],d,a)})},v=[].slice,w=[],x="onfocusin"in window,y={focus:"focusin",blur:"focusout"},z={click:"MouseEvent"},A={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.Event.createProxy=i,q.on=function(a,b,c,d){var e,f=this;return s(b)&&(d=c,c=b,b=void 0),c===!1&&(c=returnFalse),f.each(function(f){b&&(e=function(a){var e,g,h=f.all(b);if(h&&h.length)return g=h.filter(function(b){return b==a.target||p(b).contains(a.target)})[0],g&&g!==f[0]?(e=i(a),e.currentTarget=g,e.liveFired=f[0],c.apply(d||g,[e].concat(v.call(arguments,1)))):void 0}),l(f[0],a,c,b,e,d)}),f},q.detach=function(a,b,c,d){var e=this;return s(b)&&(d=c,c=b,b=void 0),e.each(function(e){m(e[0],a,c,b,d)}),e},q.delegate=function(a,b,c,d){return this.on(a,b,c,d)},q.undelegate=function(a,b,c,d){return this.detach(a,b,c,d)},q.fire=function(a,b){var c=this;return a.split(/\s/).map(function(d){d=k(d,b),c.each(function(c){"dispatchEvent"in c[0]?c[0].dispatchEvent(d):c.fireHandler(a,b)})}),c},q.fireHandler=function(a,b){var c,d,e=this;return a.split(/\s/).map(function(a){e.each(function(e){c=k(a),c.target=e[0],null===c.target&&(c=n(c)),t(c,b),f(e[0],a).map(function(a,b){return d=a.proxy(c),c.isImmediatePropagationStopped&&c.isImmediatePropagationStopped()?!1:void 0})})}),e},a.Event||(a.Event={}),a.Event.Target={_L:{},on:function(a,b,c){var d=o(a),e=this;return d.map(function(d){var f=d in e._L?e._L[d]:e._L[d]=[];f.push({E:a,F:b,S:c})}),e},fire:function(b,c){var d=o(b),e=this;return d.map(function(b){var d=e._L[b],f=a.mix(c||{},{target:e,currentTarget:e});d&&d.map(function(a){a.F.apply(a.S||e,[f].concat([].slice.call(arguments,2)))})}),e},detach:function(a,b,c){var d=o(a),e=this;return d.map(function(a){var d,f=e._L[a];if(f&&(b||!(e._L[a]=[])))for(var g=0;g<f.length;g++)d=f[g],d.F!=b||d.S!=c?d.F!=b||f.splice(g,1):f.splice(g,1)}),e}},a.Event.Special={},a.add("event",function(a){return a.Event})}(KISSY),!function(a){function b(){if(A.length>2){for(var a=[],b=1;b<A.length;b++)a[b-1]=A[b];A=a}}function c(){if(b(),0==A.length)return!1;var a=z.startTime-A[A.length-1].startTime;return 10>a?!0:!1}function d(){if(b(),1==A.length)return!1;var a=A[0].endEvent.target==A[1].endEvent.target,c=A[1].startTime-A[0].startTime;return a&&o>c?!0:!1}function e(){x&&(clearTimeout(x),x=null)}function f(){y&&(clearTimeout(y),y=null)}function g(b){if(b.touches&&b.touches.length>1)return z=null,void f();var c=b.target,d=b.changedTouches?b.changedTouches[0]:b,g=d.pageX,h=d.pageY;z={startX:g,startY:h,startEvent:b,startTime:(new Date).getTime()},e(),x=setTimeout(function(){if(e(),z){var d=a.merge(b,{type:"tapHold",pageX:g,pageY:h,originalEvent:b,timeStamp:(new Date).getTime()});a.one(c).fire("tapHold",d)}},n)}function h(a){if(z&&x){var b=(a.target,a.changedTouches?a.changedTouches[0]:a),c=b.pageX,d=b.pageY,f=Math.abs(c-z.startX),g=Math.abs(d-z.startY),h=Math.sqrt(f*f+g*g);h>m&&e()}}function i(d){if(e(),!z)return void f();var g=(d.target,d.changedTouches?d.changedTouches[0]:d),h=g.pageX,i=g.pageY,j=(new Date).getTime(),n=Math.abs(h-z.startX),o=Math.abs(i-z.startY);return a.mix(z,{endX:h,endY:i,deltaX:n,deltaY:o,endTime:j,endEvent:d,distance:Math.sqrt(n*n+o*o),timeSpan:j-z.startTime}),z.timeSpan>l||z.distance>m?(z=null,void f()):c(z)?void f():(A.push(z),b(),void k(d,{type:"tap",pageX:h,pageY:i,clientX:g.clientX,clientY:g.clientY,timeStamp:(new Date).getTime(),originalEvent:d}))}function j(a){z=null,b(),f(),e()}function k(b,c){var e=a.one(b.target);eProxy=a.merge(b,c||{}),eProxy.preventDefault=function(){try{this.constructor.prototype.preventDefault.call(this),b.preventDefault()}catch(a){}},e.fire("tap",eProxy),y?(f(),d()&&(a.mix(eProxy,{type:"doubleTap",timeStamp:(new Date).getTime()}),e.fire("doubleTap",eProxy))):y=setTimeout(function(){clearTimeout(y),y=null,a.mix(eProxy,{type:"singleTap",timeStamp:(new Date).getTime()}),e.fire("singleTap",eProxy)},o)}if(!a.__touchModAdded){var l=200,m=10,n=500,o=300,p=document.documentElement,q=!!("ontouchstart"in window),r=q?"touchstart":"mousedown",s=q?"touchmove":"mousemove",t=q?"touchend":"mouseup",u="touchcancel",v="scroll",w=function(){},x=null,y=null,z=null,A=[];p.addEventListener(r,g,!1),p.addEventListener(s,h,!1),p.addEventListener(t,i,!1),p.addEventListener(u,j,!1),window.addEventListener(v,j,!1),q&&(a.each(["tap","tapHold","singleTap","doubleTap"],function(b){a.Event.Special[b]={setup:function(){var a=this[0];a.__fixTouchEvent||(a.addEventListener("touchstart",w,!1),a.__fixTouchEvent=!0)}}}),a.ready(function(){document.body.addEventListener("touchstart",w,!1)})),a.add&&a.add("m/touch",function(){}),a.__touchModAdded=!0}}(KISSY),!function(){var a=document.documentElement,b="click",c="mousedown",d="mouseup",e="radio",f=400,g=10,h="fix-through",i="fix-through-tapped";!function(){if(!document.getElementById("fix-click-through-style")){var a=document.createElement("style"),b=document.getElementsByTagName("head")[0];a.type="text/css",a.id="fix-click-through-style",b.insertBefore(a,b.firstChild),a.appendChild(document.createTextNode("[fix-through] input,[fix-through] select,[fix-through] textarea {pointer-events:none;}[fix-through] input[type=button],[fix-through] input[type=submit],[fix-through] input[type=reset],[fix-through] input[type=image],[fix-through] input[type=file],[fix-through] input[type=radio],[fix-through] input[type=checkbox],[fix-through] [fix-through-tapped] {pointer-events:auto;}"))}}(),window.FixClickThrough=window.FixClickThrough||{cache:{},relativeToViewport:null,isRelativeToViewport:function(){if(null!==this.relativeToViewport)return this.relativeToViewport;var a=window.pageXOffset?window.pageXOffset+window.innerWidth-1:0,b=window.pageYOffset?window.pageYOffset+window.innerHeight-1:0;return a||b?this.relativeToViewport=!!document.elementFromPoint&&!document.elementFromPoint(a,b):!0},elementFromPoint:function(a,b){return this.isRelativeToViewport()||(a+=window.pageXOffset,b+=window.pageYOffset),document.elementFromPoint?document.elementFromPoint(a,b):null},fromLabel:function(a,b){if(!a||!a.nodeName.match(/(input|select|textarea)/i))return!1;for(var c=this.getLabels(a),d=0,e=c.length;e>d;d++)if(c[d].contains(b))return!0;return!1},getLabels:function(a){var b=a.id,c=[],d=b?document.querySelectorAll('label[for="'+b+'"]'):null;for(d&&d.length&&(c=c.concat(c.slice.call(d,0))),d=a;d=d.parentNode;)d.nodeName.match(/label/i)&&c.push(d);return c},bind:function(j,k){var l=this;(k||!this.cache[j])&&(document.addEventListener(j,function(j){var m,n,o,p,q,r=j.target,s=(new Date).getTime();k&&k(j)===!1||(document.activeElement&&document.activeElement.blur&&document.activeElement!==r&&document.activeElement.blur(),q=this.elementFromPoint(j.clientX,j.clientY),q&&q!==r&&j.preventDefault&&j.preventDefault(),m=function(a){q=a.target,q!==r&&!l.fromLabel(q,r)&&Math.abs(j.clientX-a.clientX)<g&&Math.abs(j.clientY-a.clientY)<g&&(j.preventDefault&&j.preventDefault(),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),q.type===e&&(a.type===c?p=q.checked:p===!1&&a.type===b&&(q.checked=!1)),a.type===b&&n())},n=function(){o||(document.removeEventListener(b,m,!0),document.removeEventListener(c,m,!0),document.removeEventListener(d,m,!0),r.getAttribute(i)==s&&r.removeAttribute(i),a.getAttribute(h)==s&&a.removeAttribute(h),o=!0)},document.addEventListener(b,m,!0),document.addEventListener(c,m,!0),document.addEventListener(d,m,!0),r.setAttribute(i,s),a.setAttribute(h,s),setTimeout(n,f))},!1),k||(this.cache[j]=1))}},FixClickThrough.bind("tap")}(),function(a,b){function c(a,b){var c,d;for(d in b)void 0!==(c=b[d])&&(a[d]=c);return a}function d(a,b){return c(c({},a),b)}function e(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function f(a,b,c){var d,e,f=Object.keys(a);for(d=0,e=f.length;e>d;d++)if(b.call(c,a[f[d]],f[d],a)===!1)return}function g(a){a.url||(a.url=t.toString()),a.processData&&u(a.data)&&(a.data=l(a.data,a.serializeArray)),a.type=a.type.toUpperCase(),a.data&&"GET"==a.type&&(a.url=k(a.url,a.data)),a.cache===z&&(a.url=k(a.url,"t="+Date.now()));var b=/^([\w-]+:)?\/\/([^\/]+)/.test(a.url),c=b?RegExp.$1:t.protocol;return a.local="file:"==c,a.context||(a.context=a),a}function h(a,b){i.fire(a,{io:b})}function i(a){var b=this;if(!(b instanceof i))return new i(a);var c=g(d(I,a)),e=c.timeout;b.cfg=c,h("start",b);var f=c.dataType,j=H[f]||H[E],k=new j(b);b.transport=k;var l=c.beforeSend;if(l&&l.call(c.context,b,c)===!1)return b.abort(),b;h("send",b),e>0&&(b._timer=setTimeout(function(){b.abort("timeout")},1e3*e));try{k.send()}catch(m){b._complete(z,m.message)}return b}function j(a,b){H[a]=b}function k(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function l(a,b){var c=[];return m(c,a,b),c.join("&")}function m(a,b,c,d){var e=c===!0?J("[]"):E;f(b,function(b,f){d&&(f=d+e),v(b)?m(a,b,c,f):a.push(f+"="+J(b))})}function n(){return new a[K]}function o(a){this.io=a}function p(a){var b=a&&M.test(a),c=b?RegExp.$1:"text";return"javascript"===c?"script":c}function q(a){return JSON.parse(a)}function r(a){this.io=a}function s(a,b){return function(c,d,e,f,g){return w(d)&&(f=e,e=d,d=A),i({type:a||g,url:c,data:d,success:e,dataType:b||f})}}var t=(a.document,a.location),u=e("Object"),v=Array.isArray||e("Array"),w=e("Function"),x=1,y=!0,z=!y,A=null,B="abort",C="success",D="error",E="",F=b.getScript,G=function(){},H={},I={type:"GET",async:y,serializeArray:y,processData:y,beforeSend:G,success:G,error:G,complete:G,context:A,accepts:{script:"text/javascript,application/javascript",json:"application/json,text/json",xml:"application/xml,text/xml",html:"text/html",text:"text/plain"},timeout:0,cache:y};c(i,b.Event.Target),c(i.prototype,{abort:function(a){this.transport.abort(a)},_complete:function(a,b){var c=this,d=c.cfg,e=d.context,f=[c.responseData,b,c],g=a?C:D,i="complete";c._end||(c._end=y,clearTimeout(c._timer),d[g].apply(e,f),h(g,c),d[i].apply(e,f),h(i,c))}});var J=encodeURIComponent,K="XMLHttpRequest",L=/^\s*$/;c(o.prototype,{_init:function(){var a=this,b=a.io,c=b.cfg,e=c.dataType,g=c.accepts[e],h={},i=n();b.getNativeXhr=function(){return i},c.crossDomain||(h["X-Requested-With"]=K),g&&(h.Accept=g,i.overrideMimeType&&(g.indexOf(",")>-1&&(g=g.split(",",2)[0]),i.overrideMimeType(g))),(c.contentType||c.data&&"GET"!=c.type)&&(h["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=d(h,c.headers||{}),i.onreadystatechange=function(){if(4===i.readyState){var a,d=z;if(i.status>=200&&i.status<300||304==i.status||0==i.status&&c.local){e=e||p(i.getResponseHeader("Content-Type")),a=b.responseText=i.responseText,b.responseXML=i.responseXML;try{"script"==e?(1,eval)(a):"xml"==e?a=i.responseXML:"json"==e&&(a=L.test(a)?A:q(a))}catch(f){d=f}b.responseData=a,d?b._complete(z,"parsererror"):b._complete(y,C)}else b._complete(z,D)}},i.open(c.type,c.url,c.async),f(c.headers,function(a,b){i.setRequestHeader(b,a)}),i.send(c.data?c.data:A)},abort:function(a){var b=this,c=b.xhr,d=b.io;c&&(c.onreadystatechange=G,c.abort()),d._complete(z,a||B)},send:function(){this._init()}}),j(E,o);var M=/^(?:text|application)\/(json|javascript|xml|html)/i;c(r.prototype,{abort:function(a){this._end(z,a||B)},_end:function(b,c){var d=this,e=d.script,f=d.io,g=d._globalVar;a[g]=function(){delete a[g]},e&&(e.src=A,e.onload=e.onerror=G,e.parentNode.removeChild(e)),f._complete(b,c)},send:function(){var b=this,c=b.io,d=c.cfg,e=d.jsonp||"callback",f=d.jsonpCallback||"jsonp"+x++;b._globalVar=f;var g=k(d.url,e+"="+f);a[f]=function(a){c.responseData=a,b._end(y,C)},b.script=F(g,{charset:d.scriptCharset,error:function(){b._end(z,D)}})}}),j("jsonp",r),c(i,{get:s("get"),post:s("post"),jsonp:s(A,"jsonp"),getJSON:s(A,"json"),getScript:F}),c(b,{IO:i,jsonp:i.jsonp}),b.add("io",function(){return i})}(this,KISSY),KISSY.add("m/anim",function(a){function b(a){return a.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function c(a){return f?f+a:a.toLowerCase()}function d(b,c,d,e,f){return a.isFunction(c)&&(e=c,d=void 0,c=void 0),a.isFunction(d)&&(e=d,d=void 0),a.isPlainObject(c)&&(d=c.easing,e=c.complete,f=c.delay,c=c.duration),c&&(c=("number"==typeof c?c:a._fx.speeds[c]||a._fx.speeds._default)/1e3),f&&(f=parseFloat(f)/1e3),this.anim(b,c,d,e,f)}function e(c,d,e,f,q){d*=1e3;var r,s,t,w={},x="",y=this,z=a._fx.transitionEnd,A=!1;if(void 0===d&&(d=a._fx.speeds._default/1e3),void 0===q&&(q=0),a._fx.off&&(d=0),"string"==typeof c)w[l]=c,w[m]=d+"s",w[o]=q+"s",w[n]=e||"linear",z=a._fx.animationEnd;else{s=[];for(r in c)u.test(r)?x+=r+"("+c[r]+") ":(w[r]=c[r],s.push(b(r)));x&&(w[g]=x,s.push(g)),d>0&&"object"==typeof c&&(w[h]=s.join(", "),w[i]=d+"s",w[k]=q+"s",w[j]=e||"linear")}return t=function(a){if("undefined"!=typeof a){if(a.target!==a.currentTarget)return;p(a.target).detach(z,t)}else p(this).detach(z,t);A=!0,p(this).css(v),f&&f.call(this)},d>0&&(p(this).on(z,t),setTimeout(function(){A||t.call(y)},1e3*d+25)),this.length&&this[0].clientLeft,this.css(w),0>=d&&setTimeout(function(){y.each(function(){t.call(this)})},0),this}var f,g,h,i,j,k,l,m,n,o,p=a.one,q="",r={Webkit:"webkit",Moz:"",O:"o"},s=window.document,t=s.createElement("div"),u=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,v={};a.each(r,function(a,b){return void 0!==t.style[b+"TransitionProperty"]?(q="-"+b.toLowerCase()+"-",f=a,!1):void 0}),g=q+"transform",v[h=q+"transition-property"]=v[i=q+"transition-duration"]=v[k=q+"transition-delay"]=v[j=q+"transition-timing-function"]=v[l=q+"animation-name"]=v[m=q+"animation-duration"]=v[o=q+"animation-delay"]=v[n=q+"animation-timing-function"]="",a.mix(a,{_fx:{off:void 0===f&&void 0===t.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:q,transitionEnd:c("TransitionEnd"),animationEnd:c("AnimationEnd")}}),t=null,a.mix(a.node,{anim:e,animate:d})}),KISSY.add("m/lang",function(a){function b(a,b,c){function d(){}var e=[].slice,f=e.call(arguments,3),g=function(){var g=e.call(arguments);return b.apply(this instanceof d?this:c||this,a?g.concat(f):f.concat(g))};return d.prototype=b.prototype,g.prototype=new d,g}function c(){if(e)return e;var b="";return a.each(m,function(a){b+=a+"|"}),b=b.slice(0,-1),e=new RegExp(b,"g")}function d(){if(f)return f;var b="";return a.each(n,function(a){b+=a+"|"}),b+="&#(\\d{1,5});",f=new RegExp(b,"g")}var e,f,g=!0,h=!1,i=Object,j=0,l={},m={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},n={};["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"].forEach(function(b){var c=b.toLowerCase();l["[object "+b+"]"]=c,a["is"+b]=function(b){return a.type(b)===c}}),function(){for(var a in m)n[m[a]]=a}(),a.mix(a,{escapeHtml:function(a){return(a+"").replace(c(),function(a){return n[a]})},unEscapeHtml:function(a){return a.replace(d(),function(a,b){return m[a]||String.fromCharCode(+b)})},fromUnicode:function(a){return a.replace(/\\u([a-f\d]{4})/gi,function(a,b){return String.fromCharCode(parseInt(b,16))})},inArray:function(b,c){return a.indexOf(b,c)>-1},indexOf:function(a,b){return Array.prototype.indexOf.call(b,a)},forEach:function(){return a.each.apply(this,arguments)},each:function(b,c,d){if(b){var e,f,g,i=0,j=b&&b.length,k=void 0===j||"function"===a.type(b);if(d=d||null,k)for(g=a.keys(b);i<g.length&&(e=g[i],c.call(d,b[e],e,b)!==h);i++);else for(f=b[0];j>i&&c.call(d,f,i,b)!==h;f=b[++i]);}return b},lastIndexOf:function(a,b){return Array.prototype.lastIndexOf.call(b,a)},unique:function(b,c){var d=b.slice();c&&d.reverse();for(var e,f,g=0;g<d.length;){for(f=d[g];(e=a.lastIndexOf(f,d))!==g;)d.splice(e,1);g+=1}return c&&d.reverse(),d},filter:function(a,b,c){return Array.prototype.filter.call(a,b,c||this)},map:function(a,b,c){return Array.prototype.map.call(a,b,c||this)},reduce:function(a,b,c){var d=a.length;if("function"!=typeof b)throw new TypeError("callback is not function!");if(0===d&&2===arguments.length)throw new TypeError("arguments invalid");var e,f=0;if(arguments.length>=3)e=c;else do{if(f in a){e=a[f++];break}if(f+=1,f>=d)throw new TypeError}while(g);for(;d>f;)f in a&&(e=b.call(void 0,e,a[f],f,a)),f++;return e},every:function(a,b,c){return Array.prototype.every.call(a,b,c||this)},some:function(a,b,c){return Array.prototype.some.call(a,b,c||this)},makeArray:function(b){if(null==b)return[];if(a.isArray(b))return b;var c=typeof b.length,d=typeof b;if("number"!==c||"string"==typeof b.nodeName||null!=b&&b==b.window||"string"===d||"function"===d&&!("item"in b&&"number"===c))return[b];for(var e=[],f=0,g=b.length;g>f;f++)e[f]=b[f];return e},toArray:function(b){return a.makeArray(b)},param:function(b,c,d,e){c=c||"&",d=d||"=",void 0===e&&(e=g);var f,h,i,j,k,l=[],m=function(a){return encodeURIComponent(String(a))},n=function(a){var b=typeof a;return null==a||"object"!==b&&"function"!==b};for(f in b)if(k=b[f],f=m(f),n(k))l.push(f),void 0!==k&&l.push(d,m(k+"")),l.push(c);else if(a.isArray(k)&&k.length)for(h=0,j=k.length;j>h;++h)i=k[h],n(i)&&(l.push(f,e?m("[]"):""),void 0!==i&&l.push(d,m(i+"")),l.push(c));return l.pop(),l.join("")},unparam:function(b,c,d){if("string"!=typeof b||!(b=a.trim(b)))return{};c=c||"&",d=d||"=";for(var e,f,g,h={},i=b.split(c),j=0,k=i.length,l=function(a){return decodeURIComponent(a.replace(/\+/g," "))};k>j;++j){if(e=i[j].indexOf(d),-1===e)f=l(i[j]),g=void 0;else{f=l(i[j].substring(0,e)),g=i[j].substring(e+1);try{g=l(g)}catch(m){}a.endsWith(f,"[]")&&(f=f.substring(0,f.length-2))}f in h?a.isArray(h[f])?h[f].push(g):h[f]=[h[f],g]:h[f]=g}return h},noop:function(){},bind:b(0,b,null,0),rbind:b(0,b,null,1),clone:function(b,c){var d=b;if(!b)return d;var e=b.constructor;if(a.inArray(e,[Boolean,String,Number,Date,RegExp])?d=b.valueOf():a.isArray(b)?d=c?a.filter(b,c):b.concat():a.isPlainObject(b)&&(d={}),a.isArray(b))for(var f=0;f<d.length;f++)d[f]=a.clone(d[f],c);else if(a.isPlainObject(b))for(k in b)c&&c.call(b,b[k],k,b)===!1||(d[k]=a.clone(b[k],c));return d},now:Date.now,keys:i.keys,mix:function(a,b,c,d,e){var f;return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)void 0!==(f=b[c])&&(a[c]=f)}),a},merge:function(){var b=Array.prototype.slice.call(arguments,0);return a.mix.apply(null,[{}].concat(b))},augment:function(b,c,d){return c instanceof Function&&a.mix(b.prototype,c.prototype),c instanceof Object&&a.mix(b.prototype,c),d instanceof Object&&a.mix(b.prototype,d),b},extend:function(b,c,d,e){var f,g=c.prototype;return g.constructor=c,f=Object.create(g),f.constructor=b,b.prototype=a.mix(f,b.prototype),b.superclass=g,d&&a.mix(f,d),e&&a.mix(b,e),b},type:function(a){return null==a?String(a):l[{}.toString.call(a)]||"object"},unique:function(a){return Array.prototype.filter.call(a,function(b,c){return a.indexOf(b)==c})},isWindow:function(a){return a&&a==a.window},isPlainObject:function(b){return a.isObject(b)&&!a.isWindow(b)&&Object.getPrototypeOf(b)==Object.prototype},isArray:Array.isArray||a.isArray,startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},ucfirst:function(a){return a+="",a.charAt(0).toUpperCase()+a.substring(1)},trim:function(a){return null==a?"":String.prototype.trim.call(a)},substitute:function(a,b,c){return"string"==typeof a&&b?a.replace(c||/\\?\{([^{}]+)\}/g,function(a,c){return"\\"===a.charAt(0)?a.slice(1):void 0===b[c]?"":b[c]}):a},guid:function(a){return(a||"")+j++},stamp:function(b,c,d){d=d||"__~ks_stamped";var e=b[d];if(e)return e;if(!c)try{e=b[d]=a.guid(d)}catch(f){e=void 0}return e}})}),KISSY.add("m/base",["attribute"],function(a,b){function c(a,b){return function(c){return function(){var d=this;b?c.apply(d,arguments):d.callSuper.apply(d,arguments);var e=arguments.callee.__owner__.__extensions__||[];b&&e.reverse(),h(d,e,a,arguments),b?d.callSuper.apply(d,arguments):c.apply(d,arguments)}}}function d(a){var b=this,c=b.__extensions__,d=b.__hooks__,e=b.prototype;if(c.length&&d)for(var f in d)(!e.hasOwnProperty(f)||a.hasOwnProperty(f))&&(a[f]=a[f]||l);return n.call(b,a)}function e(a){var b,c=this;a.target===c&&(b=c[k+a.type.slice(5).slice(0,-6)],b.call(c,a.newVal,a))}function f(b){var c,d=b.get("plugins");a.each(d,function(a,b){"function"==typeof a&&(c=a,d[b]=new c)})}function g(a){var b,c=this,d=c.get("plugins");if(b=d.length)for(var e=0;b>e;e++)d[e][a]&&d[e][a](c)}function h(a,b,c,d){var e;if(e=b&&b.length)for(var f=0;e>f;f++){var g=b[f]&&(c?b[f].prototype[c]:b[f]);g&&g.apply(a,d||[])}}var i=b("attribute"),j=a.ucfirst,k="_onSet",l=a.noop,m=i.extend({constructor:function(){var a=this;a.callSuper.apply(a,arguments);var b=a.get("listeners");for(var c in b)a.on(c,b[c]);a.initializer(),f(a),g.call(a,"pluginInitializer"),a.bindInternal(),a.syncInternal()},initializer:l,__getHook:c,__callPluginsMethod:g,bindInternal:function(){var a,b,c=this,d=c.getAttrs();for(a in d)b=k+j(a),c[b]&&c.on("after"+j(a)+"Change",e)},syncInternal:function(){for(var a,b=this,c=[],d=b.constructor,e=b.getAttrs();d;)c.push(d),d=d.superclass&&d.superclass.constructor;for(c.reverse(),a=0;a<c.length;a++){var f=c[a].ATTRS||{};for(var g in f)if(g in e){var h,i,l=k+j(g);(i=b[l])&&0!==e[g].sync&&void 0!==(h=b.get(g))&&i.call(b,h)}}},plug:function(a){var b=this;if("function"==typeof a){var c=a;a=new c}return a.pluginInitializer&&a.pluginInitializer(b),b.get("plugins").push(a),b},unplug:function(b){var c=[],d=this,e="string"==typeof b;return a.each(d.get("plugins"),function(a){var f,g=0;b&&(e?(f=a.get&&a.get("pluginId")||a.pluginId,f!==b&&(c.push(a),g=1)):a!==b&&(c.push(a),g=1)),g||a.pluginDestructor(d)}),d.setInternal("plugins",c),d},getPlugin:function(b){var c=null;return a.each(this.get("plugins"),function(a){var d=a.get&&a.get("pluginId")||a.pluginId;return d===b?(c=a,!1):void 0}),c},destructor:a.noop,destroy:function(){var a=this;a.get("destroyed")||(g.call(a,"pluginDestructor"),a.destructor(),a.set("destroyed",!0),a.fire("destroy"),a.detach())}});a.mix(m,{__hooks__:{initializer:c(),destructor:c("__destructor",!0)},ATTRS:{plugins:{value:[]},destroyed:{value:!1},listeners:{value:[]}},extend:function o(b,c,e){a.isArray(b)||(e=c,c=b,b=[]),e=e||{},c=c||{};var f=i.extend.call(this,c,e);if(f.__extensions__=b,d.call(f,{}),b.length){var g={},h={};a.each(b.concat(f),function(b){if(b){a.each(b.ATTRS,function(b,c){var d=g[c]=g[c]||{};a.mix(d,b)});var c,d=b.prototype;for(c in d)d.hasOwnProperty(c)&&(h[c]=d[c])}}),f.ATTRS=g,h.constructor=f,a.augment(f,h)}return f.extend=e.extend||o,f.addMembers=d,f}});var n=m.addMembers;return a.Base=m,m}),KISSY.add("attribute",["event/custom"],function(a,b,c,d){function e(){return arguments[1].toUpperCase()}function f(a){return a.replace(z,e)}function g(a,b){return"string"==typeof b?a[b]:b}function h(a){return a.__attrVals||(a.__attrVals={})}function i(b,c){return b+a.ucfirst(c)+"Change"}function j(b,c,d,e,f,g,h,j){return h=h||d,b.fire(i(c,d),a.mix({attrName:h,subAttrName:g,prevVal:e,newVal:f},j))}function k(a,b,c){var d=a[b];return c||d||(a[b]=d={}),d||{}}function l(a,b){for(var c=0,d=b.length;void 0!==a&&d>c;c++)a=a[b[c]];return a}function m(a,b,c){var d=b.length-1,e=a;if(d>=0){for(var f=0;d>f;f++)a=a[b[f]];void 0!==a?a[b[f]]=c:e=void 0}return e}function n(a){var b;return-1!==a.indexOf(".")&&(b=a.split("."),a=b.shift()),{path:b,name:a}}function o(b,c,d){var e=d;return c&&(e=void 0===b?{}:a.clone(b),m(e,c,d)),e}function p(a,b){var c=k(a,"__defaultBeforeFns");if(!c[b]){c[b]=1;var d=i("before",b);a.publish(d,{defaultFn:r})}}function q(b,c,d,e,f){var g,h,j,k=n(c),m=c;if(c=k.name,g=k.path,j=b.get(c),p(b,c),g&&(h=l(j,g)),!e.force){if(!g&&j===d)return void 0;if(g&&h===d)return void 0}d=o(j,g,d);var q=a.mix({attrName:c,subAttrName:m,prevVal:j,newVal:d,_opts:e,_attrs:f,target:b},e.data);if(e.silent){if(D===r.call(b,q))return D}else if(D===b.fire(i("before",c),q))return D;return b}function r(a){if(a.target!==this)return void 0;var b=this,c=a.newVal,d=a.prevVal,e=a.attrName,f=a.subAttrName,g=a._attrs,i=a._opts,k=b.setInternal(e,c);return k===D?k:void(i.silent||(c=h(b)[e],j(b,"after",e,d,c,f,null,i.data),g?g.push({prevVal:d,newVal:c,attrName:e,subAttrName:f}):j(b,"","*",[d],[c],[f],[e],i.data)))}function s(a){var b=this,c=b.constructor;for(b.userConfig=a;c;)v(b,c.ATTRS),c=c.superclass?c.superclass.constructor:null;w(b,a)}function t(b,c){var d=c.__hooks__||{};for(var e in d)e in b&&(b[e]=d[e](b[e]));a.each(b,function(a,d){if("function"==typeof a){var e=0;if(a.__owner__){var f=a.__owner__;delete a.__owner__,delete a.__name__,e=a.__wrapped__=1;var g=B(a);g.__owner__=f,g.__name__=d,f.prototype[d]=g}else a.__wrapped__&&(e=1);e&&(b[d]=a=B(a)),a.__owner__=c,a.__name__=d}})}function u(b){var c=this;t(b,c),a.mix(c.prototype,b)}function v(a,b){if(b)for(var c in b)a.addAttr(c,b[c],!1)}function w(a,b){if(b)for(var c in b)a.setInternal(c,b[c])}function x(a,b){var c,d=a.getAttrs(),e=k(d,b,1),f=e.valueFn;return f&&(f=g(a,f))&&(c=f.call(a),void 0!==c&&(e.value=c),delete e.valueFn,d[b]=e),e.value}function y(a,b,c,d){var e,f,h;h=n(b),b=h.name,e=h.path,e&&(f=a.get(b),c=o(f,e,c));var i,j=k(a.getAttrs(),b),l=j.validator;return l&&(l=g(a,l))&&(i=l.call(a,c,b,d),void 0!==i&&i!==!0)?i:void 0}var z=/(?:^|-)([a-z])/gi,A=b("event/custom");d.exports=s;var B=a.bind,C={},D=!1;s.extend=function E(b,c){var d,e=this;c=c||{},b=b||{};var g,h=c.__hooks__;(g=e.__hooks__)&&(h=c.__hooks__=c.__hooks__||{},a.mix(h,g,!1));var i=c.name||"AttributeDerived";d=b.hasOwnProperty("constructor")?b.constructor:new Function("return function "+f(i)+"(){ this.callSuper.apply(this, arguments);}")(),b.constructor=d,d.__hooks__=h,t(b,d);var j,k=c.inheritedStatics;return(j=e.inheritedStatics)&&(k=c.inheritedStatics=c.inheritedStatics||{},a.mix(k,j,!1)),a.extend(d,e,b,c),k&&a.mix(d,k),d.extend=c.extend||E,d.addMembers=u,d},a.augment(s,A.Target,{INVALID:C,callSuper:function(){var a,b,c=this,d=arguments;"function"==typeof c&&c.__name__?(a=c,b=d[0],d=Array.prototype.slice.call(d,1)):(a=arguments.callee.caller,a.__wrapped__&&(a=a.caller),b=c);var e=a.__name__;if(!e)return void 0;var f=a.__owner__.superclass[e];return f?f.apply(b,d||[]):void 0},getAttrs:function(){return this.__attrs||(this.__attrs={})},getAttrVals:function(){var a,b=this,c={},d=b.getAttrs();for(a in d)c[a]=b.get(a);return c},addAttr:function(b,c,d){var e,f=this,g=f.getAttrs(),h=a.clone(c);return(e=g[b])?a.mix(e,h,d):g[b]=h,f},addAttrs:function(b,c){var d=this;return a.each(b,function(a,b){d.addAttr(b,a)}),c&&d.set(c),d},hasAttr:function(a){return this.getAttrs().hasOwnProperty(a)},removeAttr:function(a){var b=this,c=h(b),d=b.getAttrs();return b.hasAttr(a)&&(delete d[a],delete c[a]),b},set:function(b,c,d){var e,f=this;if(a.isPlainObject(b)){d=c,d=d||{};var g=Object(b),h=[],i=[];for(b in g)void 0!==(e=y(f,b,g[b],g))&&i.push(e);if(i.length)return d.error&&d.error(i),D;for(b in g)q(f,b,g[b],d,h);var k=[],l=[],m=[],n=[];return a.each(h,function(a){l.push(a.prevVal),m.push(a.newVal),k.push(a.attrName),n.push(a.subAttrName)}),k.length&&j(f,"","*",l,m,n,k,d.data),f}return d=d||{},e=y(f,b,c),void 0!==e?(d.error&&d.error(e),D):q(f,b,c,d)},setInternal:function(a,b){var c,d=this,e=k(d.getAttrs(),a),f=e.setter;return f&&(f=g(d,f))&&(c=f.call(d,b,a)),c===C?D:(void 0!==c&&(b=c),void(h(d)[a]=b))},get:function(a){var b,c,d,e,f=this,i=".",j=h(f);return-1!==a.indexOf(i)&&(b=a.split(i),a=b.shift()),c=k(f.getAttrs(),a,1),d=c.getter,e=a in j?j[a]:x(f,a),d&&(d=g(f,d))&&(e=d.call(f,e,a)),a in j||void 0===e||(j[a]=e),b&&(e=l(e,b)),e},reset:function(a,b){
var c=this;if("string"==typeof a)return c.hasAttr(a)?c.set(a,x(c,a),b):c;b=a;var d=c.getAttrs(),e={};for(a in d)e[a]=x(c,a);return c.set(e,b),c}})}),KISSY.add("event/custom/observer",["event/base"],function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}var d=b("event/base");return a.extend(c,d.Observer,{keys:["fn","context","groups"]}),c}),KISSY.add("event/custom/object",["event/base"],function(a,b){function c(b){c.superclass.constructor.call(this),a.mix(this,b)}var d=b("event/base");return a.extend(c,d.Object),c}),KISSY.add("event/custom/observable",["event/base","./observer","./object"],function(a,b){function c(){var a=this;c.superclass.constructor.apply(a,arguments),a.defaultFn=null,a.defaultTargetOnly=!1,a.bubbles=!0}var d=b("event/base"),e=b("./observer"),f=b("./object"),g=d.Utils;return a.extend(c,d.Observable,{on:function(b){var c=new e(b);a.Config.debug&&(c.fn||a.error("lack event handler for "+this.type)),-1===this.findObserver(c)&&this.observers.push(c)},fire:function(a){a=a||{};var b,c,d,e,g,h=this,i=h.bubbles,j=h.currentTarget,k=h.type,l=h.defaultFn,m=a;if(a.type=k,m instanceof f||(m.target=j,m=new f(m)),m.currentTarget=j,g=h.notify(m),e!==!1&&void 0!==g&&(e=g),i&&!m.isPropagationStopped())for(b=j.getTargets(),c=b&&b.length||0,d=0;c>d&&!m.isPropagationStopped();d++)g=b[d].fire(k,m),e!==!1&&void 0!==g&&(e=g);if(l&&!m.isDefaultPrevented()){var n=m.target,o=n.getCustomEventObservable(m.type);(!h.defaultTargetOnly&&!o.defaultTargetOnly||j===n)&&(e=l.call(j,m))}return e},notify:function(a){var b,c,d,e=[].concat(this.observers),f=e.length;for(d=0;f>d&&!a.isImmediatePropagationStopped();d++)b=e[d].notify(a,this),c!==!1&&void 0!==b&&(c=b);return c},detach:function(a){var b,c=this,d=a.fn,e=a.context,f=c.currentTarget,h=c.observers,i=a.groups;if(h.length){i&&(b=g.getGroupsRe(i));var j,k,l,m,n,o=h.length;if(d||b){for(e=e||f,j=0,k=0,l=[];o>j;++j)m=h[j],n=m.context||f,(e!==n||d&&d!==m.fn||b&&!m.groups.match(b))&&(l[k++]=m);c.observers=l}else c.reset()}}}),c}),KISSY.add("event/custom/target",["event/base","./observable"],function(a,b){var c=b("event/base"),d=b("./observable"),e=c.Utils,f=e.splitAndRun,g="__~ks_bubble_targets",h="__~ks_custom_events";return{isTarget:1,getCustomEventObservable:function(a,b){var c,e=this,f=e.getCustomEvents();return c=f&&f[a],!c&&b&&(c=f[a]=new d({currentTarget:e,type:a})),c},fire:function(a,b){var c,g=this,h=g.getTargets(),i=h&&h.length;return b=b||{},f(a,function(a){var f,h;if(e.fillGroupsForEvent(a,b),a=b.type,h=g.getCustomEventObservable(a),h||i){if(h){if(!h.hasObserver()&&!h.defaultFn&&(h.bubbles&&!i||!h.bubbles))return}else h=new d({currentTarget:g,type:a});f=h.fire(b),c!==!1&&void 0!==f&&(c=f)}}),c},publish:function(b,c){var d,e=this;return f(b,function(b){d=e.getCustomEventObservable(b,!0),a.mix(d,c)}),e},addTarget:function(b){var c=this,d=c.getTargets();return a.inArray(b,d)||d.push(b),c},removeTarget:function(b){var c=this,d=c.getTargets(),e=a.indexOf(b,d);return-1!==e&&d.splice(e,1),c},getTargets:function(){return this[g]||(this[g]=[])},getCustomEvents:function(){return this[h]||(this[h]={})},on:function(a,b,c){var d=this;return e.batchForType(function(a,b,c){var f,g=e.normalizeParam(a,b,c);a=g.type,f=d.getCustomEventObservable(a,!0),f&&f.on(g)},0,a,b,c),d},detach:function(b,c,d){var f=this;return e.batchForType(function(b,c,d){var g,h,i=e.normalizeParam(b,c,d);b=i.type,b?(h=f.getCustomEventObservable(b,!0),h&&h.detach(i)):(g=f.getCustomEvents(),a.each(g,function(a){a.detach(i)}))},0,b,c,d),f}}}),KISSY.add("event/custom",["./custom/target"],function(a,b){var c=b("./custom/target");return{Target:c,global:a.mix({},c)}}),KISSY.add("event/base/utils",[],function(a){function b(a){if(a.indexOf(".")<0)return[a,""];var b=a.match(/([^.]+)?(\..+)?$/),c=b[1],d=[c],e=b[2];return e?(e=e.split(".").sort(),d.push(e.join("."))):d.push(""),d}var c,d;return{splitAndRun:c=function(b,c){return a.isArray(b)?void a.each(b,c):(b=a.trim(b),void(-1===b.indexOf(" ")?c(b):a.each(b.split(/\s+/),c)))},normalizeParam:function(c,d,e){var f=d||{};f="function"==typeof d?{fn:d,context:e}:a.merge(f);var g=b(c);return c=g[0],f.groups=g[1],f.type=c,f},batchForType:function(b,d){var e=a.makeArray(arguments),f=e[2+d];f&&"object"==typeof f?a.each(f,function(a,c){var f=[].concat(e);f.splice(0,2),f[d]=c,f[d+1]=a,b.apply(null,f)}):c(f,function(a){var c=[].concat(e);c.splice(0,2),c[d]=a,b.apply(null,c)})},fillGroupsForEvent:function(a,c){var e=b(a),f=e[1];f&&(f=d(f),c._ksGroups=f),c.type=e[0]},getGroupsRe:d=function(a){return new RegExp(a.split(".").join(".*\\.")+"(?:\\.|$)")}}}),KISSY.add("event/base/object",[],function(a,b){function c(){var c=this;c.timeStamp=a.now(),c.target=b,c.currentTarget=b}var d=function(){return!1},e=function(){return!0};return c.prototype={constructor:c,isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){this.isDefaultPrevented=e},stopPropagation:function(){this.isPropagationStopped=e},stopImmediatePropagation:function(){var a=this;a.isImmediatePropagationStopped=e,a.stopPropagation()},halt:function(a){var b=this;a?b.stopImmediatePropagation():b.stopPropagation(),b.preventDefault()}},c}),KISSY.add("event/base/observer",[],function(a,b){function c(b){a.mix(this,b)}return c.prototype={constructor:c,equals:function(b){var c=this;return!!a.reduce(c.keys,function(a,d){return a&&c[d]===b[d]},1)},simpleNotify:function(a,b){var c,d=this;return c=d.fn.call(d.context||b.currentTarget,a,d.data),d.once&&b.removeObserver(d),c},notifyInternal:function(a,b){var c=this.simpleNotify(a,b);return c===!1&&a.halt(),c},notify:function(a,c){var d=this,e=a._ksGroups;return!e||d.groups&&d.groups.match(e)?d.notifyInternal(a,c):b}},c}),KISSY.add("event/base/observable",[],function(a){function b(b){var c=this;c.currentTarget=null,a.mix(c,b),c.reset()}return b.prototype={constructor:b,hasObserver:function(){return!!this.observers.length},reset:function(){var a=this;a.observers=[]},removeObserver:function(a){var b,c=this,d=c.observers,e=d.length;for(b=0;e>b;b++)if(d[b]===a){d.splice(b,1);break}c.checkMemory()},checkMemory:function(){},findObserver:function(a){var b,c=this.observers;for(b=c.length-1;b>=0;--b)if(a.equals(c[b]))return b;return-1}},b}),KISSY.add("event/base",["./base/utils","./base/object","./base/observer","./base/observable"],function(a,b){var c=b("./base/utils"),d=b("./base/object"),e=b("./base/observer"),f=b("./base/observable");return{Utils:c,Object:d,Observer:e,Observable:f}}),KISSY.add("m/ua",function(a){function b(a){var b=0;return parseFloat(a.replace(/\./g,function(){return 0===b++?".":""}))}var c,d,e,f=navigator.userAgent,g=a.UA={webkit:void 0,trident:void 0,gecko:void 0,presto:void 0,chrome:void 0,safari:void 0,firefox:void 0,ie:void 0,opera:void 0,core:void 0,shell:void 0,phantomjs:void 0,os:void 0,ipad:void 0,iphone:void 0,ipod:void 0,ios:void 0,touchpad:void 0,kindle:void 0,android:void 0,webos:void 0,blackberry:void 0,bb10:void 0,rimtabletos:void 0,tablet:void 0,slik:void 0,playbook:void 0},h={},i={},j=f.match(/Web[kK]it[\/]{0,1}([\d.]+)/),k=f.match(/(Android);?[\s\/]+([\d.]+)?/),l=f.match(/(iPad).*OS\s([\d_]+)/),m=f.match(/(iPod)(.*OS\s([\d_]+))?/),n=!l&&f.match(/(iPhone\sOS)\s([\d_]+)/),o=f.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),p=o&&f.match(/TouchPad/),q=f.match(/Kindle\/([\d.]+)/),r=f.match(/Silk\/([\d._]+)/),s=f.match(/(BlackBerry).*Version\/([\d.]+)/),t=f.match(/(BB10).*Version\/([\d.]+)/),u=f.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=f.match(/PlayBook/),w=f.match(/Chrome\/([\d.]+)/)||f.match(/CriOS\/([\d.]+)/),x=f.match(/Firefox\/([\d.]+)/),y=f.match(/MSIE\s([\d.]+)/),z=j&&f.match(/Mobile\//)&&!w,A=f.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!w;return(i.webkit=!!j)&&(i.webkit=b(j[1])),k&&(h.android=b(k[2]),g.os="android"),n&&!m&&(h.ios=h.iphone=b(n[2].replace(/_/g,".")),g.os="ios"),l&&(h.ios=h.ipad=b(l[2].replace(/_/g,".")),g.os="ios"),m&&(h.ios=h.ipod=b(m[3]?m[3].replace(/_/g,"."):!0),g.os="ios"),o&&(h.webos=b(o[2]),g.os="webos"),p&&(h.touchpad=!0,g.os="touchpad"),s&&(h.blackberry=b(s[2]),g.os="blackberry"),t&&(h.bb10=b(t[2]),g.os="bb10"),u&&(h.rimtabletos=b(u[2]),g.os="rimtabletos"),v&&(i.playbook=!0,e="playbook"),q&&(h.kindle=b(q[1]),g.os="kindle"),r&&(i.silk=b(r[1])),!r&&h.android&&f.match(/Kindle Fire/)&&(i.silk=!0,e="silk"),w&&(i.chrome=b(w[1]),e="chrome"),x&&(i.firefox=b(x[1]),e="firefox"),y&&(i.ie=b(y[1]),e="ie"),z&&(f.match(/Safari/)||h.ios)&&(i.safari=!0,e="safari"),A&&(i.webview=!0,e="webview"),(c=f.match(/AppleWebKit\/([\d.]*)/))&&c[1]?(d="webkit",(c=f.match(/OPR\/(\d+\.\d+)/))&&c[1]&&(g[e="opera"]=b(c[1])),(c=f.match(/PhantomJS\/([^\s]*)/))&&c[1]&&(g.phantomjs=b(c[1]))):(c=f.match(/Trident\/([\d.]*)/))&&c[1]?g[d="trident"]=b(c[1]):(c=f.match(/Presto\/([\d.]*)/))&&c[1]?(g[d="presto"]=b(c[1]),(c=f.match(/Opera\/([\d.]*)/))&&c[1]&&(g[e="opera"]=b(c[1]),(c=f.match(/Opera\/.* Version\/([\d.]*)/))&&c[1]&&(g[e]=b(c[1])))):(c=f.match(/Gecko/))&&(g[d="gecko"]=.1,(c=f.match(/rv:([\d.]*)/))&&c[1]&&(g[d]=b(c[1]))),a.mix(a.UA,{tablet:!!(l||v||k&&!f.match(/Mobile/)||x&&f.match(/Tablet/)||y&&!f.match(/Phone/)&&f.match(/Touch/)),phone:!(h.tablet||h.ipod||!(k||n||o||s||t||w&&f.match(/Android/)||w&&f.match(/CriOS\/([\d.]+)/)||x&&f.match(/Mobile/)||y&&f.match(/Touch/)))}),a.mix(a.UA,i),a.mix(a.UA,h),g.os||(/windows|win32/i.test(f)?g.os="windows":/macintosh|mac_powerpc/i.test(f)?g.os="macintosh":/linux/i.test(f)?g.os="linux":/rhino/i.test(f)&&(g.os="rhino")),g.core||(g.core=d),g.shell||(g.shell=e),g}),KISSY.add("m/uri",function(a){function b(a){x(D,a)}function c(a){a._queryMap||(a._queryMap=i(a._query))}function d(a){var b=/\/\.\//g,c=/\/[^\/]+\/\.\.\//,d=/([^:\/])\/\//g;for(a=a.replace(b,"/");a.match(c);)a=a.replace(c,"/");return a=a.replace(d,"$1/")}function e(a){return encodeURIComponent(String(a))}function f(a){return decodeURIComponent(a.replace(/\+/g," "))}function g(a){var b=typeof a;return null===a||void 0===a||"object"!==b&&"function"!==b}function h(a,b,c,d){b=b||"&",c=c||"=",void 0===d&&(d=!0);var f,h,i,j,k,l=[];for(f in a)if(k=a[f],f=e(f),g(k))l.push(f),void 0!==k&&l.push(c,e(k+"")),l.push(b);else if(r(k)&&k.length)for(h=0,j=k.length;j>h;++h)i=k[h],g(i)&&(l.push(f,d?e("[]"):""),void 0!==i&&l.push(c,e(i+"")),l.push(b));return l.pop(),l.join("")}function i(a,b,c){if("string"!=typeof a||!(a=t(a)))return{};b=b||"&",c=c||"=";for(var d,e,g,h={},i=a.split(b),j=0,k=i.length;k>j;++j){if(d=i[j].indexOf(c),-1===d)e=f(i[j]),g=void 0;else{e=f(i[j].substring(0,d)),g=i[j].substring(d+1);try{g=f(g)}catch(l){q("decodeURIComponent error : "+g),q(l)}w(e,"[]")&&(e=e.substring(0,e.length-2))}e in h?r(h[e])?h[e].push(g):h[e]=[h[e],g]:h[e]=g}return h}function j(a){this._query=a||""}function k(a){return 1==a.length?"0"+a:a}function l(a,b){return a.toLowerCase()==b.toLowerCase()}function m(a,b){return encodeURI(a).replace(b,function(a){return"%"+k(a.charCodeAt(0).toString(16))})}function n(a){if(a instanceof n)return a.clone();var b,c=this;return c.scheme="",c.userInfo="",c.hostname="",c.prot="",c.path="",c.query="",c.fragment="",b=n.getComponents(a),x(b,function(a,b){if(a=a||"","query"==b)c.query=new j(a);else{try{a=f(a)}catch(d){o(d+"urlDecode error : "+a,"error")}c[b]=a}}),c}var o=a.log,q=a.error,r=Array.isArray,s=Object.keys,t=function(a){return a.trim()},u=function(a,b){a.forEach(b)},v=function(a,b){return 0===a.lastIndexOf(b,0)},w=function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},x=function(a,b){for(var c in a)b(a[c],c)},y=/[#\/\?@]/g,z=/[#\?]/g,A=/[#@]/g,B=/#/g,C=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),D={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};return j.prototype={constructor:j,clone:function(){return new j(this.toString())},reset:function(a){var b=this;return b._query=a||"",b._queryMap=null,b},count:function(){var a,b,d=this,e=0;c(d),a=d._queryMap;for(b in a)r(a[b])?e+=a[b].length:e++;return e},has:function(a){var b,d=this;if(c(d),b=d._queryMap,a)return a in b;for(var e in b)if(void 0!==p)return!0;return!1},get:function(a){var b,d=this;return c(d),b=d._queryMap,a?b[a]:b},keys:function(){var a=this;return c(a),s(a._queryMap)},set:function(a,b){var d,e=this;return c(e),d=e._queryMap,"string"==typeof a?e._queryMap[a]=b:"object"==typeof a&&(a instanceof j&&(a=a.get()),x(a,function(a,b){d[b]=a})),e},remove:function(a){var b=this;return c(b),a?delete b._queryMap[a]:b._queryMap={},b},add:function(a,b){var d,e,f=this;return"object"==typeof a?(a instanceof j&&(a=a.get()),x(a,function(a,b){f.add(b,a)})):(c(f),d=f._queryMap,e=d[a],e=void 0===e?b:[].concat(e).concat(b),d[a]=e),f},toString:function(a){var b=this;return c(b),h(b._queryMap,void 0,void 0,a)}},n.prototype={constructor:n,clone:function(){var a=new n,c=this;return b(function(b,d){a[d]=c[d]}),a.query=a.query.clone(),a},resolve:function(a){"string"==typeof a&&(a=new n(a));var b,c=this,e=0,f=["scheme","userInfo","hostname","port","path","query","fragment"],g=c.clone();return u(f,function(c){if("path"==c)if(e)g[c]=a[c];else{var f=a.path;f&&(e=1,v(f,"/")||(g.hostname&&!g.path?f="/"+f:g.path&&(b=g.path.lastIndexOf("/"),-1!=b&&(f=g.path.slice(0,b+1)+f))),g.path=d(f))}else"query"==c?(e||a.query.toString())&&(g.query=a.query.clone(),e=1):(e||a[c])&&(g[c]=a[c],e=1)}),g},getScheme:function(){return this.scheme},setScheme:function(a){return this.scheme=a,this},getHostname:function(){return this.hostname},setHostname:function(a){return this.hostname=a,this},setUserInfo:function(a){return this.userInfo=a,this},getUserInfo:function(){return this.userInfo},setPort:function(a){return this.port=a,this},getPort:function(){return this.port},setPath:function(a){return this.path=a,this},getPath:function(){return this.path},setQuery:function(a){return"string"==typeof a&&(v(a,"?")&&(a=a.slice(1)),a=new j(m(a,A))),this.query=a,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(a){var b=this;return v(a,"#")&&(a=a.slice(1)),b.fragment=a,b},isSameOriginAs:function(a){var b=this;return l(b.hostname,a.hostname)&&l(b.scheme,a.scheme)&&l(b.port,a.port)},toString:function(a){var b,c,e,f,g,h,i,j=[],k=this;return(b=k.scheme)&&(j.push(m(b,y)),j.push(":")),(c=k.hostname)&&(j.push("//"),(i=k.userInfo)&&(j.push(m(i,y)),j.push("@")),j.push(encodeURIComponent(c)),f=k.port,f&&(j.push(":"),j.push(f))),e=k.path,e&&(c&&!v(e,"/")&&(e="/"+e),e=d(e),j.push(m(e,z))),h=k.query.toString.call(k.query,a),h&&(j.push("?"),j.push(h)),g=k.fragment,g&&(j.push("#"),j.push(m(g,B))),j.join("")}},n.Query=j,n.getComponents=function(a){a=a||"";var c=a.match(C)||[],d={};return b(function(a,b){d[b]=c[a]}),d},a.Uri=n,n}),KISSY.add("m/form",function(a){function b(){var a,b=[];return e([].slice.call(this)).each(function(){a=e(this);var c=a.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&("radio"!=c&&"checkbox"!=c||this.checked)&&b.push({name:a.attr("name"),value:a.val()})}),b}function c(){var a=[];return this.serializeArray().each(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")}function d(a){if(a)this.on("submit",a);else if(this.length){{e.Event("submit")}this.submit()}return this}var e=a.one;a.mix(a.node,{submit:d,serializeArray:b,serialize:c})}),KISSY.add("m/juicer",function(a){var b=function(){var a=[].slice.call(arguments);return a.push(b.options),a[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&a[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(b,c){var d=document,e=d&&d.getElementById(c);a[0]=e?e.value||e.innerHTML:b}),1==arguments.length?b.compile.apply(b,a):arguments.length>=2?b.to_html.apply(b,a):void 0},c={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(a){return c.escapehash[a]},escaping:function(a){return"string"!=typeof a?a:a.replace(/[&<>"]/gim,this.escapereplace)},detection:function(a){return"undefined"==typeof a?"":a}},d=function(a){if("undefined"!=typeof console){if(console.warn)return;if(console.log)return}throw a},e=function(a,b){if(a=a!==Object(a)?{}:a,a.__proto__)return a.__proto__=b,a;var c=function(){},d=Object.create?Object.create(b):new(c.prototype=b,c);for(var e in a)a.hasOwnProperty(e)&&(d[e]=a[e]);return d};return b.__cache={},b.version="0.6.5-stable",b.settings={},b.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},b.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:e({__escapehtml:c,__throw:d,__juicer:b},{})},b.tagInit=function(){var a=b.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+b.tags.operationClose,c=b.tags.operationOpen+"\\/each"+b.tags.operationClose,d=b.tags.operationOpen+"if\\s*([^}]*?)"+b.tags.operationClose,e=b.tags.operationOpen+"\\/if"+b.tags.operationClose,f=b.tags.operationOpen+"else"+b.tags.operationClose,g=b.tags.operationOpen+"else if\\s*([^}]*?)"+b.tags.operationClose,h=b.tags.interpolateOpen+"([\\s\\S]+?)"+b.tags.interpolateClose,i=b.tags.noneencodeOpen+"([\\s\\S]+?)"+b.tags.noneencodeClose,j=b.tags.commentOpen+"[^}]*?"+b.tags.commentClose,k=b.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+b.tags.operationClose,l=b.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+b.tags.operationClose;b.settings.forstart=new RegExp(a,"igm"),b.settings.forend=new RegExp(c,"igm"),b.settings.ifstart=new RegExp(d,"igm"),b.settings.ifend=new RegExp(e,"igm"),b.settings.elsestart=new RegExp(f,"igm"),b.settings.elseifstart=new RegExp(g,"igm"),b.settings.interpolate=new RegExp(h,"igm"),b.settings.noneencode=new RegExp(i,"igm"),b.settings.inlinecomment=new RegExp(j,"igm"),b.settings.rangestart=new RegExp(k,"igm"),b.settings.include=new RegExp(l,"igm")},b.tagInit(),b.set=function(a,b){var c=this,d=function(a){return a.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(a){return"\\"+a})},e=function(a,b){var e=a.match(/^tag::(.*)$/i);return e?(c.tags[e[1]]=d(b),void c.tagInit()):void(c.options[a]=b)};if(2===arguments.length)return void e(a,b);if(a===Object(a))for(var f in a)a.hasOwnProperty(f)&&e(f,a[f])},b.register=function(a,b){var c=this.options._method;return c.hasOwnProperty(a)?!1:c[a]=b},b.unregister=function(a){var b=this.options._method;return b.hasOwnProperty(a)?delete b[a]:void 0},b.template=function(a){var c=this;this.options=a,this.__interpolate=function(a,b,c){var d,e=a.split("|"),f=e[0]||"";return e.length>1&&(a=e.shift(),d=e.shift().split(","),f="_method."+d.shift()+".call({}, "+[a].concat(d)+")"),"<%= "+(b?"_method.__escapehtml.escaping":"")+"("+(c&&c.detection===!1?"":"_method.__escapehtml.detection")+"("+f+")) %>"},this.__removeShell=function(a,d){var e=0;return a=a.replace(b.settings.forstart,function(a,b,c,d){var c=c||"value",d=d&&d.substr(1),f="i"+e++;return"<% ~function() {for(var "+f+" in "+b+") {if("+b+".hasOwnProperty("+f+")) {var "+c+"="+b+"["+f+"];"+(d?"var "+d+"="+f+";":"")+" %>"}).replace(b.settings.forend,"<% }}}(); %>").replace(b.settings.ifstart,function(a,b){return"<% if("+b+") { %>"}).replace(b.settings.ifend,"<% } %>").replace(b.settings.elsestart,function(a){return"<% } else { %>"}).replace(b.settings.elseifstart,function(a,b){return"<% } else if("+b+") { %>"}).replace(b.settings.noneencode,function(a,b){return c.__interpolate(b,!1,d)}).replace(b.settings.interpolate,function(a,b){return c.__interpolate(b,!0,d)}).replace(b.settings.inlinecomment,"").replace(b.settings.rangestart,function(a,b,c,d){var f="j"+e++;return"<% ~function() {for(var "+f+"="+c+";"+f+"<"+d+";"+f+"++) {{var "+b+"="+f+"; %>"}).replace(b.settings.include,function(a,b,c){return"<%= _method.__juicer("+b+", "+c+"); %>"}),d&&d.errorhandling===!1||(a="<% try { %>"+a,a+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),a},this.__toNative=function(a,b){return this.__convert(a,!b||b.strip)},this.__lexicalAnalyze=function(a){var c=[],d=[],e="",f=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],g=function(a,b){if(Array.prototype.indexOf&&a.indexOf===Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},h=function(a,e){if(e=e.match(/\w+/gim)[0],-1===g(c,e)&&-1===g(f,e)&&-1===g(d,e)){if("undefined"!=typeof window&&"function"==typeof window[e]&&window[e].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return a;if("undefined"!=typeof global&&"function"==typeof global[e]&&global[e].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return a;if("function"==typeof b.options._method[e]||b.options._method.hasOwnProperty(e))return d.push(e),a;c.push(e)}return a};a.replace(b.settings.forstart,h).replace(b.settings.interpolate,h).replace(b.settings.ifstart,h).replace(b.settings.elseifstart,h).replace(b.settings.include,h).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,h);for(var i=0;i<c.length;i++)e+="var "+c[i]+"=_."+c[i]+";";for(var i=0;i<d.length;i++)e+="var "+d[i]+"=_method."+d[i]+";";return"<% "+e+" %>"},this.__convert=function(a,b){var c=[].join("");return c+="'use strict';",c+="var _=_||{};",c+="var _out='';_out+='",c+=b!==!1?a.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":a.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(a,b){var d=this;return b&&b.loose===!1||(a=this.__lexicalAnalyze(a)+a),a=this.__removeShell(a,b),a=this.__toNative(a,b),this._render=new Function("_, _method",a),this.render=function(a,b){return b&&b===c.options._method||(b=e(b,c.options._method)),d._render.call(this,a,b)},this}},b.compile=function(a,b){b&&b===this.options||(b=e(b,this.options));try{var c=this.__cache[a]?this.__cache[a]:new this.template(this.options).parse(a,b);return b&&b.cache===!1||(this.__cache[a]=c),c}catch(f){return d("Juicer Compile Exception: "+f.message),{render:function(){}}}},b.to_html=function(a,b,c){return c&&c===this.options||(c=e(c,this.options)),this.compile(a,c).render(b,c._method)},b}),KISSY.config({modules:{q:{alias:["mpi/base/q/index"]},bridge:{alias:["mpi/base/bridge/index"]},jsbridge:{alias:["mpi/base/jsbridge/index"]},mtop:{alias:["mpi/base/mtop/index"]},"tms-offline-parser":{alias:["mpi/base/tms-offline-parser/index"]},angular:{alias:["mpi/base/angular/index"]},"ui.router":{alias:["mpi/base/angular-ui-router/index"]},tracker:{alias:["mpi/base/tracker/index"]}}}),function(a,b){"use strict";function c(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}function d(){return z++}function e(a){return a.match(B)[0]}function f(a){for(a=a.replace(C,"/"),a=a.replace(E,"$1/");a.match(D);)a=a.replace(D,"/");return a}function g(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||"/"===c?a:a+".js"}function h(a){var b=v.alias;return b&&w(b[a])?b[a]:a}function i(a){var b,c=v.paths;return c&&(b=a.match(F))&&w(c[b[1]])&&(a=c[b[1]]+b[2]),a}function j(a){var b=v.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(G,function(a,c){return w(b[c])?b[c]:a})),a}function k(a){var b=v.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=y(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function l(a,b){var c,d=a.charAt(0);if(H.test(a))c=a;else if("."===d)c=f((b?e(b):v.cwd)+a);else if("/"===d){var g=v.cwd.match(I);c=g?g[0]+a.substring(1):a}else c=v.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function m(a,b){if(!a)return"";a=h(a),a=i(a),a=j(a),a=g(a);var c=l(a,b);return c=k(c)}function n(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function o(a,b,c){var d=J.createElement("script");if(c){var e=y(c)?c(a):c;e&&(d.charset=e)}p(d,b,a),d.async=!0,d.src=a,O=d,R?Q.insertBefore(d,R):Q.appendChild(d),O=null}function p(a,b,c){function d(){a.onload=a.onerror=a.onreadystatechange=null,v.debug||Q.removeChild(a),a=null,b()}var e="onload"in a;e?(a.onload=d,a.onerror=function(){d()}):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&d()}}function q(){if(O)return O;if(P&&"interactive"===P.readyState)return P;for(var a=Q.getElementsByTagName("script"),b=a.length-1;b>=0;b--){var c=a[b];if("interactive"===c.readyState)return P=c}}function r(a){var b=[];return a.replace(U,"").replace(T,function(a,c,d){d&&b.push(d)}),b}function s(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function t(a,b){for(var c=0;c<b.length;c++){var d=a[c],e=v.modConfig[d];e.config&&b[c].init&&b[c].init(e.config)}}if(!a.pointman){var u=a.pointman={version:"2.0.0"},v=u.data={},w=(c("Object"),c("String")),x=Array.isArray||c("Array"),y=c("Function"),z=0,A=v.events={};u.on=function(a,b){var c=A[a]||(A[a]=[]);return c.push(b),u},u.off=function(a,b){if(!a&&!b)return A=v.events={},u;var c=A[a];if(c)if(b)for(var d=c.length-1;d>=0;d--)c[d]===b&&c.splice(d,1);else delete A[a];return u};var B=/[^?#]*\//,C=/\/\.\//g,D=/\/[^\/]+\/\.\.\//,E=/([^:\/])\/+\//g,F=/^([^\/:]+)(\/.+)$/,G=/{([^{]+)}/g,H=/^\/\/.|:\//,I=/^.*?\/\/.*?\//,J=document,K=location.href&&0!==location.href.indexOf("about:")?e(location.href):"",L=J.scripts,M=J.getElementById("pointmannode")||L[L.length-1],N=e(n(M)||K);u.resolve=m;var O,P,Q=J.head||J.getElementsByTagName("head")[0]||J.documentElement,R=Q.getElementsByTagName("base")[0];u.request=o;var S,T=/'(?:\\'|[^'])*'|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*([''])(.+?)\1\s*\)/g,U=/\\\\/g,V=u.cache={},W={},X={},Y={},Z=s.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};s.prototype.resolve=function(){for(var a=this,b=a.dependencies,c=[],d=0,e=b.length;e>d;d++)c[d]=s.resolve(b[d],a.uri);return c},s.prototype.load=function(){var a=this;if(!(a.status>=Z.LOADING)){a.status=Z.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=s.get(c[e]),b.status<Z.LOADED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return void a.onload();var f={};for(e=0;d>e;e++)b=V[c[e]],b.status<Z.FETCHING?b.fetch(f):b.status===Z.SAVED&&b.load();for(var g in f)f.hasOwnProperty(g)&&f[g]()}},s.prototype.onload=function(){var a=this;a.status=Z.LOADED,a.callback&&a.callback();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=V[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},s.prototype.fetch=function(a){function b(){u.request(f.requestUri,f.onRequest,f.charset)}function c(){delete W[g],X[g]=!0,S&&(s.save(e,S),S=null);var a,b=Y[g];for(delete Y[g];a=b.shift();)a.load()}var d=this,e=d.uri;d.status=Z.FETCHING;var f={uri:e},g=f.requestUri||e;return!g||X[g]?void d.load():W[g]?void Y[g].push(d):(W[g]=!0,Y[g]=[d],f={uri:e,requestUri:g,onRequest:c,charset:v.charset},void(f.requested||(a?a[f.requestUri]=b:b())))},s.prototype.exec=function(){function a(b){return s.get(a.resolve(b)).exec()}var c=this;if(c.status>=Z.EXECUTING)return c.exports;c.status=Z.EXECUTING,c.config=v.modConfig&&v.modConfig[c.id];var e=c.uri;a.resolve=function(a){return s.resolve(a,e)},a.async=function(b,c){return s.use(b,c,e+"_async_"+d()),a};var f=c.factory,g=y(f)?f(a,c.exports={},c):f;return g===b&&(g=c.exports),delete c.factory,c.exports=g,c.status=Z.EXECUTED,g},s.resolve=function(a,b){var c={id:a,refUri:b};return c.uri||u.resolve(c.id,b)},s.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,x(a)?(c=a,a=b):c=b),!x(c)&&y(d)&&(c=r(d.toString()));var f={id:a,uri:s.resolve(a),deps:c,factory:d};if(!f.uri&&J.attachEvent){var g=q();g&&(f.uri=g.src)}f.uri?s.save(f.uri,f):S=f},s.save=function(a,b){var c=s.get(a);c.status<Z.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Z.SAVED)},s.get=function(a,b){return V[a]||(V[a]=new s(a,b))},s.use=function(b,c,d){var e=s.get(d,x(b)?b:[b]);e.callback=function(){for(var b=[],d=e.resolve(),f=0,g=d.length;g>f;f++)b[f]=V[d[f]].exec();c&&c.apply(a,b),delete e.callback},e.load()},u.use=function(a,b){return s.use(a,b,v.cwd+"_use_"+d()),u},s.define.cmd={},u.define=s.define,u.Module=s,v.fetchedList=X,v.cid=d,u.require=function(a){var b=s.get(s.resolve(a));return b.status<Z.EXECUTING&&(b.onload(),b.exec()),b.exports},v.base=N,v.dir=N,v.cwd=K,v.charset="utf-8",v.modConfig={};var $=[];u.config=function(a){v.alias=a.alias,v.base=a.base;for(var b in a.modules){var c=a.modules[b].loadAt;v.modConfig[b]=a.modules[b].config||{},"free"==c&&$.push(b)}$.length>0&&(window.addEventListener?window.addEventListener("load",function(a){u.use($,function(){t($,arguments)})},!1):window.attachEvent("load",function(a){u.use($,function(){t($,arguments)})}))}}}(this),function(){pointman.config({modules:{sufei:{config:{app:"tb-m",version:"2.0.0",style:"//g.alicdn.com/sd/pointman/app/mtop/sufei-tb-m.css"}}},base:"//g.alicdn.com/sd/pointman/js/"})}(),pointman.define("mod/emit",function(a,b,c){"use strict";var d={},e={};d.on=function(a,b){var c=e[a]||(e[a]=[]);return c.push(b),d},d.off=function(a,b){if(!a&&!b)return e={},d;var c=e[a];if(c)if(b)for(var f=c.length-1;f>=0;f--)c[f]===b&&c.splice(f,1);else delete e[a];return d},d.fire=function(a,b){var c=e[a];if(c){c=c.slice();for(var f=0,g=c.length;g>f;f++)c[f](b)}return d},c.exports=d}),pointman.define("mod/messenger",function(a,b,c){"use strict";function d(a){try{for(var b=a.data.split(e),c=b[0],d=b[1],f=0,g=i.length;g>f;f++)i[f].event===c&&i[f].callback(d)}catch(h){}}var e="@=_=@",f=null,g=null,h=null,i=[],j={uid:0,hid:-1,q:[],tm:0,postMessage:function(a,b){var c=++j.uid,d=j.q,e={name:+new Date+""+c+"^"+document.domain+"&"+b,uid:c,target:a};d.push(e),j.tm||(j.tm=setInterval(function(){var a=j.q;if(!(0===a.length||a[0].uid<=j.hid)){var b=a[0];j.hid=b.uid,b.target.name=b.name}},10))},ListenerMessage:function(a,b){function c(){if(!a)return!1;var c=a.name;if(c!==d){j.q.shift(),d=c;var f=e.exec(c);if(!f)return;b&&b({origin:f[2],data:f[3]})}}var d="",e=/^(\d+?)\^(.+?)&(.*?)$/;setInterval(c,10)}};c.exports={initListener:function(a){f=a.currentWin,g=a.originWin,h=a.msgTransfer,f&&g&&h&&(f.postMessage?f.addEventListener?f.addEventListener("message",d,!1):f.attachEvent&&f.attachEvent("onmessage",d):"fromFrame"==h?j.ListenerMessage(g,d):j.ListenerMessage(f,d))},register:function(a,b){i.push({event:a,callback:b})},send:function(a){var b=a.type+e+a.content;f&&g&&h&&(g.postMessage?g.postMessage(b,"*"):"fromFrame"==h?j.postMessage(g,b):j.postMessage(f,b,"*"))}}}),pointman.define("mod/sufei-kissymini-mtop",function(a,b,c){"use strict";function d(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}var e=a("mod/emit"),f=d("Object"),g=(d("String"),function(){this.cache={status:0,currentRequest:null,queue:[]}});g.prototype={init:function(){e.on("event:resendRequest@sufei",function(a){KISSY.one(document).fire("sufei:validateDone",[a])}),KISSY.one(document).on("sufei:validateData",function(a){var b=a[0];b&&f(b)&&"undefined"!=typeof b.ret&&"RGV587_ERROR::SM"==b.ret.join("")?e.fire("event:showDialog@sufei",b.data.url):KISSY.one(document).fire("sufei:noNeedToValidate",a)})}},c.exports=g}),pointman.define("sufei",function(a,b,c){"use strict";var d=a("mod/sufei-kissymini-mtop"),e=a("mod/messenger"),f=!1,g=a("mod/emit"),h=document,i=h.head||h.getElementsByTagName("head")[0]||h.documentElement,j=function(){
this.config={app:"",version:"",sufeiStyle:""},this.cache={queue:[],dialog:null}};j.prototype={init:function(){var a=this,b=c.config;a.config.app=b.app||"",a.config.version=b.version||"",a.config.sufeiStyle=b.style||"",g.on("event:showDialog@sufei",function(b){a.cache.dialog?a.changeDialogStates({state:"visible"}):(b+=/\?/.test(b)?"&":"?",/tpl_redirect_url=http(s)?\:\/\/sec\.(([\w\d])*?\.)?taobao\.com\/query\.htm/.test(decodeURIComponent(b))?b=b.replace("query.htm%3F","query.htm%3Fsufeiversion%3D"+a.config.version+"%26app%3D"+a.config.app+"%26"):b+="sufeiversion="+a.config.version+"&app="+a.config.app,a.loadCss(a.config.sufeiStyle,function(){a.createDialog(b)}))}),(new d).init()},loadCss:function(a,b){var c=h.createElement("link");c.chaarset="utf-8",c.rel="stylesheet",c.href=a,"onload"in c?c.onload=function(){b&&b()}:c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&b&&b()},i.appendChild(c)},isOldBrower:function(){var a=h.createElement("b");return a.innerHTML="<!--[if lte IE 7]><i></i><![endif]-->",1===a.getElementsByTagName("i").length},createDialog:function(a){var b=this,c=document.createElement("div"),d=null,i=null,j=null,k=null,l=null;d=h.createElement("div"),i=h.createElement("div"),k=document.createElement("div"),j=null,c.className=""!==b.config.app?"sufei-dialog sufei-dialog-"+b.config.app:"sufei-dialog",d.className="sufei-dialog-mask",b.isOldBrower()&&(d.innerHTML='<iframe frameborder="none" src="javascript:\'\'"></iframe>'),k.className="sufei-dialog-close",k.innerHTML="close",i.className="sufei-dialog-content",i.innerHTML='<iframe id="sufei-dialog-content" frameborder="none" src="'+a+'""></iframe>',i.appendChild(k),c.appendChild(d),c.appendChild(i),h.body.appendChild(c),l=h.getElementById("sufei-dialog-content").contentWindow,e.initListener({currentWin:window,originWin:l,msgTransfer:"fromFrame"}),f=!0,e.register("msg:validateSuccess@sufei",function(a){g.fire("event:resendRequest@sufei",a),b.changeDialogStates({state:"hidden"}),e.send({type:"msg:resetCheckCode@sufei",content:""})}),k.addEventListener?k.addEventListener("click",function(){b.changeDialogStates({state:"hidden"})},!1):k.attachEvent("onclick",function(){return b.changeDialogStates({state:"hidden"}),!1}),b.cache.dialog=c},changeDialogStates:function(a){"hidden"===a.state?(g.fire("event:cleanHijackQueue@sufei",{}),this.cache.dialog.style.display="none"):(this.cache.dialog.style.display="block",f&&e.send({type:"msg:refreshCheckCode@sufei",content:""}))}};var k=new j;c.exports={init:function(a){k.init(a)}}}),pointman.use("sufei",function(a){a.init()}),KISSY.add("mpi/base/q/index",function(a){function b(b){function e(a){return a}function f(a){return j(a)}function g(b){var c=h(),e=0,f=d(b)?[]:{};return a.each(b,function(a,b){e++,i(a).then(function(a){f.hasOwnProperty(b)||(f[b]=a,--e||c.resolve(f))},function(a){f.hasOwnProperty(b)||c.reject(a)})}),0===e&&c.resolve(f),c.promise}var h=function(){var a,d,g=[];return d={resolve:function(b){if(g){var c=g;if(g=void 0,a=i(b),c.length)for(var d,e=0,f=c.length;f>e;e++)d=c[e],a.then(d[0],d[1],d[2])}},reject:function(a){d.resolve(k(a))},notify:function(a){if(g){var b=g;if(g.length)for(var c,d=0,e=b.length;e>d;d++)c=b[d],c[2](a)}},promise:{then:function(d,i,j){var k=h(),l=function(a){try{k.resolve((c(d)?d:e)(a))}catch(f){k.reject(f),b(f)}},m=function(a){try{k.resolve((c(i)?i:f)(a))}catch(d){k.reject(d),b(d)}},n=function(a){try{k.notify((c(j)?j:e)(a))}catch(d){b(d)}};return g?g.push([l,m,n]):a.then(l,m,n),k.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function d(d,f){var g=null;try{g=(a||e)()}catch(h){return b(h,!1)}return g&&c(g.then)?g.then(function(){return b(d,f)},function(a){return b(a,!1)}):b(d,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},i=function(a){return a&&c(a.then)?a:{then:function(b){var c=h();return c.resolve(b(a)),c.promise}}},j=function(a){var b=h();return b.reject(a),b.promise},k=function(a){return{then:function(d,e){var g=h();try{g.resolve((c(e)?e:f)(a))}catch(i){g.reject(i),b(i)}return g.promise}}},l=function(a,d,g,k){var l,m=h(),n=function(a){try{return(c(d)?d:e)(a)}catch(f){return b(f),j(f)}},o=function(a){try{return(c(g)?g:f)(a)}catch(d){return b(d),j(d)}},p=function(a){try{return(c(k)?k:e)(a)}catch(d){b(d)}};return i(a).then(function(a){l||(l=!0,m.resolve(i(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))}),m.promise};return{defer:h,reject:j,when:l,all:g}}var c=function(a){return"function"==typeof a},d=function(){return c(Array.isArray)?Array.isArray:function(a){return"[object Array]"===toString.call(a)}}();return b(console.log)}),!function(){function a(a,b){for(var c in b)b.hasOwnProperty(c)&&void 0!==b[c]&&(a[c]=b[c]);return a}function b(a,b){var d=c(),e="Bridge_Callbacks_"+(b?"always_":"")+d;return window[e]=function(a,c){return function(){a.apply(this,arguments),!b&&delete window[c]}}(a,e),e}function c(){var a=(new Date).getTime()+"_"+parseInt(1e6*Math.random());return a}function d(a,b){var d=c(),e=document.createElement("iframe");if(e.id="J_MClientProxy_"+d,e.src=a,e.className="hidden mclient-proxy",e.style.cssText="width:0;height:0;opacity:0;display:none;",b)for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f]);return document.body.appendChild(e),e}function e(a){var b=document.createElement("a");return b.href=a,b.protocol+"//"+b.host+b.pathname+b.search+b.hash}function f(a){if(a=a||function(){},window.AlipayJSBridge&&AlipayJSBridge.call)a();else{var b=function(){a(),document.removeEventListener("AlipayJSBridgeReady",b,!1)};document.addEventListener("AlipayJSBridgeReady",b,!1)}}function g(a){var b=!1;try{b="ios"===a.type&&a.version.split(".")[0]>=9&&/safari/i.test(window.navigator.userAgent)}catch(c){}return b}var h=function(){this.init.apply(this,arguments)},i=navigator.userAgent;h.prototype={version:"@@version",device:{},client:{},connection:{},init:function(a){var b=this;b.platform="h5",b.bridgeName=a||"ali_trip_webview_bridge",b.bridge=window[b.bridgeName],b.getDeviceInfo(),b.getPlatform(),b.messageQueueInit(),b.getClientInfo(),b.handShake.apply(this,arguments),b.notification.superthat=b,b.customShare.superthat=b},isWindVane:/WindVane[\/\s]([\d\.\_]+)/i.test(i)&&window.WindVane&&window.WindVane.isAvailable,isInTBClient:function(){var a=i.match(/TB[\s\/][\d\.]+/gim),b=a?parseInt(a[0].match(/[\d\.]+/gim)[0].split(".").join(""),10):0;return window.WindVane?/Android/.test(i)?b>=513:b>=501:!1}(),isAlitrip:/AliTrip/i.test(i),isAlipay:/AlipayClient/i.test(i),isTaobao:/Aliapp\(TB/i.test(i),isTmall:/AliApp\(TM/i.test(i),isWX:/AliApp\(WX/i.test(i),isAlilaiwang:/AliApp\(LW/i.test(i),isUC:/UCBrowser/i.test(i),isAliweibo:/Weibo/i.test(i),messageQueueInit:function(){var a=this;"ios"===a.platform&&(window.messageQueue=window.messageQueue||[],window.messageQueueFetch=window.messageQueueFetch||function(){var a;return a=window.messageQueue.length?JSON.stringify(window.messageQueue):"",window.messageQueue=[],a?a:void 0})},hideTitle:function(a,b){this.setUI({titlebar_display:"hide",success_callback:a||function(){},fail_callback:b||function(){}})},handShake:function(a){var b=this,c=function(){a&&a()};b.pushBack("bridge:","ready",{data:{},successCallback:c,callbackCommand:c})},getDeviceInfo:function(){if(/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(i)){this.device.type="ios";var a=/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/.exec(i);a&&a[0]&&(this.device.version=a[0].replace(/_/g,"."))}else if(/Android/i.test(i)){this.device.type="android";var b=i.match(/Android\s+([\d\.]+)/i);this.device.version=b&&b[1]}else this.device.type=void 0;return this.device},getPlatform:function(){var a=i.match(/AliTrip[\s\/][\d\.]+/gim);return a&&(this.device.type&&(this.platform=this.device.type),this.client.version=parseInt(a[0].match(/[\d\.]+/gim)[0].split(".").join(""),10),this.client.versionStr=a[0].match(/[\d\.]+/gim)[0]),this.platform},getClientInfo:function(b){var c=this;if("h5"===c.platform)return void(b&&b({platform:"h5"}));var d=function(d){d="string"==typeof d?JSON.parse(d||"{}"):d||{},a(c.client,d),b&&b(c.client)};c.pushBack("bridge:","client_info",{successCallback:d})},getUserInfo:function(a){this.pushBack("bridge:","user_info",{successCallback:function(b){a(b)}},!0)},getGPSInfo:function(a,b){this.pushBack("lbs/locate",{successCallback:function(b){a&&a(b)},failCallback:function(){b&&b()}})},getWifiInfo:function(a){var b=this;return"h5"===b.platform?void a(navigator.connection||{}):void b.pushBack("bridge:","networktype",{successCallback:a})},getNetworkInfo:function(a){var b=this;return"h5"===b.platform?void a(navigator.connection||{}):void b.pushBack("bridge:","networktype",{successCallback:a})},compareVersion:function(a,b){var c=this.client.versionStr;if(!c)return-1;for(var d=c.split("."),e=a.split("."),f=b||d.length,g=-1;++g<f;){var h=Number(d[g])||0,i=Number(e[g])||0;if(h>i)return 1;if(i>h)return-1}return 0},pushBack:function(a,c,d,e,f,g,h){var i,j=this,k=(a||"native:")+"//"+c+"?params=",l=[].slice.call(arguments);if(("string"!=typeof a||"string"!=typeof c)&&(a="native:",c=l[0],d=l[1],e=l[2],k=(a||"native:")+"//"+c+"?params="),"h5"!==j.platform||f){d=d||{},d.successCallback&&(d.callbackCommand=d.successCallback);for(var m in d)if(d.hasOwnProperty(m)){if("function"==typeof d[m]&&(i=b(d[m],h),d[m]=i),"object"==typeof d[m]&&d[m].hasOwnProperty("length"))for(var n=0;n<d[m].length;n++)"function"==typeof d[m][n]&&(i=b(d[m][n]),d[m][n]=i);var o=m.replace(/([A-Z])/g,"_$1").toLowerCase();m!==o&&(d[o]=d[m],delete d[m])}k+=encodeURIComponent(JSON.stringify(d)),this.sendUriScheme(k,e,g)}},sendUriScheme:function(a,b,c,e){if("android"===this.platform&&!e)return prompt("alitrip-android://"+a),this;if("ios"===this.platform&&!e)return messageQueue.push(a),this;if((/^taobaotravel:\/\/smartbanner/i.test(a)||e)&&g(this.device))return void(window.location.href=a);var f=this.mClientProxy;return b?(d(a,c),this):(f||(f=document.querySelector("#J_MClientProxy"))?f.setAttribute("src",a):f=d(a),this.mClientProxy=f,this)},showTitle:function(a,b){this.setUI({titlebar_display:"show",success_callback:a||function(){},fail_callback:b||function(){}})},getRequestParam:function(a,b,c){var d,e=this;return(!b||b&&"boolean"==typeof b)&&(c=b,b=a,a=window.location.href),a=a||window.location.href,d=a.match(new RegExp("[?&]"+b+"=([^&]*)(&?)","i")),d=d?decodeURIComponent(d[1]):d,c?e.escapeHtml(d):d},getRequestParams:function(a,b){var c=this,d=location.search.substring(1);return"boolean"==typeof a?b=a:d=a&&a.indexOf("?")>-1?a.split("?")[1]:d,d?JSON.parse('{"'+d.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(a,d){var e;return""!=a?(e=decodeURIComponent(d),e=b?c.escapeHtml(e):e):e=d,e}):{}},escapeHtml:function(a){if(!a)return"";var b={"&":"&amp;",">":"&gt;","<":"&lt;","`":"&#x60;","/":"&#x2F;",'"':"&quot;","'":"&#x27;"};return(a+"").replace(/(&|>|<|`|\/|\"|\')/g,function(a){return b[a]})},getParams:function(a){var b=this,c=b.getRequestParams(a),d=b.client;for(var e in d)d.hasOwnProperty(e)&&c.hasOwnProperty(e)&&(c[e]=d[e]);return c},notification:{alert:function(a,b,c,d){var e=this,f=function(a){var c=a.buttonIndex;return Array.isArray(b)?void(b[c]&&b[c].apply(this,arguments)):void(b&&b())};return"h5"===e.superthat.platform?void alert.apply(null,arguments):("string"==typeof d&&(d=[d]),void e.superthat.pushBack("bridge:","alert",{message:a,successCallback:f,title:c,buttonNames:d}))},confirm:function(a,b,c,d){var e=this;return"h5"===e.superthat.platform?void(confirm.apply(null,arguments)?Array.isArray(b)?b[0](!0):b&&b(!0):Array.isArray(b)?b[1](!1):b&&b(!1)):("string"==typeof d&&(d=[d]),void e.superthat.pushBack("bridge:","confirm",{message:a,title:c,successCallback:b,buttonNames:d}))},prompt:function(a,b,c,d,e){var f=this;return"h5"===f.superthat.platform?void prompt.apply(null,arguments):("string"==typeof e&&(e=[e]),void f.superthat.pushBack("bridge:","prompt",{message:a,value:b,successCallback:c,title:d,buttonNames:e}))},toast:function(a,b,c){var d=this;"h5"!==d.superthat.platform&&d.superthat.pushBack("bridge:","toast",{message:a,milliseconds:b,successCallback:c})},beep:function(a){var b=this;b.superthat.pushBack("bridge:","beep",{times:a})},vibrate:function(a){var b=this;b.superthat.pushBack("bridge:","vibrate",{milliseconds:a})}},openBrowser:function(a){var b=this;return"h5"===b.platform?void window.open(a):void b.pushBack("bridge:","open_system_browser",{url:a})},openAppStore:function(a){var b=this;return"h5"===b.platform?void window.open(a):void b.pushBack("bridge:","open_app_store",{url:a})},openAppPage:function(a,b){a=a||"home",this.router({type:"page",action:a,data:b})},smartbanner:function(b){var c,d=this,e=b.type||"page",f=decodeURIComponent(b.action)||"home",g=/^http(s)?/i.test(f);if(/AliTrip/i.test(i))return b.page_name=g?"act_webview":f,b.data=g?{url:f}:b.data,this._goto(b),!0;b.data&&(c=a({},b.data||{}));var h={url:g?f:e+"://"+f+(c?"?params="+encodeURIComponent(JSON.stringify(c)):""),sb:"1234"};a(h,b),function(){var a=location.search?location.search.replace("?",""):"";a+="&deviceType="+d.device.type+"_"+d.device.version;try{window.goldlog&&goldlog.record("/tbtrip.2000.6","",a,"H46836991")}catch(b){}}(),"android"!==this.device.type||!/Chrome/i.test(i)||this.isWindVane||this.isAlipay||this.isAliweibo||this.isAlilaiwang?this.pushBack("taobaotravel:","smartbanner",h,!0,!0,b.events):window.location.replace("intent://smartbanner?params="+encodeURIComponent(JSON.stringify(h))+"#Intent;scheme=taobaotravel;package=com.taobao.trip;end")},router:function(b){var c=this,d={type:"page",action:"home",alipayDownload:!0};a(d,b);var e={scheme:"taobaotravel://",packagename:"com.taobao.trip"},g=location.search?location.search.replace("?",""):"";if(g+="&deviceType="+c.device.type+"_"+c.device.version,this.isAlipay)return void f(function(){AlipayJSBridge.call("isInstalledApp",e,function(a){a.installed?(c.smartbanner(d),function(){try{window.goldlog&&goldlog.record("/tbtrip.2000.2","",g,"H46836987")}catch(a){}}()):(d.alipayDownload&&c.download(d.downloadUrl,d.androidUrl),function(){try{window.goldlog&&goldlog.record("/tbtrip.2000.1","",g,"H46836965")}catch(a){}}())})});if(this.isWindVane&&window.WindVane)return void window.WindVane.call("Base","isInstall",{ios:e.scheme,android:e.packagename},function(a){c.smartbanner(d),function(){try{window.goldlog&&goldlog.record("/tbtrip.2000.4","",g,"H46836989")}catch(a){}}()},function(a){c.download(d.downloadUrl,d.androidUrl),function(){try{window.goldlog&&goldlog.record("/tbtrip.2000.3","",g,"H46836988")}catch(a){}}()});var h=c.device.type,i="ios"===h?800:2e3,j=Date.now(),k=!0;if(d.events={onload:function(){k=!1}},"ios"!==h||d.onlydown||!this.smartbanner(d)){var l=function(a){return setTimeout(function(){var b=Date.now();if("ios"===h&&i+200>b-a&&c.download(d.downloadUrl),"android"===h){return}},i)}(j);!function(a){window.addEventListener("pagehide",function(b){clearTimeout(a),a=null},!1),document.addEventListener("webkitvisibilitychange",function b(c){clearTimeout(a),a=null,window.removeEventListener("webkitvisibilitychange",b)},!1),document.addEventListener("visibilitychange",function c(b){clearTimeout(a),a=null,window.removeEventListener("visibilitychange",c)},!1),document.addEventListener("WV.Event.APP.Background",function d(b){clearTimeout(a),a=null,window.removeEventListener("WV.Event.APP.Background",d)},!1),document.addEventListener("WV.Event.APP.Active",function e(b){clearTimeout(a),a=null,window.removeEventListener("WV.Event.APP.Active",e)},!1),window.addEventListener("blur",function f(b){clearTimeout(a),a=null,window.removeEventListener("blur",f)},!1)}(l),"android"===h&&this.smartbanner(d)}},download:function(a,b){var c=this;!function(){var a=location.search?location.search.replace("?",""):"";a+="&deviceType="+c.device.type+"_"+c.device.version;try{window.goldlog&&goldlog.record("/tbtrip.2000.5","",a,"H46836990")}catch(b){}}();var d;if(a)d=a;else{var e={ios:"https://itunes.apple.com/cn/app/tao-bao-lu-xing-ji-piao-jiu/id453691481?mt=8",android:"https://trip.taobao.com/go/act/other/tripdownloadh5.php"};d="ios"===this.device.type?e.ios:b||e.android}window.location.href=decodeURIComponent(d)},setTitle:function(a,b){var c=this;return"h5"===c.platform?void(document.title=a):void c.pushBack("bridge:","set_webview_title",{title:a,subtitle:b})},setTitleButton:function(a,b,c,d){if("h5"!==this.platform){var e=c?"set_webview_left_button":"set_webview_right_button",f={title:a,click_callback:b};!c&&d&&(f.img=d),this.pushBack("bridge:",e,f,null,!0,null,!0)}},sendMTop:function(a){var b=a.needLogin?"biz/mtop_ecode_sign":"biz/mtop_normal_sign";this.pushBack("native:",b,a)},setUI:function(a){this.pushBack("bridge:","set_ui",a)},open:function(a,b,c,d,e,f){var g={page_name:a,data:b||{},successCallback:c||function(){},naviType:d||0,animeType:"undefined"!=typeof e?e:4,trigger:f||""};this.pushBack("page:","goto",g)},pushWindow:function(a,b){this.open("act_webview",{url:a.href,title:a.title,right_btn_type:a.rightBtnType},b,0,a.animeType||2,a.trigger)},popWindow:function(a){this.pushBack("bridge:","back",{callbackCommand:function(){a()}})},_goto:function(b){var c={page_name:"home",data:{},naviType:0,animeType:4,trigger:""};a(c,b),this.pushBack("page:","goto",c)},goTo:function(a,b,c){"string"==typeof a&&(a={href:a});var d=a.href||"",f=a.callback||function(){},g=(a.title||"",a.rightBtnType||2,a.triggerNode);if(window.MT&&window.MT.Tracker&&g){var h=window.MT.Tracker.getEelementABCDForStr(g),i=d.split("#"),j=i[0].split("?");if(j.length>1){var k=j[1];j[1]=k.replace(/&{0,1}spm\=[0-9A-Za-z\.]+&?/gi,"")}i[0]=j.length>1&&j[1]?j.join("?"):j[0];var l=-1==i[0].indexOf("?")?"?":"&",m="spm="+h;if(i[0]=i[0]+l+m,-1==i[0].indexOf("ttid")){var n=this.getRequestParam(window.location.search,"ttid")||"",o="ttid="+n;(this.isTmall||this.isTaobao)&&-1!=i[0].indexOf("/item.htm")&&(o+="&track_params="+encodeURIComponent('{"ttid":"'+n+'"}')),l=-1==i[0].indexOf("?")?"?":"&",i[0]=i[0]+l+o}d=i.join("#")}if(this.isAlitrip&&!c)a.href=e(d),this.pushWindow(a,f);else if(this.isAlipay&&window.AlipayJSBridge)d=e(d),AlipayJSBridge.call("pushWindow",{url:d,param:{readTitle:!0,showTitleBar:!0,showToolBar:!1,showLoading:!1,backBehavior:"back"}});else if(this.isInTBClient&&!b){d=e(d);var p={url:d};window.WindVane.call("Base","openWindow",p,function(a){},function(a){window.location.href=d})}else window.location.href=d},back:function(a,b,c){this.isAlitrip?this.pushBack("bridge:","back",b):this.isAlipay&&window.AlipayJSBridge?AlipayJSBridge.call("popWindow",b):this.isInTBClient&&!c?window.WindVane.call("WebAppInterface","pop",b||{},function(a){},function(a){history.back()}):history.back()},close:function(a){var b=this;return"h5"===b.platform?void window.close():void b.pushBack("page:","close",a)},minipay:function(a,b,c,d,e){var f,g=this,h=function(a){try{f="string"==typeof a?JSON.parse(a):a||{}}catch(b){a.match(/"ResultStatus":"9000"/gim)&&(f={ResultStatus:"9000"})}return"ios"===g.platform&&(f.resultStatus=f.ResultStatus),"9000"===f.resultStatus?void(d&&d(f)):void(e&&e(f))},i={data:c||{},failCallback:e,successCallback:h};return c&&c.orderInfo?i.order_info=c.orderInfo:i.alipay_id=a,"h5"===g.platform&&b?void(window.location.href=b):void g.pushBack("bridge:","minipay",i)},wangxin:function(a,b,c,d){var e=this;return"h5"===e.platform?void(d&&d()):void e.pushBack("bridge:","open_wangwang",{sellerName:a,itemId:b,orderId:c,failCallback:d&&d})},openWangxin:function(a,b){var c=this;return"h5"===c.platform||c.client.version<540?void(b&&b()):void c.pushBack("bridge:","open_wangwang",a)},openLoadingView:function(a){a=a||{},this.pushBack("bridge:","open_loading_view",a)},closeLoadingView:function(a){this.pushBack("bridge:","close_loading_view",{commonCallback:a})},share:function(a){this.pushBack("page:","goto",{page_name:"share",data:a||{}},!0)},customShare:{prepare:function(a,b){this.superthat.pushBack("native:","share/preload_share",{data:{share_data:a},successCallback:function(a){b(a.channels||[])}},!0)},exec:function(a,b){this.superthat.pushBack("native:","share/execute_share",{data:{channel:a||"sms"},successCallback:b},!0)}},saveImageToAlbum:function(a,b){if("h5"!=this.platform){a=e(a);var c=function(a){return function(){b(a)}};this.pushBack("bridge:","save_image_to_album",{url:a,successCallback:c(!0),failCallback:c(!1)})}},screenCaptureShare:function(b){var c=document.documentElement;this.pushBack("bridge:","screenCapture_share",a({origin_x:0,origin_y:0,width:c.offsetWidth,height:c.offsetHeight},b))}};var j=new h;h.Global=j,document.addEventListener("DOMContentLoaded",function(){j.closeLoadingView()},!1),window.addEventListener("load",function(){j.closeLoadingView()},!1),"complete"===document.readyState&&j.closeLoadingView(),j.isWindVane||Object.defineProperty(window,"WindVane",{enumerable:!0,configurable:!1,writable:!1,value:null}),this.Bridge=h}.call(this);try{KISSY.add("mpi/base/bridge/index",function(){return Bridge})}catch(e){}KISSY.add("mpi/base/jsbridge/index",function(a,b,c){"use strict";var d=!(!navigator.userAgent.match(/WindVane/i)||navigator.userAgent.match(/T-UA/i)),e=!!navigator.userAgent.match(/Alipay/gi),f=function(){return new g},g=function(){g.superclass.constructor.apply(this,arguments)};a.extend(g,c,{getEnv:function(){var a=b.defer();if("ios"===this.platform&&this.client.version<5){var c={daily:"waptest",prepare:"wapa",online:"m"},d=function(b){a.resolve(c[JSON.parse(b).environment])};this.pushBack("bridge:","getEnvironment",{successCallback:d})}else{var e=location.hostname,f=/waptest/.test(e)?"waptest":/wapa/.test(e)?"wapa":"m";a.resolve(f)}return a.promise},getTTid:function(){var a=b.defer();if(/AlipayClient/i.test(navigator.userAgent))if(location.search.match(/ttid=([^=&]+)/)){var c=location.search.match(/ttid=([^=&]+)/);e=c?c[1]:"201300@travel_h5_3.1.0",a.resolve(e)}else{var d=function(){try{var b=AlipayJSBridge.startupParams.ttid;a.resolve(b)}catch(c){a.reject("AlipayJSBridge get ttid failed.")}};window.AlipayJSBridge&&AlipayJSBridge.call?d():document.addEventListener("AlipayJSBridgeReady",d,!1)}else{var c=location.search.match(/ttid=([^=&]+)/)||location.hash.match(/ttid=([^=&]+)/),e=c?c[1]||"201300@travel_h5_3.1.0":"201300@travel_h5_3.1.0";a.resolve(e)}return a.promise},setTitle:function(a){if(d)window.WindVane.call("WebAppInterface","setCustomPageTitle",{title:a},function(a){},function(a){});else if(e){var b=function(){AlipayJSBridge.call("setTitle",{title:a})};window.AlipayJSBridge&&AlipayJSBridge.call?b():document.addEventListener("AlipayJSBridgeReady",b,!1)}else c.Global.setTitle(a)},routApp:function(a){var b=this.device.type;if("android"===b&&/Chrome/i.test(navigator.userAgent)&&!a.isWebView){var c="intent://"+(a.path||"")+(a.query?"?"+a.query:"")+"#Intent;scheme="+a.scheme+";package="+a.packagename+";end";window.location.replace(c)}else{var d=a.scheme+(a.path||"")+(a.query?"?"+a.query:"");this.sendUriScheme(d,!0,null,!0)}}});var h=new g;for(var i in h)void 0!==h[i]&&(f[i]=h[i]);return f},{requires:["q","bridge"]}),function(a){function b(a){this._init()}var c=window,d=navigator.userAgent,e={};c.trackerPerformanceTime=c.trackerPerformanceTime||{trip_startTime:(new Date).getTime()};var f="https:"==location.protocol?"https:":"http:",g=f+"//wgo.mmstat.com/",h=4e3,i=window.trackerPerformanceTime.trip_startTime||(new Date).getTime(),j=0,k={},l=null,m=[],n={timeline:{key:"tbtrip.1000.8",checkCode:"H46836993"},userAction:{key:"tbtrip.2001.1.1",checkCode:"H46896547"}},o="0.3.21",p=function(a,b,c,d,e){if(e="undefined"!=typeof e?e:!0,d=d||"",a&&b)for(var f in b)e=e?b.hasOwnProperty(f):!0,e&&(c||"undefined"==typeof a[f])&&(a[d+f]=b[f]);return a},q=function(a,b){return a.contains?a!=b&&a.contains(b):!!(16&a.compareDocumentPosition(b))},r=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s=function(b){var c=a.cookie.match(new RegExp("\\b"+b+"=([^;]+)"));return c?c[1]:""};b.prototype={_init:function(){var a=this;a.markObj={},a._timelineMap={},a._timelines=[],a._isInteractCompleted=!1,a._isRenderCompleted=!1,e.pushVersion=a._getPushVersion(),a._saveNetstat(),a._bind()},_debugTouchEvent:function(){var b=screen.width,d=screen.height,e=!1;/Android/i.test(navigator.userAgent)&&c.innerWidth&&(b=c.innerWidth,d=c.innerHeight),c.MT&&c.MT.trackerDev&&(e=!0);var f="/",g=/@/g,h="@@g.alicdn.com@mpi@tracker-tool@index-min.js?t=".replace(g,f)+Date.now(),i="@@g.alicdn.com@mpi@tracker-tool@index-min.css?t=".replace(g,f)+Date.now(),j=function(){var b=a.querySelector("head"),c=a.createElement("script");c.src=h,c.defer=!0,b.appendChild(c);var d=a.createElement("link");d.rel="stylesheet",d.href=i,b.appendChild(d),a.removeEventListener("touchmove",k)},k=function(a){a.touches&&a.touches.length>2&&a.touches[0].screenX<b/4&&a.touches[0].screenY<d/4&&a.touches[1].screenX<b/4&&a.touches[1].screenY>.75*d&&a.touches[2].screenX>.75*b&&a.touches[2].screenY>.75*d&&j()};location.search.indexOf("enableTrackerTool")>-1?j():a.addEventListener("touchmove",k)},_bind:function(){c.addEventListener("beforeunload",this._beforeunloadHanlder.bind(this)),c.addEventListener("error",this._errorHandler.bind(this)),c.addEventListener("DOMContentLoaded",this._domContentLoadedHandler.bind(this)),a.addEventListener("visibilitychange",this._visibilitychangeHandler.bind(this)),this._watch(c,"Bridge,AlipayJSBridge,WindVane",this._watchGlobalHandler.bind(this)),"complete"===a.readyState?this._loadHandler():c.addEventListener("load",this._loadHandler.bind(this));try{this._debugTouchEvent()}catch(b){}},_domContentLoadedHandler:function(){c.trackerPerformanceTime.readyTime=(new Date).getTime()},_watchGlobalHandler:function(a,b){this._saveNetstat()},_watch:function(a,b,c){b.split(",").forEach(function(b){"undefined"==typeof a[b]&&Object.defineProperty(a,b,{enumerable:!0,configurable:!0,set:function(d){delete a[b],a[b]=d,c.call(this,d,b)}.bind(this)})})},_loadHandler:function(){var a=this;c.trackerPerformanceTime.loadTime=c.trackerPerformanceTime.loadTime||(new Date).getTime(),setTimeout(function(){a._isInteractCompleted||(a.sendLogs(!0),a._autoSendLog())},50)},_visibilitychangeHandler:function(b){"visible"==a.visibilityState?l&&m.push((new Date).getTime()-l):(l=(new Date).getTime(),this.sendLogs(!0))},_beforeunloadHanlder:function(a){var b=(new Date).getTime(),c=0;m.length>0&&(m.forEach(function(a){c+=a}),b-=c),this.log("unloadComplete",null,b,"unloadComplete"),this.sendLogs(!0)},_errorHandler:function(a){if("undefined"==typeof k[a.message+a.lineno.toString()]){var b={lineNo:a.lineno,fileName:a.filename};k[a.message+a.lineno.toString()]=!0,this.log(a.message,b,null,"jsErr")}},timelineStart:function(a){"undefined"==typeof this._timelineMap[a]&&(this._timelineMap[a]=(new Date).getTime())},timelineEnd:function(a,b,c,d){var e;if(e="object"==typeof a?a:{name:a,status:b,extra:c,type:d||"cstTimeline"},e.status=e.status||"success","undefined"==typeof this._timelineMap[e.name])return this;var f=(new Date).getTime(),g={name:e.name,sta:e.status,st:this._timelineMap[e.name]-i,et:f-i,sp:f-this._timelineMap[e.name],tp:e.type};return r(e.extra)&&(g.extra=p({},e.extra,!0)),delete this._timelineMap[a],this.addLog(g),this},log:function(a,b,c,d){c=c||(new Date).getTime(),d=d||"cstLog";var e={name:a,st:c-i,tp:d};return r(b)&&(e.extra=p({},b,!0)),this._saveNetstat(),this.addLog(e),this},renderCompleted:function(a,b){b=b||null;var c=this;if(c._isRenderCompleted)return this;var d=a||(new Date).getTime();return this.log("renderComplete",b,d,"renderComplete"),c._isRenderCompleted=!0,this},interactCompleted:function(a,b){b=b||null;var c=this;if(c._isInteractCompleted)return this;var d=a||(new Date).getTime();return this.log("interactComplete",b,d,"interactComplete"),c._isInteractCompleted=!0,this},_autoSendLog:function(){var a=this;this._autoSendTimer=setInterval(function(){a.sendLogs()},5e3)},addLog:function(a){return this._timelines.push(a),this.onLog&&this.onLog(a),this},_clearTimelines:function(){this._timelines=[]},_jsonLen:function(a){return encodeURIComponent(JSON.stringify(a)).length},_getEnvData:function(a){return a.spm=this.getPageAB(),a.isOff=this.isOffline(),a.keepword=1,a.guid=i,a.nickName=s("tracknick")||s("cna"),a.tracVer=o,a.projVer=this._getSrcVersion(),a.gitRepos=this._getGitRepos(),a.netstat=e.netstat,a.dpr="undefined"!=typeof c.devicePixelRatio?c.devicePixelRatio:"",a.sendTime=(new Date).getTime(),a.sendIndex=j,a.pushVer=e.pushVersion,a},_saveNetstat:function(){e.netstat||this._getNetstat(function(a){e.netstat=a})},sendLogs:function(a){var b=this,d={},e=c.trackerPerformanceTime;if(a="undefined"==typeof a?!1:a,!b._isInteractCompleted&&!a)return this;if(this._getEnvData(d),e.trip_headerTime>0){var f=e.trip_headerTime;e.trip_headerTime=0,this.log("headerComplete",null,f,"headerComplete")}if(e.readyTime>0){var g=e.readyTime;e.readyTime=0,this.log("domComplete",null,g,"domComplete")}if(e.loadTime>0){0==j&&(d.perf=JSON.stringify(this.getPerformance()));var h=e.loadTime;e.loadTime=0,this.log("loadComplete",null,h,"loadComplete")}return j>0&&this._timelines.length<1?this:(this._sendLogs(this._timelines,d),this._clearTimelines(),this)},_sendLogs:function(a,b){for(var c=this._jsonLen(b),d=a.concat(),e=[],f=this,g=function(a,b){b.logs=JSON.stringify(a),f.sendGoldLog(n.timeline.key,n.timeline.checkCode,b),j++,a.length=0};d.length>0;)e.push(d.shift()),this._jsonLen(e)+c>=h&&g(e,b);e.length>0&&g(e,b)},addGoldLogList:function(b){for(var c=this,d=a.body,e=a.querySelector('meta[name="aplus-touch"]'),f=e?e.getAttribute("content"):0,g=1==f?"touchstart":"click",h=0,i=b.length;i>h;h++){var j=b[h];!function(b){d.addEventListener(g,function(){var d=a.querySelectorAll(b.node);if(d.length)for(var e=arguments[0]||window.event,f=e.srcElement?e.srcElement:e.target,g=0,h=d.length;h>g;g++)if(d[g]==f||q(d[g],f)){c.sendGoldLog(b.goldCode,b.checkCodeNum,b.gokey);break}})}(j)}},sendPageLog:function(b){b&&a.querySelector('meta[name="data-spm"]').setAttribute("data-spm","181."+b),goldlog&&goldlog.sendPV()},sendUserActionLog:function(a,b){var c=this,d=n.userAction;if("object"==typeof b)b.displayName=a;else{var e="displayName="+a;b=b?b+"&"+e:e}c.sendGoldLog(d.key,d.checkCode,b)},sendGoldLog:function(a,b,c){var d=this;if(c=c||{},"object"==typeof c){window._prism_lk&&(c._prism_lk=JSON.stringify(window._prism_lk));var e=[];for(var f in c)if(c.hasOwnProperty(f)){var g="undefined"!=typeof c[f]?c[f].toString():"";e.push(f+"="+encodeURIComponent(g))}c=e.join("&")}c+="&spm-cnt="+d._getPageSPM(),d._goldlog(a,c)},_goldlog:function(a,b){var c=new Image,d=g+a+"?",e=["cache="+(new Date).getTime(),"gmkey=","gokey="+encodeURIComponent(b)];c.src=d+e.join("&"),c=null},getPerformance:function(){if(!c.performance||!c.performance.timing)return"";var a=c.performance.timing,b={redirect:a.redirectEnd-a.redirectStart,appCache:a.domainLookupStart-a.fetchStart,dns:a.domainLookupEnd-a.domainLookupStart,tcp:a.connectEnd-a.connectStart,request:a.responseStart-a.requestStart,response:a.responseEnd-a.responseStart,processing:a.domComplete-a.domLoading,onLoad:a.loadEventEnd-a.loadEventStart,fetchStart:a.fetchStart,domLoading:a.domLoading,_domReady:a.domInteractive-a.domLoading,_loaded:a.loadEventEnd-a.domLoading,_network:a.responseEnd-a.fetchStart};return c.performance.memory&&p(b,c.performance.memory,!0,"",!1),b},getResourceTiming:function(){var a={};return c.performance&&c.performance.getEntries?(a.resources=c.performance.getEntries().map(function(a){return{name:a.name,sp:Math.round(a.responseEnd-a.startTime)}}),a.count=a.resources.length,a):""},_getNetstat:function(a){var b=this;if(!window.Bridge)return a("fail"),this;if(b.tripBridge=new window.Bridge,b.tripBridge.isAlitrip)b.tripBridge.getWifiInfo(function(b){return"object"==typeof b&&b.state?(a(b.state.toLowerCase()),this):(a("fail"),this)});else{if(window.AlipayJSBridge){var c=d.match(/AlipayDefined\(nt\:(\d?.?\d?[A-Za-z|]+)\,/i);return c&&c.length>=2?(a(c[1].toLowerCase()),this):(a("fail"),this)}if(!b.tripBridge.isWindVane||!window.WindVane)return a("fail"),this;window.WindVane.call("WVNetwork","getNetworkType",{},function(b){return"object"==typeof b&&b.type?(a(b.type.toLowerCase()),
this):(a("fail"),this)})}},_getPageSPM:function(){var a=this;return a.getPageAB()+".0.0"},_getSrcVersion:function(){return window.KISSY&&KISSY.Config?KISSY.Config.version||"":""},_getPushVersion:function(){var b=a.querySelector('meta[name="alitrip-push-version"]');return b?b.getAttribute("content"):""},_getGitRepos:function(){var a=function(){var a="",b="";return c.KISSY&&c.KISSY.Config&&c.KISSY.Config.packages&&Object.keys(KISSY.Config.packages).some(function(c){if(b=KISSY.Config.packages[c],b.uri){var d=b.uri.match(/.[com|cn]\/trip\/(h5\-[A-Za-z_-]+)/);if(d&&d.length>1)return a=d[1],!0}}),a};return c.KISSY&&KISSY.Config?KISSY.Config.gitReposName||a():void 0},getPageAB:function(){if(c.goldlog)return c.goldlog.spm_ab.join(".");var b=a.querySelector('meta[name="data-spm"]'),d=a.querySelector('meta[name="spm-id"]');if(b){var e=b.getAttribute("content");return e.indexOf(".")<0&&(e=e+"."+(a.body.getAttribute("data-spm")||"")),e}return d?(e=d.getAttribute("content"),e.indexOf(".")<0&&(e=e+"."+(a.body.getAttribute("data-spm")||"")),e):"0.0"},getEelementABCD:function(a){var b={a:"0",b:"0",c:"0",d:"0"};if(c.g_SPM&&(b=c.g_SPM.getParam(a)),"A"!=a.tagName){var d,e=a.getAttribute("data-spm-click");e=e?e.split(";")[1]:"",d=e?e.split("=d")[1]:0,b.d=d}return b},getEelementABCDForStr:function(a){var b=this,c=b.getEelementABCD(a);return[c.a,c.b,c.c,c.d].join(".")},isOffline:function(){if("undefined"!=typeof c._$isOffline$_)return c._$isOffline$_/1;var b=a.querySelector('meta[name="alitrip-offline"]'),d=b?b.getAttribute("content"):0;return d/1},sendErrorLog:function(a){},sendCustomErrorLog:function(a){},_addErrorMonitor:function(){},sendCustomPerformanceLog:function(a){},recordPerformance:function(){},_collectionPerformanceInfo:function(){},_getLoadPerformance:function(){},_sendCustomPerformance:function(){},sendCustomPerformance:function(a){},_getDPI:function(){},_getPageId:function(){},_getUtdid:function(){},_getUrlParam:function(a,b){var d;return b=b||c.location.href,b=b.match("#")?b.split("#")[1]:b,d=b.match(new RegExp("[?&]"+a+"=([^&#]*)([&#]?)","i")),d?decodeURIComponent(d[1]):d},recordVisibileTime:function(){this.log("recordVisibileTime Deprecated ",null,null,"trac")},send:function(a){this.sendGoldLog("tbjipiao.100.1","H46866756",a)},sendButton:function(a){this.log("sendButton Deprecated ",null,null,"trac"),this.sendGoldLog("tbjipiao.100.1","H46866756",a)},sendPoint:function(a){this.sendGoldLog("tbjipiao.100.1","H46866756",a)},sendWindVane:function(){},sendAplus:function(){},sendBridge:function(){},performance:function(){},mtopError:function(a){this.sendCustomErrorLog(a)},startMark:function(a){},endMark:function(a){},measure:function(a){},clearMark:function(a){}},window.MT||(window.MT={}),window.MT.Tracker=new b,window.MT.Aplus=function(a){window.MT.Tracker.send(a)}}(document),window.KISSY&&KISSY.add("mpi/base/tracker/index",function(){return window.MT.Tracker}),KISSY.add("mpi/base/mtop/index",function(S,q,JSBridge,tracker){"use strict";function alipayCall(a){a=a||function(){},window.AlipayJSBridge&&AlipayJSBridge.call?a():document.addEventListener("AlipayJSBridgeReady",a,!1)}function configPrism(a){"undefined"!=typeof a._prism_lk&&(window._prism_lk=a._prism_lk)}function insertPrism(a){return"undefined"!=typeof window._prism_lk&&"object"==typeof a&&(a._prism_lk=JSON.stringify(window._prism_lk)),a}var hostname=window.location.hostname,hostRegexp=/.*?([^.]+)(?:\.x)?\.(alitrip|taobao|tmall|etao|alibaba|alipay|aliyun)\.(com|net).*/i,domain=(/\.alitrip\./.test(hostname)?"alitrip":"taobao")+"."+(/\.net/.test(hostname)?"net":"com"),env=function(){var a=hostname.indexOf("x.taobao.net")>0?"waptest":"m",b=hostname.match(hostRegexp);return b&&["waptest","wapa","m","waptest2nd"].indexOf(b[1])>-1&&(a=b[1]),a}(),protocol="https:";/https:/i.test(location.protocol)||"waptest"!==env&&"wapa"!==env||(protocol="http:");var passURL=protocol+"//login.<%= domain %>/jump?target=<%= redirect %>",loginURL=protocol+"//login.<%= env %>.<%= domain %>/login.htm?tpl_redirect_url=<%= redirect %>",requestQueue=[],isRunning=!1,jsonpInc=1,sendPerformanceLog=function(a,b){var c={TIMEOUT:"timeout",ACTIVE_ABORT:"abort",success:"success",failure:"failure"};tracker&&tracker.timelineEnd&&tracker.timelineEnd(a.api,c[b]||b,{useNative:a.useNative},"mtop")},randomUID=function(){for(var a="abcdefghijklmnopqrstuvwxyz",b=8,c="",d=0,e=a.length;b>d;d++)c+=a.substr(0|Math.random()*e,1);return randomUID.uids[c]?randomUID(b):randomUID.uids[c]=c};randomUID.uids={};var requestHistory={},Util={container:function(){var a=!1,b=!1,c=!1,d=!1;return a=function(){return/AlipayClient/i.test(navigator.userAgent)}(),b=function(){return/AliTrip/i.test(navigator.userAgent)}(),c=function(){return/Aliapp\(TB/i.test(navigator.userAgent)}(),d=function(){return/AliApp\(TM/i.test(navigator.userAgent)}(),{isAlipay:a,isAlitrip:b,isTaobao:c,isTmall:d}}(),useNative:function(a){return this.container.isAlitrip?a.alitrip:this.container.isAlipay?a.alipay&&this.compareVersion("AlipayClient","9.0.1")>=0:this.container.isTaobao?a.taobao&&("android"===JSBridge.device.type&&this.compareVersion("TB","5.2.12")>=0||"ios"===JSBridge.device.type&&this.compareVersion("TB","5.2.9")>=0)&&window.WindVane:this.container.isTmall?a.tmall&&this.compareVersion("TM","5.2.0")>=0&&window.WindVane:!1},compareVersion:function(a,b,c){var d=new RegExp(a+"[\\s\\/]([\\d\\.]+)","i"),e=navigator.userAgent.match(d),f=e&&e[1]?e[1]:0;if(!f)return-1;for(var g=f.split("."),h=b.split("."),i=c||g.length,j=-1;++j<i;){var k=Number(g[j])||0,l=Number(h[j])||0;if(k>l)return 1;if(l>k)return-1}return 0},deleteCookie:function(a,b,c){var d=new Date,c=c||"/",b=b||window.location.hostname;d.setTime(d.getTime()-1e3),document.cookie=a+"=;path="+c+";domain="+b+";expires="+d.toGMTString()},getCookie:function(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return b?b[1]:null},goLogin:function(){this.isGoingToLogin||(this.isGoingToLogin=!0,JSBridge.getEnv().then(function(a){var b=domain.replace(/alitrip/i,"taobao");if(location.href.indexOf(".alitrip.")>-1&&!JSBridge.isAlitrip&&!JSBridge.isTaobao&&!JSBridge.isAlipay){var c=passURL.replace(/\<\%\=\s*env\s*\%\>/i,a).replace(/\<\%\=\s*domain\s*\%\>/i,b).replace(/\<\%\=\s*redirect\s*\%\>/i,encodeURIComponent(location.href));location.href=loginURL.replace(/\<\%\=\s*env\s*\%\>/i,a).replace(/\<\%\=\s*domain\s*\%\>/i,b).replace(/\<\%\=\s*redirect\s*\%\>/i,encodeURIComponent(c))}else location.href=loginURL.replace(/\<\%\=\s*env\s*\%\>/i,a).replace(/\<\%\=\s*domain\s*\%\>/i,b).replace(/\<\%\=\s*redirect\s*\%\>/i,encodeURIComponent(location.href))}))},getAppKey:function(){var a="J_app_key",b=document.getElementById(a);return b?b.value:"waptest"===env?"4272":"12574478"},deleteToken:function(a,b){this.deleteCookie(this.TOKEN_KEY,a,b)},mergeParams:function(a){var b,c,d={};for(b in a)c=a[b],a.hasOwnProperty(b)&&(d[b]="function"==typeof c?c():c);return d},parseParams:function(a){return this.mergeParams(a)},request:function(a,b,c){var d=this;a.v=a.v||"*",a.useNative&&a.needLogin&&this.useNative(a)&&(a.timeout=a.timeout||3e5),a.useNative&&this.useNative(a)||"object"!=typeof a.data||(a.data=JSON.stringify(a.data||{})||"{}"),d.sendInQueue(a,b,c)},sendInQueue:function(a,b,c){var d=[a,b,c];requestQueue.push(d),requestHistory[a.uid].status="inQueue",requestHistory[a.uid].abort=function(){for(var b=0,c=requestQueue.length;c>b;b++)if(requestQueue[b]===d){requestQueue.splice(b,1),requestHistory[a.uid].status="complete";break}},this.runNextInQueue()},runNextInQueue:function(){if(requestQueue.length&&!isRunning){isRunning=!0;var a=requestQueue.shift();requestHistory[a[0].uid].status="outQueue",this.sendRequest.apply(this,a)}},sendRequest:function(options,success,failure){function _noNeedToValidate(a){S.one(document).detach("sufei:validateDone",_validateDone),S.one(document).detach("sufei:noNeedToValidate",_noNeedToValidate),callback.apply(this,[a[0]])}function _validateDone(e){S.one(document).detach("sufei:validateDone",_validateDone);var _options=S.clone(options);try{var sm=eval("({"+e[0].replace(/&/g,",").replace(/\=/g,":").replace(/([^\,\:]+)/g,'"$1"')+"})");_options.data=S.merge(JSON.parse(_options.data||{}),sm),_options.data=JSON.stringify(_options.data)}catch(e){}self.getApiUrlPromise(_options).then(function(a){self.send(a,callback,_options)},function(){callback(S.merge(_options,{ret:["ACTIVE_ABORT::\u624b\u52a8\u4e2d\u6b62\u8bf7\u6c42"]}))})}var self=this,callback=this.createHandler(options,success,failure);S.one(document).on("sufei:validateDone",_validateDone),S.one(document).on("sufei:noNeedToValidate",_noNeedToValidate),this.getApiUrlPromise(options).then(function(a){self.send(a,callback,options)})},createHandler:function a(b,c,d){function e(e){var g=(e&&e.ret||[]).join(",");if(/SUCCESS/i.test(g)){isRunning=!1,f.runNextInQueue();try{c&&c(e)}catch(i){}}else{if(/TOKEN_EMPTY|TOKEN_EXPIRED|TOKEN_EXOIRED/i.test(g)){if(a.failTimes++<h)f.sendRequest(b,c,d);else{a.failTimes=0,f.deleteToken(),isRunning=!1,f.runNextInQueue();try{d&&d(e)}catch(i){}}return void function(){try{var a=g.split("::");tracker&&tracker.log&&tracker.log(e.api,{errorName:"MTOP_ERROR::TOKEN",errorCode:a[0],errorMesage:a[1]||"mtop token\u5f02\u5e38",errorDetail:e.api,v:e.v,useNative:b.useNative},null,"mtop")}catch(c){}}()}if(/SESSION_EXPIRED|SID_INVALID|AUTH_REJECT|NEED_LOGIN/.test(g)){if(function(){try{var a=g.split("::");tracker&&tracker.log&&tracker.log(e.api,{errorName:"MTOP_ERROR::SESSION",errorCode:a[0],errorMesage:a[1]||"mtop session\u5f02\u5e38",errorDetail:e.api,v:e.v,useNative:b.useNative},null,"mtop")}catch(c){}}(),b.needLogin)return void f.goLogin();isRunning=!1,f.runNextInQueue();try{d&&d(e)}catch(i){}}else{!function(){try{var a=g.split("::");tracker&&tracker.log&&tracker.log(e.api,{errorName:"MTOP_ERROR::OTHER",errorCode:a[0],errorMesage:a[1]||"mtop \u5176\u4ed6\u5f02\u5e38",errorDetail:e.api,v:e.v,useNative:b.useNative},null,"mtop")}catch(c){}}(),isRunning=!1,f.runNextInQueue();try{d&&d(e)}catch(i){}}}}var f=this;try{tracker&&tracker.log("requestLog",{request:b},null,"mtop")}catch(g){}a.failTimes=a.failTimes||0;var h=3;return e},getApiUrlPromise:function(a){var b=this,c=q.defer();return a=this.parseParams(S.clone(a)),requestHistory[a.uid].abort=function(){c.reject()},JSBridge.getTTid().then(function(d){if(a.useNative&&b.useNative(a))return!a.ttid&&d&&(a.ttid=d),void c.resolve(a);var e=hostname.match(hostRegexp),f=protocol+"//"+[e&&"etao"===e[2]?"apie":"api",env,domain].join(".")+"/rest/"+mtop.name,g=[];g.push("callback=jsonpCallback"),a.type?(g.push("type="+a.type),delete a.type):g.push("type=originaljsonp");for(var h in a)"timeout"!==h&&g.push(h+"="+encodeURIComponent(a[h]));d&&g.push("ttid="+d);var i=location.search.match(/sprefer=([^=&]+)/);i&&i[1]&&g.push("sprefer="+i[1]);var j=(new Date).getTime();g.push("appKey="+b.getAppKey()),g.push("t="+j),b.getSignPromise(a.data,j).then(function(a){g.push("sign="+a);var b=f+"?"+g.join("&");c.resolve(b)})}),c.promise},getSignPromise:function(a,b){var c=this,d=q.defer();return Util.getMTopTokenPromise().then(function(e){var f=c.md5(e+"&"+b+"&"+c.getAppKey()+"&"+a);d.resolve(f)}),d.promise},TOKEN_KEY:"_m_h5_tk",getMTopTokenPromise:function(){var a=q.defer(),b=(window.navigator.userAgent,function(a){return a?a.split("_")[0]:""}),c=this.getCookie(this.TOKEN_KEY);if(c)a.resolve(b(c));else{var d=void 0;switch(this.container.isAlipay&&(d="alipay"),d){case"alipay":var e=function(){AlipayJSBridge.call("getMtopToken",{domain:domain},function(c){a.resolve(b(c.token))})};alipayCall(e);break;default:a.resolve(b(null))}}return a.promise},send:function(a,b,c){var d=this,e="";e="object"==typeof a?a.uid:a.match(/uid=([^=&]+)/)[1],requestHistory[e].status="uninitialized";var f=document.createElement("script"),g="mtopjsonp"+jsonpInc++,h=setTimeout(function(){i("TIMEOUT")},c.timeout);window[g]=function(){arguments[0]&&arguments[0].data&&configPrism(arguments[0].data),c&&sendPerformanceLog(c,"success"),h&&clearTimeout(h),requestHistory[e].status="complete",requestHistory[e].abort=function(){},c&&c.useSufei?S.one(document).fire("sufei:validateData",arguments):S.one(document).fire("sufei:noNeedToValidate",arguments)};var i=function(a){if("complete"!==requestHistory[e].status){c&&sendPerformanceLog(c,a),h&&clearTimeout(h),f&&f.parentNode&&f.parentNode.removeChild(f),requestHistory[e].status="complete",requestHistory[e].abort=function(){};var b="";switch(a){case"TIMEOUT":b="TIMEOUT::\u8d85\u65f6\u9608\u503c"+c.timeout;break;case"ACTIVE_ABORT":b="ACTIVE_ABORT::\u624b\u52a8\u4e2d\u6b62\u8bf7\u6c42";break;case"ABORT":b="ABORT::mtop\u8bf7\u6c42\u5931\u8d25";break;default:b="ERROR::mtop.js\u672a\u77e5\u539f\u56e0"}window[g](S.merge(c,{ret:[b]})),window[g]=function(){delete window[g]}}};if(requestHistory[e].abort=function(){i("ACTIVE_ABORT")},d.beginMtopSend=new Date,tracker.timelineStart&&tracker.timelineStart(c.api),requestHistory[e].status="loading",a.useNative&&this.container.isAlitrip&&this.useNative(c)){var j=a,k=j.needLogin,l=k?"biz/mtop_ecode_sign":"biz/mtop_normal_sign";return j.successCallback=function(a){a="string"==typeof a?JSON.parse(a):a,window[g]&&window[g].call(this,a)},j.failCallback=function(a){a="string"==typeof a?JSON.parse(a):a,window[g]&&window[g].call(this,a)},j.data&&(j.data._platform_from_h5=!0),void JSBridge.pushBack("native:",l,j)}if(a.useNative&&this.container.isAlipay&&this.useNative(c)){if(a.needLogin&&!mtop.isLogin())return void d.goLogin();var m=function(){var b=S.clone(a);b.apiName=b.api,delete b.api,b.apiVersion=b.v,delete b.v,b.needEcodeSign=b.needLogin,delete b.needLogin,b.needWua=b.issec>0,b.isNeedWua=b.issec>0,AlipayJSBridge.call("mtop",b,function(a){a="string"==typeof a?JSON.parse(a):a,window[g]&&window[g].call(this,a)})};return void alipayCall(m)}if(a.useNative&&(this.container.isTaobao||this.container.isTmall)&&this.useNative(c)){var j=S.clone(a);"originaljsonp"===j.type&&(j.type="originaljson"),"jsonp"===j.type&&(j.type="json"),j.param=a.data,delete j.data,j.ecode=j.needLogin?"1":"0",j.needLogin&&(j.sessionOption="AutoLoginAndManualLogin"),delete j.needLogin,j.issec&&(j.isSec=j.issec),j.timer=j.timeout;var n=function(a){a="string"==typeof a?JSON.parse(a):a,window[g]&&window[g].call(this,a)};return void window.WindVane.call("MtopWVPlugin","send",j,function(a){n(a)},function(a){n(a)})}f.src=a.replace("callback=jsonpCallback","callback="+g),f.sync=!0,f.onerror=function(){i("ABORT")},document.getElementsByTagName("head")[0].appendChild(f)},md5:function(){var a=function(a,b){return a<<b|a>>>32-b},b=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},c=function(a,b,c){return a&b|~a&c},d=function(a,b,c){return a&c|b&~c},e=function(a,b,c){return a^b^c},f=function(a,b,c){return b^(a|~c)},g=function(d,e,f,g,h,i,j){return d=b(d,b(b(c(e,f,g),h),j)),b(a(d,i),e)},h=function(c,e,f,g,h,i,j){return c=b(c,b(b(d(e,f,g),h),j)),b(a(c,i),e)},i=function(c,d,f,g,h,i,j){return c=b(c,b(b(e(d,f,g),h),j)),b(a(c,i),d)},j=function(c,d,e,g,h,i,j){return c=b(c,b(b(f(d,e,g),h),j)),b(a(c,i),d)},k=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},l=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},m=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},n=function(a){var c,d,e,f,n,o,p,q,r,s=[],t=7,u=12,v=17,w=22,x=5,y=9,z=14,A=20,B=4,C=11,D=16,E=23,F=6,G=10,H=15,I=21;for(a=m(a),s=k(a),o=1732584193,p=4023233417,q=2562383102,r=271733878,c=0;c<s.length;c+=16)d=o,e=p,f=q,n=r,o=g(o,p,q,r,s[c+0],t,3614090360),r=g(r,o,p,q,s[c+1],u,3905402710),q=g(q,r,o,p,s[c+2],v,606105819),p=g(p,q,r,o,s[c+3],w,3250441966),o=g(o,p,q,r,s[c+4],t,4118548399),r=g(r,o,p,q,s[c+5],u,1200080426),q=g(q,r,o,p,s[c+6],v,2821735955),p=g(p,q,r,o,s[c+7],w,4249261313),o=g(o,p,q,r,s[c+8],t,1770035416),r=g(r,o,p,q,s[c+9],u,2336552879),q=g(q,r,o,p,s[c+10],v,4294925233),p=g(p,q,r,o,s[c+11],w,2304563134),o=g(o,p,q,r,s[c+12],t,1804603682),r=g(r,o,p,q,s[c+13],u,4254626195),q=g(q,r,o,p,s[c+14],v,2792965006),p=g(p,q,r,o,s[c+15],w,1236535329),o=h(o,p,q,r,s[c+1],x,4129170786),r=h(r,o,p,q,s[c+6],y,3225465664),q=h(q,r,o,p,s[c+11],z,643717713),p=h(p,q,r,o,s[c+0],A,3921069994),o=h(o,p,q,r,s[c+5],x,3593408605),r=h(r,o,p,q,s[c+10],y,38016083),q=h(q,r,o,p,s[c+15],z,3634488961),p=h(p,q,r,o,s[c+4],A,3889429448),o=h(o,p,q,r,s[c+9],x,568446438),r=h(r,o,p,q,s[c+14],y,3275163606),q=h(q,r,o,p,s[c+3],z,4107603335),p=h(p,q,r,o,s[c+8],A,1163531501),o=h(o,p,q,r,s[c+13],x,2850285829),r=h(r,o,p,q,s[c+2],y,4243563512),q=h(q,r,o,p,s[c+7],z,1735328473),p=h(p,q,r,o,s[c+12],A,2368359562),o=i(o,p,q,r,s[c+5],B,4294588738),r=i(r,o,p,q,s[c+8],C,2272392833),q=i(q,r,o,p,s[c+11],D,1839030562),p=i(p,q,r,o,s[c+14],E,4259657740),o=i(o,p,q,r,s[c+1],B,2763975236),r=i(r,o,p,q,s[c+4],C,1272893353),q=i(q,r,o,p,s[c+7],D,4139469664),p=i(p,q,r,o,s[c+10],E,3200236656),o=i(o,p,q,r,s[c+13],B,681279174),r=i(r,o,p,q,s[c+0],C,3936430074),q=i(q,r,o,p,s[c+3],D,3572445317),p=i(p,q,r,o,s[c+6],E,76029189),o=i(o,p,q,r,s[c+9],B,3654602809),r=i(r,o,p,q,s[c+12],C,3873151461),q=i(q,r,o,p,s[c+15],D,530742520),p=i(p,q,r,o,s[c+2],E,3299628645),o=j(o,p,q,r,s[c+0],F,4096336452),r=j(r,o,p,q,s[c+7],G,1126891415),q=j(q,r,o,p,s[c+14],H,2878612391),p=j(p,q,r,o,s[c+5],I,4237533241),o=j(o,p,q,r,s[c+12],F,1700485571),r=j(r,o,p,q,s[c+3],G,2399980690),q=j(q,r,o,p,s[c+10],H,4293915773),p=j(p,q,r,o,s[c+1],I,2240044497),o=j(o,p,q,r,s[c+8],F,1873313359),r=j(r,o,p,q,s[c+15],G,4264355552),q=j(q,r,o,p,s[c+6],H,2734768916),p=j(p,q,r,o,s[c+13],I,1309151649),o=j(o,p,q,r,s[c+4],F,4149444226),r=j(r,o,p,q,s[c+11],G,3174756917),q=j(q,r,o,p,s[c+2],H,718787259),p=j(p,q,r,o,s[c+9],I,3951481745),o=b(o,d),p=b(p,e),q=b(q,f),r=b(r,n);var J=l(o)+l(p)+l(q)+l(r);return J.toLowerCase()};return n}()},resultHandler=function(a){a=a||{};try{var b=a.ret[0].split("::"),c=a.data,d=b[0],e=b[1]&&b[1].split("##").pop()||""}catch(f){return{code:"FAIL_RET_DATA_ERROR",status:"FAIL_RET_DATA_ERROR",isSuccess:!1,message:"\u8bf7\u6c42\u5f02\u5e38",data:null}}return{api:a.api,v:a.v,code:d,status:d,isSuccess:"SUCCESS"===d,message:e,data:c}},mtop={Util:Util,name:"h5ApiUpdate.do",history:requestHistory,request:function(a,b){b=b||q;var c=b.defer(),d=a.api||a.url,e=a.v||a.version,f=a.data||{},g=S.mix({type:"originaljsonp"},a.params||{});g.useNative=void 0===g.useNative?!0:g.useNative;var h=this.getApi(d,e,f,g,function(a){var b=resultHandler(a);b.isSuccess?c.resolve(b):c.reject(b)},function(a){var b=resultHandler(a);c.reject(b)});return c.promise.request=h,c.promise},abortAll:function(){for(var a in requestHistory)"complete"!==requestHistory[a].status&&requestHistory[a].abort()},getApi:function(a,b,c,d,e,f){d=d||{},c=insertPrism(c);var g={api:a,v:b,data:c};S.mix(g,d),g.uid=randomUID(),g.type=d.type||"originaljsonp",g.useNative=void 0===d.useNative?!0:d.useNative,g.alipay=void 0===d.alipay?!1:d.alipay,g.taobao=void 0===d.taobao?!1:d.taobao,g.alitrip=void 0===d.alitrip?!0:d.alitrip,g.timeout=g.timeout||2e4;var h={timeline:{startTime:+new Date},uid:g.uid};return requestHistory[g.uid]=h,Util.request(g,e,f),h},isLogin:function(){return!!this.getNickFromCookie()},isLoginAsync:function(){var a=q.defer(),b=[],c=!1;return function(d,e){var f=this;if(c||-1==location.href.indexOf(".alitrip.")||JSBridge.isAlitrip)d&&d.call(e||f,f.isLogin()),a.resolve(f.isLogin());else{if(!b.length){window.__loginAsync=function(d){c=!0,S.each(b,function(b){b.callback&&b.callback.call(b.context||f,f.isLogin(),d),a.resolve(f.isLogin(),d)})};var g=document.createElement("script");g.src="https://login.taobao.com/jump?target=https%3a%2f%2fwww.alitrip.com%2fgo%2frgn%2ftrip%2falitrip_tbpass_jump.php",g.sync=!0,g.onerror=function(){window.__loginAsync.call(f,"error")},document.getElementsByTagName("head")[0].appendChild(g)}b.push({callback:d,context:e})}return a.promise}}(),getNickFromCookie:function(){var a="",b=Util.getCookie("_w_tb_nick"),c=Util.getCookie("_nk_")||Util.getCookie("snk");return b&&b.length>0&&"null"!=b?a=decodeURIComponent(b):c&&c.length>0&&"null"!=c&&(a=unescape(unescape(c).replace(/\\u/g,"%u"))),a},getNick:function(){var a=this,b=q.defer();if(Util.container.isAlipay){var c=function(){var c=a.getNickFromCookie();c?b.resolve(c):AlipayJSBridge.call("getConfig",{configKeys:["uuid"]},function(a){try{b.resolve(a.data.uuid)}catch(c){b.reject("AlipayJSBridge get uuid failed.")}})};alipayCall(c)}else{var d="",e=Util.getCookie("_w_tb_nick"),f=Util.getCookie("_nk_")||Util.getCookie("snk");e&&e.length>0&&"null"!=e?d=decodeURIComponent(e):f&&f.length>0&&"null"!=f&&(d=unescape(unescape(f).replace(/\\u/g,"%u"))),d?b.resolve(d):b.reject(null)}return b.promise},loginedRequest:function(a,b,c,d){b&&"function"!=typeof b&&(d=b.beforeLogin,c=b.fail,b=b.succ);var e=function(){a.retryed?c.call(null,{errcode:"NOT_LOGINED",message:"\u8be5\u9875\u9762\u9700\u8981\u767b\u5f55\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5!"}):(d&&d.call(),Util.goLogin())};if(a.useNative="undefined"==typeof a.useNative?!0:a.useNative,a.useNative&&Util.useNative(options))a.needLogin=!0;else if(!this.isLogin())return void e();a.timeout=a.timeout||2e4,Util.request(a,b,c)},executeCall:function(){if(requestQueue.length){var a=requestQueue.shift();Util.sendRequest.apply(Util,a)}},goLogin:Util.goLogin};return mtop.isLoginAsync(),mtop},{requires:["mpi/base/q/index","mpi/base/jsbridge/index","mpi/base/tracker/index"]}),function(a,b,c){var d={parseQueryString:function(a){var b={};if(a=void 0!==a?a:c.search,"string"==typeof a&&a.length>0){"?"===a[0]&&(a=a.substring(1)),a=a.split("&");for(var d=0,e=a.length;e>d;d++){var f,g,h=a[d],i=h.indexOf("=");i>=0?(f=h.substr(0,i),g=h.substr(i+1)):(f=h,g=""),g=decodeURIComponent(g),void 0===b[f]?b[f]=g:b[f]instanceof Array?b[f].push(g):b[f]=[b[f],g]}}return b},stringifyQueryString:function(a){var b=[];return a&&a.constructor===Object&&Object.keys(a).forEach(function(c){if(Array.isArray(a[c]))for(var d=0,e=a[c].length;e>d;d++)b.push([encodeURIComponent(c),encodeURIComponent(a[c][d])].join("="));else b.push([encodeURIComponent(c),encodeURIComponent(a[c])].join("="))}),b.join("&")},setQuery:function(a,b){var c=this.parseQueryString(a);return Object.keys(b).forEach(function(a){c[a]=b[a],b[a]||delete c[a]}),this.stringifyQueryString(c)},cookie:{set:function(a,d,e){var f=c.hostname,g=new Date;e=e||1,g.setTime(g.getTime()+60*e*60*1e3),b.cookie=a+"="+encodeURIComponent(d)+";path=../;domain="+f+";expires="+g.toGMTString()},get:function(a){for(var c=a+"=",d=b.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(c))return f.substring(c.length,f.length)}return null},clear:function(a){this.set(a,"",-1)}}},e=function(){var e,f,g=a._$abtest$_,h=b.querySelector('meta[name="alitrip-project-version"]');if(h){var i,j=h.getAttribute("content")||"",k=d.cookie,l=k.get("_abtest"),m=k.get("_abtestBucket");g?(e=g.name,f=g.bucket,k.set("_abtest",e),k.set("_abtestBucket",f)):l&&m&&(e=l,f=m);try{i=d.setQuery(c.search,{_abtest:e,_abtestBucket:f,_projVer:j}),history.replaceState({},b.title,"?"+i+c.hash)}catch(n){}}};e()}(window,document,location),function(){function isStartWith(a,b){return 0==a.indexOf(b)}function isEndWith(a,b){var c=a.length,d=b.length;return c>=d&&a.indexOf(b)==c-d}function trim(a){return isString(a)?a.replace(/^\s+|\s+$/g,""):""}function tryToDecodeURIComponent(a,b){var c=b||"";if(a)try{c=decodeURIComponent(a)}catch(d){}return c}function obj2param(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&(c=""+a[b],d.push(isStartWith(b,s_plain_obj)?c:b+"="+encodeURIComponent(c)));return d.join("&")}function arr2param(a){var b,c,d,e=[],f=a.length;for(d=0;f>d;d++)b=a[d][0],c=a[d][1],e.push(isStartWith(b,s_plain_obj)?c:b+"="+encodeURIComponent(c));return e.join("&")}function arr2obj(a){var b,c,d,e={},f=a.length;for(d=0;f>d;d++)b=a[d][0],c=a[d][1],e[b]=c;return e}function isContain(a,b){return a.indexOf(b)>-1}function isNumber(a){return"number"==typeof a}function isUnDefined(a){return"undefined"==typeof a}function isString(a){return"string"==typeof a}function isArray(a){return"[object Array]"===Object.prototype.toString.call(a)}function tryToGetAttribute(a,b){return a&&a.getAttribute?a.getAttribute(b)||"":""}function tryToGetHref(a){var b;try{b=trim(a.getAttribute("href",2))}catch(c){}return b||""}function getExParams(){var a=doc.getElementById("tb-beacon-aplus");return tryToGetAttribute(a,"exparams").replace(/&amp;/g,"&").replace(/\buserid=/,"uidaplus=")}function getMetaTags(){return _head_node=_head_node||doc.getElementsByTagName("head")[0],_meta_nodes||(_head_node?_meta_nodes=_head_node.getElementsByTagName("meta"):[])}function parseMetaContent(a,b){var c,d,e,f=a.split(";"),g=f.length;for(c=0;g>c;c++)d=f[c].split("="),e=trim(d[0]),e&&(b[e]=tryToDecodeURIComponent(trim(d[1])))}function getCookie(a){var b=doc.cookie.match(new RegExp("\\b"+a+"=([^;]+)"));return b?b[1]:""}function getSPMFromUrl(a){var b,c=a.match(new RegExp("\\?.*spm=([\\w\\.\\-\\*]+)"));return c&&(b=c[1])&&4==b.split(".").length?b:null}function makeCacheNum(){return Math.floor(268435456*Math.random()).toString(16)}function makePVId(){var a="g_aplus_pv_id",b="",c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if(!win[a]){for(;b.length<6;)b+=c.substr(Math.floor(62*Math.random()),1);win[a]=b}return win[a]}function getMetaAtpData(){var a,b,c,d=getMetaTags(),e=d.length;for(a=0;e>a;a++)b=d[a],"atp-beacon"==tryToGetAttribute(b,"name")&&(c=tryToGetAttribute(b,"content"),parseMetaContent(c,_atp_beacon_data));_atp_beacon_data_params=obj2param(_atp_beacon_data)}function getMetaWaiting(){var a,b,c,d=getMetaTags(),e=d.length;for(a=0;e>a;a++)if(b=d[a],"aplus-waiting"==tryToGetAttribute(b,"name")){c=tryToGetAttribute(b,"content");break}return c}function isOnePage(){var a,b,c=getMetaTags(),d=c.length,e="-1";for(a=0;d>a;a++)if(b=c[a],"isonepage"==tryToGetAttribute(b,"name")){e=tryToGetAttribute(b,"content");break}return e}function getMetaOffline(){var a,b,c,d=getMetaTags(),e=d.length;for(a=0;e>a;a++)if(b=d[a],"aplus-offline"==tryToGetAttribute(b,"name")){c=tryToGetAttribute(b,"content");break}return c}function getMetaForbidPost(){var a,b,c,d=getMetaTags(),e=d.length;for(a=0;e>a;a++)if(b=d[a],"aplus-forbidpost"==tryToGetAttribute(b,"name")){c=tryToGetAttribute(b,"content");break}return c}function makeChkSum(a){a=(a||"").split("#")[0].split("?")[0];var b=a.length,c=function(a){var b,c=a.length,d=0;for(b=0;c>b;b++)d=31*d+a.charCodeAt(b);return d};return b?c(b+"#"+a.charCodeAt(b-1)):-1}function onDOMReady(a){var b=win.KISSY;b?b.ready(a):win.jQuery?jQuery(doc).ready(a):"complete"===doc.readyState?a():addEventListener(win,"load",a)}function recordValInWindowName(){var a,b;!is_in_iframe&&is_https&&(is_login_page&&page_referrer?(a=page_referrer,b=nameStorage.getItem(KEY.NAME_STORAGE.REFERRER_PV_ID)):(a=page_url,b=pvid),nameStorage.setItem(KEY.NAME_STORAGE.REFERRER,a),nameStorage.setItem(KEY.NAME_STORAGE.REFERRER_PV_ID,b))}function addEventListener(a,b,c){a[onevent]((atta?"on":"")+b,function(a){a=a||win.event;var b=a.target||a.srcElement;c(a,b)},s_false)}function atp_inIframeException(){var a,b,c=[];for(a=0,b=c.length;b>a;a++)if(-1!=pathname.indexOf(c[a]))return s_true;var d=/^https?:\/\/[\w\.]+\.(taobao|tmall|etao|tao123|juhuasuan)\.com/i;return!d.test(page_referrer)}function cleanParams(a){var b,c,d,e,f=[],g={};for(b=a.length-1;b>=0;b--)c=a[b],d=c[0],d!=s_plain_obj&&g.hasOwnProperty(d)||(e=c[1],("aplus"==d||""!=e)&&(f.unshift([d,e]),g[d]=1));return f}function cleanParamsForWindvane(a){var b,c,d,e,f=[],g={logtype:!0,cache:!0,scr:!0,"spm-cnt":!0};for(b=a.length-1;b>=0;b--)c=a[b],d=c[0],e=c[1],isStartWith(d,s_plain_obj)||g[d]||f.unshift([d,e]);return f}function tblogSend(a,b){var c,d,e;if(b){if(b=cleanParams(b),isWindVane){e=cleanParamsForWindvane(b);var f,g={},h=(getSPMFromUrl(page_url),getSPMFromUrl(page_referrer)),i=isOnePage(),j=i.split("|"),k=j[0],l=j[1]?j[1]:"";try{d=arr2obj(e),f=JSON.stringify(d),"{}"==f&&(f="")}catch(m){f=""}g.functype="2001",g.urlpagename=l,g.url=loc.href,g.spmcnt=(spm_ab||"0.0")+".0.0",g.spmpre=h||"",g.lzsid="",g.cna=acookie_cna||"",g.extendargs=f,g.isonepage=k,WindVane.call("WVTBUserTrack","toUT",g),win[s_goldlog].windVaneData=g}return isWindVane&&is_ali_app_tb||(c=goldlog.send(a,b)),c}}function mkPlainKey(){return s_plain_obj+Math.random()}function addScript(a,b){var c="script",d=doc.createElement(c);d.type="text/javascript",d.async=!0,d.src=is_https?b||a:a;var e=doc.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e)}function checkLS(){var a=!1;if("localStorage"in win&&null!=win.localStorage)try{localStorage.setItem("test","test"),localStorage.removeItem("test"),a=!0}catch(b){}return a}function isUseLSProxy(){if(is_https||is_ali_app)return!1;var a=ua.split(" Safari/");return 2!=a.length?!1:(a[1]=trim(a[1]),!isForbidPost&&checkLS()&&win.postMessage&&!a[1].match(/[\d\.]+?\s+.+/)&&ua.indexOf("AppleWebKit")>-1&&ua.match(/\bVersion\/\d+/)&&!ua.match(/\bChrome\/\d+/)&&!ua.match(/TencentTraveler|QQBrowser/)&&!ua.match(/UCBrowser|UCWEB/))}function getSPMProtocolFromMeta(){var a,b,c,d,e=getMetaTags();for(a=0,b=e.length;b>a;a++)c=e[a],d=tryToGetAttribute(c,"name"),d==s_SPM_ATTR_NAME&&(spm_protocol=tryToGetAttribute(c,s_SPM_DATA_PROTOCOL))}function getMetaSPMData(a){var b,c,d,e,f,g,h=getMetaTags();if(h)for(b=0,c=h.length;c>b;b++)if(e=h[b],f=tryToGetAttribute(e,"name"),f==a)return page_global_spm_id_origin=tryToGetAttribute(e,"content"),page_global_spm_id_origin.indexOf(":")>=0&&(d=page_global_spm_id_origin.split(":"),spm_protocol="i"==d[0]?"i":"u",page_global_spm_id_origin=d[1]),g=tryToGetAttribute(e,s_SPM_DATA_PROTOCOL),g&&(spm_protocol="i"==g?"i":"u"),spm_ab=page_global_spm_id_origin,s_true;return s_false}function ifAdd(a,b){var c,d,e,f,g=b.length;for(c=0;g>c;c++)d=b[c],e=d[0],f=d[1],f&&a.push([e,f])}function compareVersion(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),e>d)return-1;if(d>e)return 1}return 0}function callback(a,b){isAndroid&&compareVersion(osVersion,"2.4.0")<0?setTimeout(function(){a&&a(b)},1):a&&a(b)}function init_getGlobalSPMId(){if(!isUnDefined(spm_ab))return spm_ab;if(spm_a&&spm_b)return spm_a=spm_a.replace(/^{(\w+)}$/g,"$1"),spm_b=spm_b.replace(/^{(\w+)}$/g,"$1"),wh_in_page=s_true,spm_ab=spm_a+"."+spm_b,getSPMProtocolFromMeta(),goldlog.spm_ab=[spm_a,spm_b],spm_ab;{var a;doc.getElementsByTagName("head")[0]}if(getMetaSPMData(s_SPM_ATTR_NAME)||getMetaSPMData("spm-id"),spm_ab=spm_ab||default_ab,!spm_ab)return spm_ab;var b,c=doc.getElementsByTagName("body");return a=spm_ab.split("."),goldlog.spm_ab=a,c=c&&c.length?c[0]:null,c&&(b=tryToGetAttribute(c,s_SPM_ATTR_NAME),b?(spm_ab=a[0]+"."+b,goldlog.spm_ab=[a[0],b]):1==a.length&&(spm_ab=default_ab)),spm_ab}function init_loadScripts(){var a="laiwang",b="/ilw/a/lwlog.js?v=140709";isContain(loc.href.split("?")[0],a)&&addScript(url_g_alicdn+b)}function init_windVane(){var WV_Core={call:function(a,b,c,d,e,f){var g,h;return lib.promise&&(h=lib.promise.deferred()),g=f>0?setTimeout(function(){WV_Core.onFailure(g,{ret:"TIMEOUT"})},f):WV_Private.getSid(),c.sid=g,WV_Private.registerCall(g,d,e,h),isAndroid?compareVersion(wvVersion,"2.7.0")>=0?WV_Private.callMethodByPrompt(a,b,WV_Private.buildParam(c),g+""):WindVane_Native&&WindVane_Native.callMethod&&WindVane_Native.callMethod(a,b,WV_Private.buildParam(c),g+""):isIOS&&WV_Private.callMethodByIframe(a,b,WV_Private.buildParam(c),g+""),h?h.promise():void 0},fireEvent:function(a,b){
var c=doc.createEvent("HTMLEvents");c.initEvent(a,!1,!0),c.param=WV_Private.parseParam(b),doc.dispatchEvent(c)},getParam:function(a){return WV_Private.params[PARAM_PREFIX+a]||""},onSuccess:function(a,b){clearTimeout(a);var c=WV_Private.unregisterCall(a),d=c.success,e=c.deferred,f=WV_Private.parseParam(b);callback(function(a){d&&d(a),e&&e.resolve(a)},f.value||f),WV_Private.onComplete(a)},onFailure:function(a,b){clearTimeout(a);var c=WV_Private.unregisterCall(a),d=c.failure,e=c.deferred,f=WV_Private.parseParam(b);callback(function(a){d&&d(a),e&&e.reject(a)},f),WV_Private.onComplete(a)}},WV_Private={params:{},buildParam:function(a){return a&&"object"==typeof a?JSON.stringify(a):a||""},parseParam:function(str){var obj;if(str&&"string"==typeof str)try{obj=JSON.parse(str)}catch(e){obj=eval("("+str+")")}else obj=str||{};return obj},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+inc++},registerCall:function(a,b,c,d){b&&(callbackMap[SUCCESS_PREFIX+a]=b),c&&(callbackMap[FAILURE_PREFIX+a]=c),d&&(callbackMap[DEFERRED_PREFIX+a]=d)},unregisterCall:function(a){var b=SUCCESS_PREFIX+a,c=FAILURE_PREFIX+a,d=DEFERRED_PREFIX+a,e={success:callbackMap[b],failure:callbackMap[c],deferred:callbackMap[d]};return delete callbackMap[b],delete callbackMap[c],e.deferred&&delete callbackMap[d],e},useIframe:function(a,b){var c=IFRAME_PREFIX+a,d=iframePool.pop();d||(d=doc.createElement("iframe"),d.setAttribute("frameborder","0"),d.style.cssText="width:0;height:0;border:0;display:none;"),d.setAttribute("id",c),d.setAttribute("src",b),d.parentNode||setTimeout(function(){doc.body.appendChild(d)},5)},retrieveIframe:function(a){var b=IFRAME_PREFIX+a,c=doc.querySelector("#"+b);iframePool.length>=iframeLimit?doc.body.removeChild(c):iframePool.push(c)},callMethodByIframe:function(a,b,c,d){var e={"selfParam=1":1,sid:this.parseParam(c).sid};e=this.buildParam(e);var f=LOCAL_PROTOCOL+"://"+a+":"+d+"/"+b+"?"+e;this.params[PARAM_PREFIX+d]=c,this.useIframe(d,f)},callMethodByPrompt:function(a,b,c,d){var e=LOCAL_PROTOCOL+"://"+a+":"+d+"/"+b+"?"+c,f=WV_PROTOCOL+":";this.params[PARAM_PREFIX+d]=c,window.prompt(e,f)},onComplete:function(a){isIOS&&this.retrieveIframe(a),delete this.params[PARAM_PREFIX+a]}};for(var key in WV_Core)win[s_goldlog][key]=WindVane[key]=WV_Core[key]}function sendPV(a){var b,c,d=getSPMFromUrl(page_url),e=getSPMFromUrl(page_referrer),f=getCookie("tracknick"),g=getExParams();if(is_use_LS_proxy=isUseLSProxy(),loc_hash=loc.hash,loc_hash&&0==loc_hash.indexOf("#")&&(loc_hash=loc_hash.substr(1)),(!is_in_iframe||atp_inIframeException())&&(c=1==waitingMeta?7:VERSION,b=[[mkPlainKey(),"title="+escape(doc.title)],["pre",page_referrer],["cache",makeCacheNum()],["scr",screen.width+"x"+screen.height],["isbeta",c]],acookie_cna&&b.push([mkPlainKey(),"cna="+acookie_cna]),f&&b.push([mkPlainKey(),"nick="+f]),b.push(["spm-cnt",(spm_ab||"0.0")+".0.0"]),ifAdd(b,[["spm-url",d],["spm-pre",e]]),tblog_data=tblog_data.concat(b),7==c?setTimeout(function(){goldlog.launch({isWait:!0})},6e3):(tblog_data.push([mkPlainKey(),g?g:"aplus"]),ifAdd(tblog_data,[["urlokey",loc_hash],["aunbid",cookie_unb]]),a||ifAdd(tblog_data,[["auto","0"]]),win.g_aplus_pv_req=tblogSend(tblog_beacon_url,tblog_data))),is_in_iframe){getMetaAtpData();var h,i=_atp_beacon_data.on,j="1"==i?"//ac.mmstat.com/y.gif":tblog_beacon_url;"1"!=i&&"2"!=i||!(h=_atp_beacon_data.chksum)||h!==makeChkSum(page_url).toString()||tblogSend(j,tblog_data)}addEventListener(win,"beforeunload",function(){recordValInWindowName()})}var win=window,doc=document,_k="g_tb_aplus_loaded",_launch="g_tb_aplus_launch";if(!doc.getElementsByTagName("body").length)return void setTimeout(arguments.callee,50);if(!win[_k]){win[_k]=1;var url_g_alicdn="//g.alicdn.com",KEY={NAME_STORAGE:{REFERRER:"wm_referrer",REFERRER_PV_ID:"refer_pv_id"}},VERSION="9",loc=location,is_https="https:"==loc.protocol,is_in_iframe=parent!==self,pathname=loc.pathname,isForbidPost=getMetaForbidPost(),use_protocol=is_https?"https://":"http://",tblog_beacon_base=use_protocol+"log.mmstat.com/",tblog_beacon_url=tblog_beacon_base+"m.gif",tblog_data=[["logtype",is_in_iframe?0:1]],page_url=loc.href,page_url_constant=page_url.replace(/[\?#].*/g,""),pvid=makePVId(),loc_hash=loc.hash,s_goldlog="goldlog",ua=navigator.userAgent,lib=win.lib||(win.lib={}),isIOS=/iPhone|iPad|iPod/i.test(ua),isAndroid=/Android/i.test(ua),isWindVane=/WindVane/i.test(ua),osVersion=ua.match(/(?:OS|Android)[\/\s](\d+[._]\d+(?:[._]\d+)?)/i),wvVersion=ua.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),WindVane={},WindVane_Native=win.WindVane_Native,callbackMap={},inc=1,iframePool=[],iframeLimit=3,LOCAL_PROTOCOL="hybrid",WV_PROTOCOL="wv_hybrid",IFRAME_PREFIX="iframe_",SUCCESS_PREFIX="suc_",FAILURE_PREFIX="err_",DEFERRED_PREFIX="defer_",PARAM_PREFIX="param_",page_referrer=doc.referrer,is_login_page=is_https&&(page_url.indexOf("login.m.taobao.com")>=0||page_url.indexOf("login.m.tmall.com")>=0),atta=!!doc.attachEvent,s_attachEvent="attachEvent",s_addEventListener="addEventListener",onevent=atta?s_attachEvent:s_addEventListener,s_false=!1,s_true=!0,is_launched=s_false,s_plain_obj="::-plain-::",refer_pv_id,_head_node,_meta_nodes,acookie_cna=getCookie("cna"),cookie_unb=getCookie("unb"),is_use_LS_proxy=s_false,s_SPM_ATTR_NAME="data-spm",s_SPM_DATA_PROTOCOL="data-spm-protocol",wh_in_page=s_false,default_ab="0.0",page_global_spm_id_origin,spm_protocol,spm_a=win._SPM_a,spm_b=win._SPM_b,spm_ab,_microscope_data={},_atp_beacon_data={},_atp_beacon_data_params,waitingMeta=getMetaWaiting(),goldlog,is_ali_app,is_ali_app_tb,matched;(matched=ua.match(/AliApp\(([A-Z\-]+)\/([\d\.]+)\)/i))&&(is_ali_app=!0,is_ali_app_tb="TB"==matched[1]);var nameStorage=function(){function a(){var a,b=[],f=!0;for(var k in l)l.hasOwnProperty(k)&&(f=!1,a=l[k]||"",b.push(j(k)+h+j(a)));c.name=f?d:e+j(d)+g+b.join(i)}function b(a,b,c){a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(b){c.call(a,b)}))}var c=window;if(c.nameStorage)return c.nameStorage;var d,e="nameStorage:",f=/^([^=]+)(?:=(.*))?$/,g="?",h="=",i="&",j=encodeURIComponent,k=decodeURIComponent,l={},m={};return function(a){if(a&&0===a.indexOf(e)){var b=a.split(/[:?]/);b.shift(),d=k(b.shift())||"";for(var c,g,h,j=b.join(""),m=j.split(i),n=0,o=m.length;o>n;n++)c=m[n].match(f),c&&c[1]&&(g=k(c[1]),h=k(c[2])||"",l[g]=h)}else d=a||""}(c.name),m.setItem=function(b,c){b&&"undefined"!=typeof c&&(l[b]=String(c),a())},m.getItem=function(a){return l.hasOwnProperty(a)?l[a]:null},m.removeItem=function(b){l.hasOwnProperty(b)&&(l[b]=null,delete l[b],a())},m.clear=function(){l={},a()},m.valueOf=function(){return l},m.toString=function(){var a=c.name;return 0===a.indexOf(e)?a:e+a},b(c,"beforeunload",function(){a()}),m}();page_referrer=doc.referrer||nameStorage.getItem(KEY.NAME_STORAGE.REFERRER)||"",osVersion=osVersion?(osVersion[1]||"0.0.0").replace(/\_/g,"."):"0.0.0",wvVersion=wvVersion?(wvVersion[1]||"0.0.0").replace(/\_/g,"."):"0.0.0",goldlog={version:VERSION,referrer:page_referrer,_d:{},_microscope_data:_microscope_data,getCookie:getCookie,tryToGetAttribute:tryToGetAttribute,tryToGetHref:tryToGetHref,isNumber:isNumber,nameStorage:nameStorage,launch:function(a){if(!win[_launch]){win[_launch]=s_true;var b,c,d,e=getExParams(),f=1==waitingMeta;a&&a.isWait&&f?(d=7,delete a.isWait):f?d=8:f||(d=5);for(b in a)a.hasOwnProperty(b)&&(c=a[b])&&tblog_data.push([b,c]);tblog_data.push(["isbeta",d]),tblog_data.push([mkPlainKey(),e?e:"aplus"]),ifAdd(tblog_data,[["urlokey",loc_hash],["aunbid",cookie_unb]]),win.g_aplus_pv_req=tblogSend(tblog_beacon_url,tblog_data)}},send:function(a,b){var c,d=new Image,e="_img_"+Math.random(),f=-1==a.indexOf("?")?"?":"&",g=b?isArray(b)?arr2param(b):obj2param(b):"";return win[e]=d,d.onload=d.onerror=function(){win[e]=null},d.src=c=g?a+f+g:a,d=null,c},record:function(a,b,c,d){if(window._prism_lk){var e=encodeURIComponent(JSON.stringify(window._prism_lk));c&&(c+="&_prism_lk="+e)}d=arguments[3]||"";var f,g,h="?",i=s_false,j="//wgo.mmstat.com/",k="//wgm.mmstat.com/",l=makeCacheNum(),m="",n=(spm_ab||"0.0")+".0.0";if("ac"==a)f="//ac.mmstat.com/1.gif",i=isStartWith(d,"A")&&d.substring(1)==makeChkSum(b);else if(isStartWith(a,"/"))i=isStartWith(d,"H")&&d.substring(1)==makeChkSum(a),f=j+a.substring(1),g=2,m+="&spm-cnt="+n;else if(isEndWith(a,".gif"))f=tblog_beacon_base+a;else{if("aplus"!=a)return s_false;f=k+"mx.gif",g=1}if(!i&&"%"!=d&&makeChkSum(page_url_constant)!=d)return s_false;var o=location.search.slice(1);if(c=(c||"")+(o?"&_h5params="+encodeURIComponent(o):"")+(loc_hash?"&urlokey="+encodeURIComponent(loc_hash):"")+(cookie_unb?"&aunbid="+encodeURIComponent(cookie_unb):""),0==c.indexOf("&")&&(c=c.substr(1)),f+=h+"cache="+l+"&gmkey="+encodeURIComponent(b)+"&gokey="+encodeURIComponent(c)+"&cna="+acookie_cna+"&isbeta="+VERSION+m,g&&(f+="&logtype="+g),isWindVane){var p,q={},r={gmkey:b,gokey:c,isbeta:VERSION},s=isOnePage(),t=s.split("|"),u=t[0],v=t[1]?t[1]:"";try{p=JSON.stringify(r),"{}"==p&&(p="")}catch(w){p=""}q.functype="2101",q.logkey=a,q.logkeyargs=p,q.urlpagename=v,q.url=loc.href,q.cna=acookie_cna||"",q.extendargs="",q.isonepage=u,WindVane.call("WVTBUserTrack","toUT",q)}return goldlog.send(f)},sendPV:function(){tblog_data=[["logtype",is_in_iframe?0:1]],spm_ab=void 0,spm_ab=init_getGlobalSPMId(),sendPV(!1)}},win[s_goldlog]=goldlog,init_getGlobalSPMId(),init_loadScripts(),isWindVane&&init_windVane(),sendPV(!0)}}(),function(){function a(a){var b,c;try{return b=[].slice.call(a)}catch(d){b=[],c=a.length;for(var e=0;c>e;e++)b.push(a[e]);return b}}function b(a,b){return a&&a.getAttribute?a.getAttribute(b)||"":""}function c(a,b,c){if(a&&a.setAttribute)try{a.setAttribute(b,c)}catch(d){}}function d(a,b){if(a&&a.removeAttribute)try{a.removeAttribute(b)}catch(d){c(a,b,"")}}function e(a,b){return 0==a.indexOf(b)}function f(a){for(var b=["javascript:","tel:","sms:","mailto:","tmall://"],c=0,d=b.length;d>c;c++)if(e(a,b[c]))return!0}function g(a){return"string"==typeof a}function h(a){return"[object Array]"===Object.prototype.toString.call(a)}function i(a){return"number"==typeof a}function j(a,b){return a.indexOf(b)>=0}function k(a,b){return a.indexOf(b)>-1}function l(a,b){for(var c=0,d=b.length;d>c;c++)if(k(a,b[c]))return ra;return sa}function m(a){return g(a)?a.replace(/^\s+|\s+$/g,""):""}function n(a){return"undefined"==typeof a}function o(a,b){var c=b||"";if(a)try{c=decodeURIComponent(a)}catch(d){}return c}function p(){return ka=ka||pa.getElementsByTagName("head")[0],la||(ka?la=ka.getElementsByTagName("meta"):[])}function q(a,b){var c,d,e=a.split(";"),f=e.length;for(c=0;f>c;c++)d=e[c].split("="),b[m(d[0])||Ea]=o(m(d.slice(1).join("=")))}function r(){var a,c,d,e,f=p();for(a=0,c=f.length;c>a;a++)d=f[a],e=b(d,"name"),e==Oa&&(ma=b(d,Pa))}function s(a){var c,d,f,g,h,i,j=p();if(j)for(c=0,d=j.length;d>c;c++)if(g=j[c],h=b(g,"name"),h==a)return ha=b(g,"content"),ha.indexOf(":")>=0&&(f=ha.split(":"),ma="i"==f[0]?"i":"u",ha=f[1]),i=b(g,Pa),i&&(ma="i"==i?"i":"u"),ia=e(ha,"110"),ga=ia?Ca:ha,ra;return sa}function t(){var a,c,d,e=p(),f=e.length;for(a=0;f>a;a++)if(c=e[a],"aplus-touch"==b(c,"name")){d=b(c,"content");break}return d}function u(){return Math.floor(268435456*Math.random()).toString(16)}function v(a){var b,c,d=[];for(b in a)a.hasOwnProperty(b)&&(c=""+a[b],d.push(e(b,Ea)?c:b+"="+encodeURIComponent(c)));return d.join("&")}function w(a){var b,c,d,f=[],g=a.length;for(d=0;g>d;d++)b=a[d][0],c=a[d][1],f.push(e(b,Ea)?c:b+"="+encodeURIComponent(c));return f.join("&")}function x(a){var b;try{b=m(a.getAttribute("href",2))}catch(c){}return b||""}function y(a,b,c){return"tap"==b?void z(a,c):void a[Ka]((Ha?"on":"")+b,function(a){a=a||oa.event;var b=a.target||a.srcElement;c(b)},sa)}function z(a,b){var c="ontouchend"in document.createElement("div"),d=c?"touchstart":"mousedown",e=oa.KISSY;e&&e.__touchModAdded&&e.one&&c?e.one(a).on("tap",function(a){b&&b(a.target)}):y(a,d,function(a){b&&b(a)})}function A(a){var b=oa.KISSY;b?b.ready(a):oa.jQuery?jQuery(pa).ready(a):"complete"===pa.readyState?a():y(oa,"load",a)}function B(a,b){var c,d=new Image,e="_img_"+Math.random(),f=-1==a.indexOf("?")?"?":"&",g=b?h(b)?w(b):v(b):"";return oa[e]=d,d.onload=d.onerror=function(){oa[e]=null},d.src=c=g?a+f+g:a,d=null,c}function C(){var a;if(Aa&&!Va&&(a=ta.match(/^[^?]+\?[^?]*spm=([^&#?]+)/),a&&(Va=a[1]+"_")),!n(ga))return ga;if(oa._SPM_a&&oa._SPM_b)return ea=oa._SPM_a.replace(/^{(\w+)}$/g,"$1"),fa=oa._SPM_b.replace(/^{(\w+)}$/g,"$1"),La=ra,ga=ea+"."+fa,r(),ga;if(s(Oa)||s("spm-id"),!ga)return Da=!0,ga=Ca,Ca;var c,d,e=pa.getElementsByTagName("body");return e=e&&e.length?e[0]:null,e&&(c=b(e,Oa),c&&(d=ga.split("."),ga=d[0]+"."+c)),k(ga,".")||(Da=!0,ga=Ca),ga}function D(a){var b,c,d,e,f,g,h=pa.getElementsByTagName("*");for(b=[];a&&1==a.nodeType;a=a.parentNode)if(g=a.id){for(e=0,c=0;c<h.length;c++)if(f=h[c],f.id==g){e++;break}if(b.unshift(a.tagName.toLowerCase()+'[@id="'+g+'"]'),1==e)return b.unshift("/"),b.join("/")}else{for(c=1,d=a.previousSibling;d;d=d.previousSibling)d.tagName==a.tagName&&c++;b.unshift(a.tagName.toLowerCase()+"["+c+"]")}return b.length?"/"+b.join("/"):null}function E(a){var b=Ma[D(a)];return b?b.spmc:""}function F(c,d){var e,f,g,h,i,j,k,l,m,n=[];for(e=a(c.getElementsByTagName("a")),f=a(c.getElementsByTagName("area")),h=e.concat(f),k=0,l=h.length;l>k;k++){for(j=!1,i=g=h[k];(i=i.parentNode)&&i!=c;)if(b(i,Oa)){j=!0;break}j||(m=b(g,Sa),d||"t"==m?d&&"t"==m&&n.push(g):n.push(g))}return n}function G(a,c,d,f){var h,k,l,m,n,o,p,q,r,s,t,u,v,w,y;if(b(a,"data-spm-delay"))return void a.setAttribute("data-spm-delay","");if(c=c||a.getAttribute(Oa)||"",c&&(h=F(a,f),0!==h.length)){if(l=c.split("."),v=e(c,"110")&&3==l.length,v&&(w=l[2],l[2]="w"+(w||"0"),c=l.join(".")),g(r=C())&&r.match(/^[\w\-\*]+(\.[\w\-\*]+)?$/))if(j(c,".")){if(!e(c,r)){for(m=r.split("."),l=c.split("."),t=0,s=m.length;s>t;t++)l[t]=m[t];c=l.join(".")}}else j(r,".")||(r+=".0"),c=r+"."+c;if(c.match&&c.match(/^[\w\-\*]+\.[\w\-\*]+\.[\w\-\*]+$/)){var z=f?Ua:Ta;for(y=parseInt(b(a,z))||0,u=0,n=y,s=h.length;s>u;u++)k=h[u],o=x(k),(f||o)&&(v&&k.setAttribute(Wa,w),(p=k.getAttribute(Xa))?N(k,p,d):(n++,q=P(k)||n,f&&(q="at"+((i(q)?1e3:"")+q)),p=c+"."+q,N(k,p,d)));a.setAttribute(z,n)}}}function H(a){var b,c=["mclick.simba.taobao.com","click.simba.taobao.com","click.tanx.com","click.mz.simba.taobao.com","click.tz.simba.taobao.com","redirect.simba.taobao.com","rdstat.tanx.com","stat.simba.taobao.com","s.click.taobao.com"],d=c.length;for(b=0;d>b;b++)if(-1!=a.indexOf(c[b]))return!0;return!1}function I(a){return a?!!a.match(/^[^\?]*\balipay\.(?:com|net)\b/i):sa}function J(a){return a?!!a.match(/^[^\?]*\balipay\.(?:com|net)\/.*\?.*\bsign=.*/i):sa}function K(a){for(var c;(a=a.parentNode)&&a.tagName!=Ga;)if(c=b(a,Pa))return c;return""}function L(a,b){if(a&&/&?\bspm=[^&#]*/.test(a)&&(a=a.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")),!b)return a;var c,d,e,f,g,h,i,j="&";if(-1!=a.indexOf("#")&&(e=a.split("#"),a=e.shift(),d=e.join("#")),f=a.split("?"),g=f.length-1,e=f[0].split("//"),e=e[e.length-1].split("/"),h=e.length>1?e.pop():"",g>0&&(c=f.pop(),a=f.join("?")),c&&g>1&&-1==c.indexOf("&")&&-1!=c.indexOf("%")&&(j="%26"),a=a+"?spm="+Va+b+(c?j+c:"")+(d?"#"+d:""),i=k(h,".")?h.split(".").pop().toLowerCase():""){if({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1}.hasOwnProperty(i))return 0;!c&&1>=g&&(d||{htm:1,html:1,php:1}.hasOwnProperty(i)||(a+="&file="+h))}return a}function M(a){return a&&ta.split("#")[0]==a.split("#")[0]}function N(a,c,d){if(a.setAttribute(Xa,c),!d&&!b(a,Ra)){var g=x(a),h="i"==(b(a,Pa)||K(a)||ma),i=ya+"tbspm.1.1?logtype=2&spm=";g&&!H(g)&&(h||!(e(g,"#")||M(g)||f(g.toLowerCase())||I(g)||J(g)))&&(h?(i+=c+"&url="+encodeURIComponent(g)+"&cache="+u(),na==a&&B(i)):d||(g=L(g,c))&&O(a,g))}}function O(a,b){var c,d=a.innerHTML;d&&-1==d.indexOf("<")&&(c=pa.createElement("b"),c.style.display="none",a.appendChild(c)),a.href=b,c&&a.removeChild(c)}function P(a){var c,d,e;return Da?c="0":La?(d=D(a),e=Ma[d],e&&(c=e.spmd)):(c=b(a,Oa),c&&c.match(/^d\w+$/)||(c="")),c}function Q(a){for(var b,c,d=a;a&&a.tagName!=Fa&&a.tagName!=Ga&&a.getAttribute;){if(c=La?E(a):a.getAttribute(Oa)){b=c,d=a;break}if(!(a=a.parentNode))break}return b&&!/^[\w\-\.]+$/.test(b)&&(b="0"),{spm_c:b,el:d}}function R(a){var b;return a&&(b=a.match(/&?\bspm=([^&#]*)/))?b[1]:""}function S(a,b){var c=x(a),d=R(c),e=null,f=ga&&2==ga.split(".").length;return f?(e=[ga,0,P(a)||0],void N(a,e.join("."),b)):void(c&&d&&(c=c.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"").replace(/\?#/,"#"),O(a,c)))}function T(a,c){na=a;var d,e,f=b(a,Xa);if(f)N(a,f,c);else{if(d=Q(a.parentNode),e=d.spm_c,!e)return void S(a,c);Da&&(e="0"),G(d.el,e,c),G(d.el,e,c,!0)}}function U(b){if(b&&1==b.nodeType){d(b,Ta),d(b,Ua);var c,e=a(b.getElementsByTagName("a")),f=a(b.getElementsByTagName("area")),g=e.concat(f),h=g.length;for(c=0;h>c;c++)d(g[c],Xa)}}function V(a){var b=a.parentNode;if(!b)return"";var c=a.getAttribute(Oa),d=Q(b),e=d.spm_c||0;e&&-1!=e.indexOf(".")&&(e=e.split("."),e=e[e.length-1]);var f=ga+"."+e,g=Ba[f]||0;return g++,Ba[f]=g,c=c||g,f+".i"+c}function W(a){var c,d=a.tagName;return ja=oa.g_aplus_pv_id,"A"!=d&&"AREA"!=d?c=V(a):(T(a,ra),c=b(a,Xa)),c=(c||"0.0.0.0").split("."),{a:c[0],b:c[1],c:c[2],d:c[3]}}function X(a){var b=W(a);return b.a+"."+b.b+"."+b.c+"."+b.d}function Y(){if(!Na){if(!oa.spmData)return void(za||setTimeout(Y,100));Na=ra;var a,b,c,d,e=oa.spmData.data;if(e&&h(e))for(a=0,b=e.length;b>a;a++)c=e[a],d=c.xpath,Ma[d]={spmc:c.spmc,spmd:c.spmd}}}function Z(){var a,c,d,e,f=pa.getElementsByTagName("iframe"),g=f.length;for(c=0;g>c;c++)a=f[c],!a.src&&(d=b(a,Qa))&&(e=W(a),e?(e=[e.a,e.b,e.c,e.d,e.e].join("."),a.src=L(d,e)):a.src=d)}function $(){function a(){b++,b>10&&(c=3e3),Z(),setTimeout(a,c)}var b=0,c=500;a()}function _(){return window._prism_lk?"_prism_lk="+encodeURIComponent(JSON.stringify(window._prism_lk)):""}function aa(a,b){var c,d,f="gostr",g="locaid",h={};if(q(b,h),c=h[f],d=h[g],c&&d){e(c,"/")&&(c=c.substr(1));var i,j=W(a),k=[j.a,j.b,j.c,d].join("."),l=c+"."+k,m=["logtype=2","cache="+Math.random(),"autosend=1","spm-cnt="+[j.a,j.b,0,0].join("."),_()];for(i in h)h.hasOwnProperty(i)&&i!=f&&i!=g&&m.push(i+"="+h[i]);m.length>0&&(l+="?"+m.join("&"));var n=location.search.slice(1),o=location.hash.slice(1);m.push("_h5params="+encodeURIComponent(n)),m.push("_h5hash="+encodeURIComponent(o));var p,r={gmkey:"",gokey:m.length>0?m.join("&"):""};if(oa.goldlog&&oa.goldlog.call&&(p=oa.goldlog.windVaneData)){try{r=JSON.stringify(r),"{}"==r&&(r="")}catch(s){r=""}p.functype="2101",p.logkey="/"+c+"."+k,p.logkeyargs=r,p.extendargs="",delete p.spmcnt,delete p.spmpre,delete p.lzsid,oa.goldlog.call("WVTBUserTrack","toUT",p)}B(ya+l),a.setAttribute(Xa,k)}}function ba(a){for(var c;a&&a.tagName!=Fa;){c=b(a,Ra);{if(c){aa(a,c);break}a=a.parentNode}}}function ca(){wa?y(pa,"tap",ba):y(pa,"mousedown",ba)}function da(a){for(var b;a&&(b=a.tagName);){if("A"==b||"AREA"==b){T(a,sa);break}if(b==Ga||b==Fa)break;a=a.parentNode}}var ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa=window,pa=document,qa=location,ra=!0,sa=!1,ta=qa.href,ua=qa.protocol,va="https:"==ua,wa=t(),xa=va?"https:":"http:",ya=xa+"//wgo.mmstat.com/",za=sa,Aa=parent!==self,Ba={},Ca="0.0",Da=!1,Ea="::-plain-::",Fa="HTML",Ga="BODY",Ha=!!pa.attachEvent,Ia="attachEvent",Ja="addEventListener",Ka=Ha?Ia:Ja,La=sa,Ma={},Na=sa,Oa="data-spm",Pa="data-spm-protocol",Qa="data-spm-src",Ra="data-spm-click",Sa="data-auto-spmd",Ta="data-spm-max-idx",Ua="data-auto-spmd-max-idx",Va="",Wa="data-spm-wangpu-module-id",Xa="data-spm-anchor-id";l(ta,["xiaobai.com","admin.taobao.org"])||(A(function(){za=ra}),C(),Y(),$(),ca(),wa?y(pa,"tap",da):(y(pa,"mousedown",da),y(pa,"keydown",da)),oa.g_SPM={resetModule:U,anchorBeacon:T,getParam:W,spm:X})}(),function(){function a(a,b,c){a[v]((s?"on":"")+b,function(a){a=a||j.event;var b=a.target||a.srcElement;c(a,b)},!1)}function b(){return/&?\bspm=[^&#]*/.test(location.href)?location.href.match(/&?\bspm=[^&#]*/gi)[0].split("=")[1]:""}function c(a,b){if(a&&/&?\bspm=[^&#]*/.test(a)&&(a=a.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")),!b)return a;var c,d,e,f,g,h,i,j="&";if(-1!=a.indexOf("#")&&(e=a.split("#"),a=e.shift(),d=e.join("#")),f=a.split("?"),g=f.length-1,e=f[0].split("//"),e=e[e.length-1].split("/"),h=e.length>1?e.pop():"",g>0&&(c=f.pop(),a=f.join("?")),c&&g>1&&-1==c.indexOf("&")&&-1!=c.indexOf("%")&&(j="%26"),a=a+"?spm="+b+(c?j+c:"")+(d?"#"+d:""),i=h.indexOf(".")>-1?h.split(".").pop().toLowerCase():""){if({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1}.hasOwnProperty(i))return 0;!c&&1>=g&&(d||{htm:1,html:1,php:1}.hasOwnProperty(i)||(a+="&file="+h))}return a}function d(a){function b(a){return a=a.replace(/refpos[=(%3D)]\w*/gi,h).replace(f,"%3D"+d+"%26"+e.replace("=","%3D")).replace(g,d),e.length>0&&(a+="&"+e),a}var c=window.location.href,d=c.match(/mm_\d{0,24}_\d{0,24}_\d{0,24}/i),e=c.match(/[&\?](pvid=[^&]*)/i),f=new RegExp("%3Dmm_\\d+_\\d+_\\d+","ig"),g=new RegExp("mm_\\d+_\\d+_\\d+","ig");e=e&&e[1]?e[1]:"";var h=c.match(/(refpos=(\d{0,24}_\d{0,24}_\d{0,24})?(,[a-z]+)?)(,[a-z]+)?/i);return h=h&&h[0]?h[0]:"",d?(d=d[0],b(a)):a}function e(b){var c=j.KISSY;c?c.ready(b):j.jQuery?jQuery(k).ready(b):"complete"===k.readyState?b():a(j,"load",b)}function f(a,b){return a&&a.getAttribute?a.getAttribute(b)||"":""}function g(a){if(a){var b,c=r.length;for(b=0;c>b;b++)if(a.indexOf(r[b])>-1)return!0;return!1}}function h(a,b){if(a&&/&?\bspm=[^&#]*/.test(a)&&(a=a.replace(/&?\bspm=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,"")),!b)return a;var c,d,e,f,g,h,i,j="&";if(-1!=a.indexOf("#")&&(e=a.split("#"),a=e.shift(),d=e.join("#")),f=a.split("?"),g=f.length-1,e=f[0].split("//"),e=e[e.length-1].split("/"),h=e.length>1?e.pop():"",g>0&&(c=f.pop(),a=f.join("?")),c&&g>1&&-1==c.indexOf("&")&&-1!=c.indexOf("%")&&(j="%26"),a=a+"?spm="+b+(c?j+c:"")+(d?"#"+d:""),i=h.indexOf(".")>-1?h.split(".").pop().toLowerCase():""){if({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1}.hasOwnProperty(i))return 0;!c&&1>=g&&(d||{htm:1,html:1,php:1}.hasOwnProperty(i)||(a+="&__file="+h))}return a}function i(a){if(g(a.href)){var c=f(a,q);if(!c){if(!n)return;var d=n(a),e=[d.a,d.b,d.c,d.d,d.e].join(".");p&&(e=[d.a||"0",d.b||"0",d.c||"0",d.d||"0"].join("."),e=(b()||"0.0.0.0.0")+"_"+e);var i=h(a.href,e);a.href=i,a.setAttribute(q,e)}}a=void 0}var j=window,k=document,l=location,m=(l.href,j._alimm_spmact_on_);if("undefined"==typeof m&&(m=1),1==m&&(m=1),0==m&&(m=0),m){try{var n=j.g_SPM.getParam}catch(o){n=function(){return{a:0,b:0,c:0,d:0,e:0}}}var p=!0;try{p=self.location!=top.location}catch(o){}var q="data-spm-act-id",r=["mclick.simba.taobao.com","click.simba.taobao.com","click.tanx.com","click.mz.simba.taobao.com","click.tz.simba.taobao.com","redirect.simba.taobao.com","rdstat.tanx.com","stat.simba.taobao.com","s.click.taobao.com"],s=!!k.attachEvent,t="attachEvent",u="addEventListener",v=s?t:u;a(k,"mousedown",function(a,b){for(var c,d=0;b&&(c=b.tagName)&&5>d;){if("A"==c||"AREA"==c){i(b);break}if("BODY"==c||"HTML"==c)break;b=b.parentNode,d++}}),e(function(){for(var a,e,g=document.getElementsByTagName("iframe"),h=0;h<g.length;h++){a=f(g[h],"mmsrc"),e=f(g[h],"mmworked");var i=n(g[h]),j=[i.a||"0",i.b||"0",i.c||"0",i.d||"0",i.e||"0"].join(".");a&&!e?(p&&(j=[i.a||"0",i.b||"0",i.c||"0",i.d||"0"].join("."),j=b()+"_"+j),g[h].src=c(d(a),j),g[h].setAttribute("mmworked","mmworked")):g[h].setAttribute(q,j)}})}}(),function(){function a(a){var b=c.createElement("script");b.type="text/javascript",b.async=!0,b.src=a,c.getElementsByTagName("head")[0].appendChild(b)}var b=window,c=document;!function(){"complete"===c.readyState?a("//g.alicdn.com/sd/data_sufei/1.5.1/aplus/index.js"):b.addEventListener("load",function(){a("//g.alicdn.com/sd/data_sufei/1.5.1/aplus/index.js")},!1)}()}();/*! Generated by Clam: h5-home */
!function(){KISSY.config("tag",null),KISSY.Config.version="0.2.167";var a,b,c=function(){var a=window.location.href.match(/[\?&]version=(\d+\.\d+\.\d+)/i);return a&&a[1]?a[1]:"0.2.167"},d=!1,e=window.location.host;if(location.search.indexOf("ks-debug")>=0&&(d=!0),e.match(/^(dev\.|demo)/gi)&&(d=!0),e.match(/m\.(alitrip|taobao)\.com/gim)&&d!==!0&&(a=!0),e.match(/(wapa|waptest)\.(alitrip|taobao)\.com/gim)&&d!==!0&&(b=!0),/http(s)?:/.test(window.location.protocol)||(d=!0),(window._$isOffline$_||window.MT_CONFIG&&window.MT_CONFIG.offline)&&(d=!0,a=!0,b=!1),KISSY.Config.debug=d,KISSY.Config.publish=a,KISSY.Config.daily=b,d)KISSY.config({combine:!1,packages:[{name:"h5-home",path:"../../",charset:"utf-8",ignorePackageNameInUri:!0,debug:!0}]});else{var f=KISSY.Config.daily?"g-assets.daily.taobao.net":"g.alicdn.com";KISSY.config({combine:!0,packages:[{name:"h5-home",path:"//"+f+"/trip/h5-home/"+c(),ignorePackageNameInUri:!0}]})}}();!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pipe",[],e):"object"==typeof exports?exports.pipe=e():t.pipe=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/build/",e(0)}([function(t,e,n){"use strict";if(!window.Pipe){var r,o,i,a,c,s,u,p,f,d;!function(){var e=function(t){if(t.script&&r.isFunction(t.script))try{t.script()}catch(e){}},l=function(t){if(t.style&&r.isString(t.style)){var e=document.createElement("style");(document.getElementsByTagName("head")[0]||document.body).appendChild(e),e.appendChild(document.createTextNode(t.style))}},m=function(t){if(t.content&&r.isString(t.content)){var e=["prepend","append","before","after","html"].indexOf(t.method)>-1?t.method:"append";if(window.KISSY&&KISSY.use)KISSY.use("node",function(n,r){var o=t.all?n.all:n.one;o(t.target)[e](t.content)});else if(window.Zepto){var n=$(t.target);t.all||(n=n.first()),n[e](t.content)}}},y=function(t){if(!t||!t.url&&!t.spm)return!1;var e;if(t.url)if(r.isRegExp(t.url))try{if(e=new RegExp(t.url),!e.test(location.href))return!1}catch(n){return!1}else if(-1==location.href.indexOf(t.url))return!1;return!t.spm||!window.MT.Tracker.getPageAB()==t.spm},v=function(t){if(!t||!t.start&&!t.end)return!0;var e=new Date,n=r.formatDate(t.start),o=r.formatDate(t.end);return!(n&&n>e||o&&e>o)},g=function(t){var e=t.time&&t.time.trigger||"now";switch(e){case"now":S(t);break;case"ready":window.KISSY&&KISSY.ready?KISSY.ready(function(){S(t)}):window.Zepto?$(function(){S(t)}):"complete"===document.readyState?S(t):window.addEventListener("load",function(){S(t)},!1);break;default:document.addEventListener(e,function(){S(t)},!1)}},S=function(t){var n=t.time&&t.time.delay||0,r=function(){switch(t.type){case"js":e(t);break;case"css":l(t);break;case"html":m(t)}};n?setTimeout(function(){r()},n):r()};r=n(1),o=n(2),i=location.host,a=location.search,c=!1,(a.indexOf("disabled_pipe")>-1||"true"==r.getMeta("disabled_pipe"))&&(c=!0),s=new o({key:"__PIPE_JOBS",expirtTime:900}),u=!1,p=!1,i.match(/^(dev|demo)\./gi)&&(u=!0),(i.match(/waptest.(taobao|alitrip).com/gim)||a.indexOf("pipe_daily")>-1)&&(p=!0),f=!1,u&&(f=!0),(a.indexOf("disabled_pipe_cache")>-1||"true"==r.getMeta("disabled_pipe_cache"))&&(f=!0),d={getJobs:function(){if(!f){var t=s.get();if(t&&t.data)try{return window.eval&&window.eval("window.__PipeTempFunction = "+t.data),void this.start(window.__PipeTempFunction)}catch(e){}}var n=u||p?"http://g-assets.daily.taobao.net/trip/pipe-job/pipe-jobs.js":"https://g.alicdn.com/trip/pipe-job/pipe-jobs.js";window.KISSY&&KISSY.use?KISSY.use("",function(t){t.getScript(n+"?t="+(new Date).getTime(),{charset:"utf-8"})}):window.Zepto&&$.ajaxJSONP({url:n+"?t="+(new Date).getTime()+"&callback=?"})},start:function(t){var e=t();s.set({data:t.toString()});var n=e.taskList;e.config;r.isArray(n)&&n.length&&n.forEach(function(t){r.isObject(t)&&y(t.rule)&&v(t.period)&&g(t)})}},t.exports=d,window.Pipe=d,window.KISSY&&KISSY.add&&KISSY.add("pipe/index",function(){return d}),c||d.getJobs()}()}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports={mix:function(t,e,n,r,o){var i;return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var n in e)void 0!==(i=e[n])&&(t[n]=i)}),t},merge:function(){var t=Array.prototype.slice.call(arguments,0);return this.mix.apply(null,[{}].concat(t))},isObject:function(t){return"object"==("undefined"==typeof t?"undefined":n(t))},isRegExp:function(t){return t instanceof RegExp},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isFunction:function(t){return t instanceof Function},isString:function(t){return"string"==typeof t},formatDate:function(t){var e=t.split(" ")[0],n=t.split(" ")[1];return e=e&&e.split("-")||[],n=n&&n.split(":")||[],new Date(e[0],e[1]-1,e[2],n[0],n[1],n[2])},getMeta:function(t){var e,n=document.querySelectorAll("meta");return Array.prototype.forEach.call(n,function(n){return n.getAttribute("name")==t?(e=n.getAttribute("content"),!1):void 0}),e}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(1),i=n(3);!function(){var e="__timestamp",n="__version",a="__params",c="__key",s="__isLocData",u=function(t){var e=this;t=t||{},e.key=t.key,e.expirtTime=t.expirtTime||86400,e.version=t.version,e.params=t.params||{}};o.mix(u.prototype,{set:function(t){var u=this;t=t||{};var p=t.key||this.key,f=t.version||this.version,d="object"==r(t.data)?o.merge(t.data):o.merge({data:t.data});if(!p)return!1;d[e]=(new Date).getTime(),d[n]=f,d[c]=p,d[s]=!0;var l=o.merge(u.params,t.params);return l&&(d[a]=t.params),i.set(p,JSON.stringify(d)),!0},get:function(t){var o=this;t=t||{};var a=t.key||o.key,c=t.expirtTime||o.expirtTime,s=t.version||o.version;if(!a)return!1;var u;try{u=JSON.parse(i.get(a))}catch(p){return!1}return!u||"object"!=("undefined"==typeof u?"undefined":r(u))||!u[e]||(new Date).getTime()-u[e]>=1e3*c||u[n]!=s?(o.remove({key:a}),!1):u},remove:function(t){var e=this;t=t||{};var n="string"==typeof t?t:t.key||e.key;return n?(i.remove(n),!0):!1}}),t.exports=u}()},function(t,e){"use strict";!function(){var e=function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}(),n=function(){var t="test";try{return sessionStorage.setItem(t,t),sessionStorage.removeItem(t),!0}catch(e){return!1}}();t.exports={set:function(t,r){return t&&r?(e?localStorage.setItem(t,r):n&&sessionStorage.setItem(t,r),!0):!1},get:function(t){return t?e?localStorage.getItem(t):n?sessionStorage.getItem(t):void 0:void 0},remove:function(t){return t?(e?localStorage.removeItem(t):n&&sessionStorage.removeItem(t),!0):!1},isSupport:function(){return e||n}}}()}])});/*generated by KMB*/
KISSY.config("modules", {"h5-home/pages/city/index":{"requires":["jsbridge","base","h5-home/widgets/aop/index","h5-home/datas/city_data","h5-home/widgets/scroll-list/index","h5-home/widgets/geolocation/city","h5-home/widgets/search-suggest/index","h5-home/widgets/libs/util"]},"h5-home/widgets/aop/index":{"requires":["lang"]},"h5-home/widgets/scroll-list/index":{"requires":["node","touch","ua","h5-home/widgets/superbase/index","h5-home/widgets/scroller/index"]},"h5-home/widgets/superbase/index":{"requires":["base","h5-home/widgets/aop/index"]},"h5-home/widgets/scroller/index":{"requires":["node","h5-home/widgets/iscroll/index","h5-home/widgets/orientation/index"]},"h5-home/widgets/iscroll/index":{"requires":["touch"]},"h5-home/widgets/geolocation/city":{"requires":["h5-home/widgets/geolocation/index","mtop"]},"h5-home/widgets/geolocation/index":{"requires":["base","bridge"]},"h5-home/widgets/search-suggest/index":{"requires":["juicer","h5-home/widgets/superbase/index","h5-home/widgets/autocomplete/index","h5-home/widgets/history-list/index","h5-home/widgets/search-input/index","h5-home/widgets/scroller/index","h5-home/widgets/mask/index"]},"h5-home/widgets/autocomplete/index":{"requires":["h5-home/widgets/autocomplete/base","h5-home/widgets/autocomplete/list"]},"h5-home/widgets/autocomplete/base":{"requires":["node","lang","h5-home/widgets/superbase/index"]},"h5-home/widgets/autocomplete/list":{"requires":["node"]},"h5-home/widgets/history-list/index":{"requires":["h5-home/widgets/history-list/base","h5-home/widgets/history-list/list"]},"h5-home/widgets/history-list/base":{"requires":["h5-home/widgets/superbase/index","lang"]},"h5-home/widgets/history-list/list":{"requires":["node"]},"h5-home/widgets/search-input/index":{"requires":["node","ua","h5-home/widgets/superbase/index"]},"h5-home/widgets/mask/index":{"requires":["node","touch","anim","h5-home/widgets/superbase/index"]},"h5-home/widgets/libs/util":{"requires":["h5-home/widgets/libs/uri","tracker"]},"h5-home/widgets/libs/uri":{"requires":["base"]},"h5-home/pages/home/city":{"requires":["q","h5-home/pages/home/util","h5-home/datas/city_map","h5-home/datas/city_data","h5-home/widgets/notification/index","h5-home/widgets/geolocation/city"]},"h5-home/pages/home/util":{"requires":["jsbridge","lang","uri"]},"h5-home/pages/home/data":{"requires":["q","io","ua","mtop","h5-home/pages/home/util"]},"h5-home/pages/home/dbl11":{"requires":["q","mtop","juicer","jsbridge","h5-home/pages/home/util"]},"h5-home/pages/home/index":{"requires":["ua","h5-home/pages/home/dbl11","h5-home/pages/home/util","h5-home/pages/home/city","h5-home/pages/home/data","h5-home/pages/home/view"]},"h5-home/pages/home/view":{"requires":["ua","juicer","jsbridge","h5-home/pages/home/util","h5-home/pages/home/offline","h5-home/widgets/lazyload/lite","h5-home/pages/home/mods/banner/index","h5-home/pages/home/mods/headline/index","h5-home/pages/home/mods/onsale/index","h5-home/pages/home/mods/favor/index"]},"h5-home/pages/home/offline":{"requires":["ua","jsbridge","h5-home/pages/home/util"]},"h5-home/pages/home/mods/banner/index":{"requires":["h5-home/widgets/simple-slide/index","h5-home/widgets/orientation/index"]},"h5-home/widgets/simple-slide/index":{"requires":["node","h5-home/widgets/iscroll/index"]},"h5-home/pages/home/mods/headline/index":{"requires":["h5-home/widgets/simple-slide/index","h5-home/widgets/orientation/index"]},"h5-home/pages/home/mods/onsale/index":{"requires":["juicer","h5-home/widgets/count-down/index"]},"h5-home/widgets/count-down/index":{"requires":["node"]},"h5-home/pages/home/mods/favor/index":{"requires":["juicer","mtop","ua","q"]},"h5-home/pages/onesearch/index":{"requires":["q","lang","node","mtop","touch","juicer","jsbridge"]},"h5-home/pages/preparation/index":{"requires":["jsbridge","juicer","touch","node","ua"]},"h5-home/widgets/countdown/index":{"requires":["node","base","juicer"]},"h5-home/widgets/taokouling/draw":{"requires":["mtop"]},"h5-home/widgets/taokouling/index":{"requires":["h5-home/widgets/taokouling/draw","h5-home/widgets/taokouling/toast","mtop","q"]},"h5-home/widgets/taokouling/toast":{"requires":["mtop","h5-home/widgets/notification/index"]}});